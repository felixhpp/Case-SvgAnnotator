!function o(s,u,c){function a(e,t){if(!u[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(l)return l(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=u[e]={exports:{}};s[e][0].call(i.exports,function(t){return a(s[e][1][t]||t)},i,i.exports,o,s,u,c)}return u[e].exports}for(var l="function"==typeof require&&require,t=0;t<c.length;t++)a(c[t]);return a}({1:[function(t,e,r){var c=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return r},o=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=c(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0;var i,u=10;try{var a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0}),i=0===a.x}catch(t){i=!1}function l(t){return void 0===t._maxListeners?n.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,o,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]):(o=t._events=c(null),t._eventsCount=0),s){if("function"==typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=l(t))&&0<i&&s.length>i){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else s=o[e]=r,++t._eventsCount;return t}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=o.call(f,n);return i.listener=r,n.wrapFn=i}function b(t,e,r){var n=t._events;if(!n)return[];var i=n[e];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):y(i,i.length):[]}function d(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function y(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}i?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');u=t}}):n.defaultMaxListeners=u,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},n.prototype.getMaxListeners=function(){return l(this)},n.prototype.emit=function(t){var e,r,n,i,o,s,u="error"===t;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(u){if(1<arguments.length&&(e=arguments[1]),e instanceof Error)throw e;var c=new Error('Unhandled "error" event. ('+e+")");throw c.context=e,c}if(!(r=s[t]))return!1;var a="function"==typeof r;switch(n=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var n=t.length,i=y(t,n),o=0;o<n;++o)i[o].call(r)}(r,a,this);break;case 2:!function(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,o=y(t,i),s=0;s<i;++s)o[s].call(r,n)}(r,a,this,arguments[1]);break;case 3:!function(t,e,r,n,i){if(e)t.call(r,n,i);else for(var o=t.length,s=y(t,o),u=0;u<o;++u)s[u].call(r,n,i)}(r,a,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,n,i,o){if(e)t.call(r,n,i,o);else for(var s=t.length,u=y(t,s),c=0;c<s;++c)u[c].call(r,n,i,o)}(r,a,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,o=y(t,i),s=0;s<i;++s)o[s].apply(r,n)}(r,a,this,i)}return!0},n.prototype.on=n.prototype.addListener=function(t,e){return h(this,t,e,!1)},n.prototype.prependListener=function(t,e){return h(this,t,e,!0)},n.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,e)),this},n.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,e)),this},n.prototype.removeListener=function(t,e){var r,n,i,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=c(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;0<=o;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),n.removeListener&&this.emit("removeListener",t,s||e)}return this},n.prototype.removeAllListeners=function(t){var e,r,n;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=c(null),this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=c(null):delete r[t]),this;if(0===arguments.length){var i,o=s(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=c(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(e)for(n=e.length-1;0<=n;n--)this.removeListener(t,e[n]);return this},n.prototype.listeners=function(t){return b(this,t,!0)},n.prototype.rawListeners=function(t){return b(this,t,!1)},n.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},n.prototype.listenerCount=d,n.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],2:[function(t,e,r){var n,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:u}catch(t){i=u}}();var a,l=[],h=!1,f=-1;function p(){h&&a&&(h=!1,a.length?l=a.concat(l):f=-1,l.length&&b())}function b(){if(!h){var t=c(p);h=!0;for(var e=l.length;e;){for(a=l,l=[];++f<e;)a&&a[f].run();f=-1,e=l.length}a=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===u||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new d(t,e)),1!==l.length||h||c(b)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./internal/Observable");r.Observable=n.Observable;var i=t("./internal/observable/ConnectableObservable");r.ConnectableObservable=i.ConnectableObservable;var o=t("./internal/operators/groupBy");r.GroupedObservable=o.GroupedObservable;var s=t("./internal/symbol/observable");r.observable=s.observable;var u=t("./internal/Subject");r.Subject=u.Subject;var c=t("./internal/BehaviorSubject");r.BehaviorSubject=c.BehaviorSubject;var a=t("./internal/ReplaySubject");r.ReplaySubject=a.ReplaySubject;var l=t("./internal/AsyncSubject");r.AsyncSubject=l.AsyncSubject;var h=t("./internal/scheduler/asap");r.asapScheduler=h.asap;var f=t("./internal/scheduler/async");r.asyncScheduler=f.async;var p=t("./internal/scheduler/queue");r.queueScheduler=p.queue;var b=t("./internal/scheduler/animationFrame");r.animationFrameScheduler=b.animationFrame;var d=t("./internal/scheduler/VirtualTimeScheduler");r.VirtualTimeScheduler=d.VirtualTimeScheduler,r.VirtualAction=d.VirtualAction;var y=t("./internal/Scheduler");r.Scheduler=y.Scheduler;var v=t("./internal/Subscription");r.Subscription=v.Subscription;var m=t("./internal/Subscriber");r.Subscriber=m.Subscriber;var _=t("./internal/Notification");r.Notification=_.Notification;var x=t("./internal/util/pipe");r.pipe=x.pipe;var w=t("./internal/util/noop");r.noop=w.noop;var g=t("./internal/util/identity");r.identity=g.identity;var O=t("./internal/util/isObservable");r.isObservable=O.isObservable;var S=t("./internal/util/ArgumentOutOfRangeError");r.ArgumentOutOfRangeError=S.ArgumentOutOfRangeError;var j=t("./internal/util/EmptyError");r.EmptyError=j.EmptyError;var E=t("./internal/util/ObjectUnsubscribedError");r.ObjectUnsubscribedError=E.ObjectUnsubscribedError;var P=t("./internal/util/UnsubscriptionError");r.UnsubscriptionError=P.UnsubscriptionError;var A=t("./internal/util/TimeoutError");r.TimeoutError=A.TimeoutError;var C=t("./internal/observable/bindCallback");r.bindCallback=C.bindCallback;var T=t("./internal/observable/bindNodeCallback");r.bindNodeCallback=T.bindNodeCallback;var M=t("./internal/observable/combineLatest");r.combineLatest=M.combineLatest;var I=t("./internal/observable/concat");r.concat=I.concat;var R=t("./internal/observable/defer");r.defer=R.defer;var N=t("./internal/observable/empty");r.empty=N.empty;var k=t("./internal/observable/forkJoin");r.forkJoin=k.forkJoin;var L=t("./internal/observable/from");r.from=L.from;var V=t("./internal/observable/fromEvent");r.fromEvent=V.fromEvent;var B=t("./internal/observable/fromEventPattern");r.fromEventPattern=B.fromEventPattern;var F=t("./internal/observable/generate");r.generate=F.generate;var D=t("./internal/observable/iif");r.iif=D.iif;var z=t("./internal/observable/interval");r.interval=z.interval;var W=t("./internal/observable/merge");r.merge=W.merge;var U=t("./internal/observable/never");r.never=U.never;var Y=t("./internal/observable/of");r.of=Y.of;var q=t("./internal/observable/onErrorResumeNext");r.onErrorResumeNext=q.onErrorResumeNext;var X=t("./internal/observable/pairs");r.pairs=X.pairs;var H=t("./internal/observable/race");r.race=H.race;var $=t("./internal/observable/range");r.range=$.range;var G=t("./internal/observable/throwError");r.throwError=G.throwError;var Q=t("./internal/observable/timer");r.timer=Q.timer;var J=t("./internal/observable/using");r.using=J.using;var K=t("./internal/observable/zip");r.zip=K.zip;var Z=t("./internal/observable/empty");r.EMPTY=Z.EMPTY;var tt=t("./internal/observable/never");r.NEVER=tt.NEVER;var et=t("./internal/config");r.config=et.config},{"./internal/AsyncSubject":4,"./internal/BehaviorSubject":5,"./internal/Notification":7,"./internal/Observable":8,"./internal/ReplaySubject":11,"./internal/Scheduler":12,"./internal/Subject":13,"./internal/Subscriber":15,"./internal/Subscription":16,"./internal/config":17,"./internal/observable/ConnectableObservable":18,"./internal/observable/bindCallback":20,"./internal/observable/bindNodeCallback":21,"./internal/observable/combineLatest":22,"./internal/observable/concat":23,"./internal/observable/defer":24,"./internal/observable/empty":25,"./internal/observable/forkJoin":26,"./internal/observable/from":27,"./internal/observable/fromEvent":29,"./internal/observable/fromEventPattern":30,"./internal/observable/generate":34,"./internal/observable/iif":35,"./internal/observable/interval":36,"./internal/observable/merge":37,"./internal/observable/never":38,"./internal/observable/of":39,"./internal/observable/onErrorResumeNext":40,"./internal/observable/pairs":41,"./internal/observable/race":42,"./internal/observable/range":43,"./internal/observable/throwError":45,"./internal/observable/timer":46,"./internal/observable/using":47,"./internal/observable/zip":48,"./internal/operators/groupBy":84,"./internal/scheduler/VirtualTimeScheduler":161,"./internal/scheduler/animationFrame":162,"./internal/scheduler/asap":163,"./internal/scheduler/async":164,"./internal/scheduler/queue":165,"./internal/symbol/observable":167,"./internal/util/ArgumentOutOfRangeError":169,"./internal/util/EmptyError":170,"./internal/util/ObjectUnsubscribedError":172,"./internal/util/TimeoutError":173,"./internal/util/UnsubscriptionError":174,"./internal/util/identity":177,"./internal/util/isObservable":186,"./internal/util/noop":189,"./internal/util/pipe":191}],4:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("./Subject"),s=t("./Subscription"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),s.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(o.Subject);r.AsyncSubject=u},{"./Subject":13,"./Subscription":16}],5:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("./Subject"),s=t("./util/ObjectUnsubscribedError"),u=function(r){function t(t){var e=r.call(this)||this;return e._value=t,e}return i(t,r),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var e=r.prototype._subscribe.call(this,t);return e&&!e.closed&&t.next(this._value),e},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},t}(o.Subject);r.BehaviorSubject=u},{"./Subject":13,"./util/ObjectUnsubscribedError":172}],6:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(i){function t(t,e,r){var n=i.call(this)||this;return n.parent=t,n.outerValue=e,n.outerIndex=r,n.index=0,n}return o(t,i),t.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},t.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(t("./Subscriber").Subscriber);r.InnerSubscriber=i},{"./Subscriber":15}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./observable/empty"),i=t("./observable/of"),o=t("./observable/throwError"),s=function(){function e(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return e.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},e.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},e.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return i.of(this.value);case"E":return o.throwError(this.error);case"C":return n.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();r.Notification=s},{"./observable/empty":25,"./observable/of":39,"./observable/throwError":45}],8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("./util/toSubscriber"),n=t("../internal/symbol/observable"),i=t("./util/pipe"),s=t("./config"),u=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,r){var n=this.operator,i=o.toSubscriber(t,e,r);if(n?n.call(i,this.source):i._addParentTeardownLogic(this.source||s.config.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.config.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){s.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),e.error(t)}},r.prototype.forEach=function(n,t){var i=this;return new(t=c(t))(function(t,e){var r;r=i.subscribe(function(t){try{n(t)}catch(t){e(t),r&&r.unsubscribe()}},e,t)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[n.observable]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:i.pipeFromArray(t)(this)},r.prototype.toPromise=function(t){var n=this;return new(t=c(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},r.create=function(t){return new r(t)},r}();function c(t){if(t||(t=s.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}r.Observable=u},{"../internal/symbol/observable":167,"./config":17,"./util/pipe":191,"./util/toSubscriber":198}],9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./config"),i=t("./util/hostReportError");r.empty={closed:!0,next:function(t){},error:function(t){if(n.config.useDeprecatedSynchronousErrorHandling)throw t;i.hostReportError(t)},complete:function(){}}},{"./config":17,"./util/hostReportError":176}],10:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(t("./Subscriber").Subscriber);r.OuterSubscriber=o},{"./Subscriber":15}],11:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("./Subject"),s=t("./scheduler/queue"),u=t("./Subscription"),c=t("./operators/observeOn"),a=t("./util/ObjectUnsubscribedError"),l=t("./SubjectSubscription"),h=function(i){function t(t,e,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY);var n=i.call(this)||this;return n.scheduler=r,n._events=[],n._infiniteTimeWindow=!1,n._bufferSize=t<1?1:t,n._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(n._infiniteTimeWindow=!0,n.next=n.nextInfiniteTimeWindow):n.next=n.nextTimeWindow,n}return o(t,i),t.prototype.nextInfiniteTimeWindow=function(t){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),i.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new f(this._getNow(),t)),this._trimBufferThenGetEvents(),i.prototype.next.call(this,t)},t.prototype._subscribe=function(t){var e,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new a.ObjectUnsubscribedError;if(this.isStopped||this.hasError?e=u.Subscription.EMPTY:(this.observers.push(t),e=new l.SubjectSubscription(this,t)),i&&t.add(t=new c.ObserveOnSubscriber(t,i)),r)for(var s=0;s<o&&!t.closed;s++)t.next(n[s]);else for(s=0;s<o&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},t.prototype._getNow=function(){return(this.scheduler||s.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(t-n[o].time<r);)o++;return e<i&&(o=Math.max(o,i-e)),0<o&&n.splice(0,o),n},t}(i.Subject);r.ReplaySubject=h;var f=function(t,e){this.time=t,this.value=e}},{"./Subject":13,"./SubjectSubscription":14,"./Subscription":16,"./operators/observeOn":99,"./scheduler/queue":165,"./util/ObjectUnsubscribedError":172}],12:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function r(t,e){void 0===e&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},r.now=function(){return Date.now()},r}();r.Scheduler=n},{}],13:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("./Observable"),s=t("./Subscriber"),u=t("./Subscription"),c=t("./util/ObjectUnsubscribedError"),a=t("./SubjectSubscription"),l=t("../internal/symbol/rxSubscriber"),h=function(r){function t(t){var e=r.call(this,t)||this;return e.destination=t,e}return i(t,r),t}(s.Subscriber);r.SubjectSubscriber=h;var f=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[l.rxSubscriber]=function(){return new h(this)},t.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},t.prototype.next=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},t.prototype.error=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),u.Subscription.EMPTY):this.isStopped?(t.complete(),u.Subscription.EMPTY):(this.observers.push(t),new a.SubjectSubscription(this,t))},t.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},t.create=function(t,e){return new p(t,e)},t}(o.Observable),p=function(n){function t(t,e){var r=n.call(this)||this;return r.destination=t,r.source=e,r}return i(t,n),t.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},t.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},t.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},t.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):u.Subscription.EMPTY},t}(r.Subject=f);r.AnonymousSubject=p},{"../internal/symbol/rxSubscriber":168,"./Observable":8,"./SubjectSubscription":14,"./Subscriber":15,"./Subscription":16,"./util/ObjectUnsubscribedError":172}],14:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=function(n){function t(t,e){var r=n.call(this)||this;return r.subject=t,r.subscriber=e,r.closed=!1,r}return i(t,n),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},t}(t("./Subscription").Subscription);r.SubjectSubscription=o},{"./Subscription":16}],15:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var c=t("./util/isFunction"),a=t("./Observer"),i=t("./Subscription"),u=t("../internal/symbol/rxSubscriber"),s=t("./config"),l=t("./util/hostReportError"),h=function(s){function i(t,e,r){var n,i=s.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=a.empty;break;case 1:if(!t){i.destination=a.empty;break}if("object"==typeof t){if((n=t)instanceof h||"syncErrorThrowable"in n&&n[u.rxSubscriber]){var o=t[u.rxSubscriber]();i.syncErrorThrowable=o.syncErrorThrowable,(i.destination=o)._addParentTeardownLogic(i)}else i.syncErrorThrowable=!0,i.destination=new f(i,t);break}default:i.syncErrorThrowable=!0,i.destination=new f(i,t,e,r)}return i}return o(i,s),i.prototype[u.rxSubscriber]=function(){return this},i.create=function(t,e,r){var n=new i(t,e,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t),this._unsubscribeParentSubscription())},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete(),this._unsubscribeParentSubscription())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,s.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._addParentTeardownLogic=function(t){this._parentSubscription=this.add(t)},i.prototype._unsubscribeParentSubscription=function(){null!==this._parentSubscription&&this._parentSubscription.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},i}(i.Subscription),f=function(u){function t(t,e,r,n){var i,o=u.call(this)||this;o._parentSubscriber=t;var s=o;return c.isFunction(e)?i=e:e&&(i=e.next,r=e.error,n=e.complete,e!==a.empty&&(s=Object.create(e),c.isFunction(s.unsubscribe)&&o.add(s.unsubscribe.bind(s)),s.unsubscribe=o.unsubscribe.bind(o))),o._context=s,o._next=i,o._error=r,o._complete=n,o}return o(t,u),t.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=s.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):l.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;l.hostReportError(t)}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};s.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),s.config.useDeprecatedSynchronousErrorHandling)throw t;l.hostReportError(t)}},t.prototype.__tryOrSetError=function(e,t,r){if(!s.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return s.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(l.hostReportError(t),!0)}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(r.Subscriber=h)},{"../internal/symbol/rxSubscriber":168,"./Observer":9,"./Subscription":16,"./config":17,"./util/hostReportError":176,"./util/isFunction":181}],16:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=t("./util/isArray"),h=t("./util/isObject"),f=t("./util/isFunction"),p=t("./util/tryCatch"),b=t("./util/errorObject"),d=t("./util/UnsubscriptionError"),n=function(){function n(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return n.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,u=n?n.length:0;r;)r.remove(this),r=++s<u&&n[s]||null;if(f.isFunction(i))p.tryCatch(i).call(this)===b.errorObject&&(e=!0,t=t||(b.errorObject.e instanceof d.UnsubscriptionError?y(b.errorObject.e.errors):[b.errorObject.e]));if(l.isArray(o))for(s=-1,u=o.length;++s<u;){var c=o[s];if(h.isObject(c))if(p.tryCatch(c.unsubscribe).call(c)===b.errorObject){e=!0,t=t||[];var a=b.errorObject.e;a instanceof d.UnsubscriptionError?t=t.concat(y(a.errors)):t.push(a)}}if(e)throw new d.UnsubscriptionError(t)}},n.prototype.add=function(t){if(!t||t===n.EMPTY)return n.EMPTY;if(t===this)return this;var e=t;switch(typeof t){case"function":e=new n(t);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){var r=e;(e=new n)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e},n.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},n.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},n.EMPTY=((t=new n).closed=!0,t),n}();function y(t){return t.reduce(function(t,e){return t.concat(e instanceof d.UnsubscriptionError?e.errors:e)},[])}r.Subscription=n},{"./util/UnsubscriptionError":174,"./util/errorObject":175,"./util/isArray":178,"./util/isFunction":181,"./util/isObject":185,"./util/tryCatch":199}],17:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=!1;r.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else n&&console.log("RxJS: Back to a better error behavior. Thank you. <3");n=t},get useDeprecatedSynchronousErrorHandling(){return n}}},{}],18:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subject"),s=t("../Observable"),u=t("../Subscriber"),c=t("../Subscription"),a=t("../operators/refCount"),l=function(n){function t(t,e){var r=n.call(this)||this;return r.source=t,r.subjectFactory=e,r._refCount=0,r._isComplete=!1,r}return i(t,n),t.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},t.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new c.Subscription).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=c.Subscription.EMPTY):this._connection=t),t},t.prototype.refCount=function(){return a.refCount()(this)},t}(s.Observable),h=(r.ConnectableObservable=l).prototype;r.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}};var f=function(n){function t(t,e){var r=n.call(this,t)||this;return r.connectable=e,r}return i(t,n),t.prototype._error=function(t){this._unsubscribe(),n.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),n.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},t}(o.SubjectSubscriber),p=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new p(t,r),i=e.subscribe(n);return n.closed||(n.connection=r.connect()),i}}(),function(n){function t(t,e){var r=n.call(this,t)||this;return r.connectable=e,r}return i(t,n),t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,1<e)this.connection=null;else{var r=this.connection,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(u.Subscriber))},{"../Observable":8,"../Subject":13,"../Subscriber":15,"../Subscription":16,"../operators/refCount":110}],19:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Observable"),s=t("../scheduler/asap"),u=t("../util/isNumeric"),c=function(i){function n(t,e,r){void 0===e&&(e=0),void 0===r&&(r=s.asap);var n=i.call(this)||this;return n.source=t,n.delayTime=e,n.scheduler=r,(!u.isNumeric(e)||e<0)&&(n.delayTime=0),r&&"function"==typeof r.schedule||(n.scheduler=s.asap),n}return o(n,i),n.create=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=s.asap),new n(t,e,r)},n.dispatch=function(t){var e=t.source,r=t.subscriber;return this.add(e.subscribe(r))},n.prototype._subscribe=function(t){var e=this.delayTime,r=this.source;return this.scheduler.schedule(n.dispatch,e,{source:r,subscriber:t})},n}(i.Observable);r.SubscribeOnObservable=c},{"../Observable":8,"../scheduler/asap":163,"../util/isNumeric":184}],20:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var c=t("../Observable"),a=t("../AsyncSubject"),i=t("../operators/map"),o=t("../util/isArray"),l=t("../util/isScheduler");function h(t){var n=this,e=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,s=i.context,u=i.scheduler,c=i.subject;if(!c){c=i.subject=new a.AsyncSubject;try{o.apply(s,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length<=1?t[0]:t;n.add(u.schedule(f,0,{value:r,subject:c}))}]))}catch(t){c.error(t)}}this.add(c.subscribe(r))}function f(t){var e=t.value,r=t.subject;r.next(e),r.complete()}r.bindCallback=function r(s,n,u){if(n){if(!l.isScheduler(n))return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(s,u).apply(void 0,t).pipe(i.map(function(t){return o.isArray(t)?n.apply(void 0,t):n(t)}))};u=n}return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var n,i=this,o={context:i,subject:n,callbackFunc:s,scheduler:u};return new c.Observable(function(t){if(u){var e={args:r,subscriber:t,params:o};return u.schedule(h,0,e)}if(!n){n=new a.AsyncSubject;try{s.apply(i,r.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.next(t.length<=1?t[0]:t),n.complete()}]))}catch(t){n.error(t)}}return n.subscribe(t)})}}},{"../AsyncSubject":4,"../Observable":8,"../operators/map":88,"../util/isArray":178,"../util/isScheduler":188}],21:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=t("../Observable"),a=t("../AsyncSubject"),i=t("../operators/map"),c=t("../util/isScheduler"),l=t("../util/isArray");function h(t){var i=this,e=t.params,r=t.subscriber,n=t.context,o=e.callbackFunc,s=e.args,u=e.scheduler,c=e.subject;if(!c){c=e.subject=new a.AsyncSubject;try{o.apply(n,s.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();if(r)i.add(u.schedule(p,0,{err:r,subject:c}));else{var n=t.length<=1?t[0]:t;i.add(u.schedule(f,0,{value:n,subject:c}))}}]))}catch(t){this.add(u.schedule(p,0,{err:t,subject:c}))}}this.add(c.subscribe(r))}function f(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function p(t){var e=t.err;t.subject.error(e)}r.bindNodeCallback=function r(o,n,s){if(n){if(!c.isScheduler(n))return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(o,s).apply(void 0,t).pipe(i.map(function(t){return l.isArray(t)?n.apply(void 0,t):n(t)}))};s=n}return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var i={subject:void 0,args:r,callbackFunc:o,scheduler:s,context:this};return new u.Observable(function(t){var e=i.context,n=i.subject;if(s)return s.schedule(h,0,{params:i,subscriber:t,context:e});if(!n){n=i.subject=new a.AsyncSubject;try{o.apply(e,r.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();r?n.error(r):(n.next(t.length<=1?t[0]:t),n.complete())}]))}catch(t){n.error(t)}}return n.subscribe(t)})}}},{"../AsyncSubject":4,"../Observable":8,"../operators/map":88,"../util/isArray":178,"../util/isScheduler":188}],22:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../util/isScheduler"),s=t("../util/isArray"),u=t("../OuterSubscriber"),c=t("../util/subscribeToResult"),a=t("./fromArray"),l={};r.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=null,n=null;return o.isScheduler(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),a.fromArray(t,n).lift(new h(r))};var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.resultSelector))},t}();r.CombineLatestOperator=h;var f=function(n){function t(t,e){var r=n.call(this,t)||this;return r.resultSelector=e,r.active=0,r.values=[],r.observables=[],r}return i(t,n),t.prototype._next=function(t){this.values.push(l),this.observables.push(t)},t.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var r=0;r<e;r++){var n=t[r];this.add(c.subscribeToResult(this,n,n,r))}}},t.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){var o=this.values,s=o[r],u=this.toRespond?s===l?--this.toRespond:this.toRespond:0;o[r]=e,0===u&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(u.OuterSubscriber);r.CombineLatestSubscriber=f},{"../OuterSubscriber":10,"../util/isArray":178,"../util/isScheduler":188,"../util/subscribeToResult":197,"./fromArray":28}],23:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util/isScheduler"),i=t("./of"),o=t("./from"),s=t("../operators/concatAll");r.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&n.isScheduler(t[1])?o.from(t[0]):s.concatAll()(i.of.apply(void 0,t))}},{"../operators/concatAll":60,"../util/isScheduler":188,"./from":27,"./of":39}],24:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),i=t("./from"),o=t("./empty");r.defer=function(r){return new n.Observable(function(e){var t;try{t=r()}catch(t){return void e.error(t)}return(t?i.from(t):o.empty()).subscribe(e)})}},{"../Observable":8,"./empty":25,"./from":27}],25:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable");function i(e){return new n.Observable(function(t){return e.schedule(function(){return t.complete()})})}r.EMPTY=new n.Observable(function(t){return t.complete()}),r.empty=function(t){return t?i(t):r.EMPTY},r.emptyScheduled=i},{"../Observable":8}],26:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),s=t("../util/isArray"),u=t("./empty"),c=t("../util/subscribeToResult"),a=t("../OuterSubscriber"),l=t("../operators/map");r.forkJoin=function t(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return"function"==typeof r[r.length-1]&&(e=r.pop()),1===r.length&&s.isArray(r[0])&&(r=r[0]),0===r.length?u.EMPTY:e?t(r).pipe(l.map(function(t){return e.apply(void 0,t)})):new o.Observable(function(t){return new h(t,r)})};var h=function(u){function t(t,e){var r=u.call(this,t)||this;r.sources=e,r.completed=0,r.haveValues=0;var n=e.length;r.values=new Array(n);for(var i=0;i<n;i++){var o=e[i],s=c.subscribeToResult(r,o,null,i);s&&r.add(s)}return r}return i(t,u),t.prototype.notifyNext=function(t,e,r,n,i){this.values[r]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(t){var e=this.destination,r=this.haveValues,n=this.values,i=n.length;t._hasValue?(this.completed++,this.completed===i&&(r===i&&e.next(n),e.complete())):e.complete()},t}(a.OuterSubscriber)},{"../Observable":8,"../OuterSubscriber":10,"../operators/map":88,"../util/isArray":178,"../util/subscribeToResult":197,"./empty":25}],27:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),i=t("../util/isPromise"),o=t("../util/isArrayLike"),s=t("../util/isInteropObservable"),u=t("../util/isIterable"),c=t("./fromArray"),a=t("./fromPromise"),l=t("./fromIterable"),h=t("./fromObservable"),f=t("../util/subscribeTo");r.from=function(t,e){if(!e)return t instanceof n.Observable?t:new n.Observable(f.subscribeTo(t));if(null!=t){if(s.isInteropObservable(t))return h.fromObservable(t,e);if(i.isPromise(t))return a.fromPromise(t,e);if(o.isArrayLike(t))return c.fromArray(t,e);if(u.isIterable(t)||"string"==typeof t)return l.fromIterable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},{"../Observable":8,"../util/isArrayLike":179,"../util/isInteropObservable":182,"../util/isIterable":183,"../util/isPromise":187,"../util/subscribeTo":192,"./fromArray":28,"./fromIterable":31,"./fromObservable":32,"./fromPromise":33}],28:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),s=t("../Subscription"),u=t("../util/subscribeToArray");r.fromArray=function(n,i){return i?new o.Observable(function(t){var e=new s.Subscription,r=0;return e.add(i.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||e.add(this.schedule())):t.complete()})),e}):new o.Observable(u.subscribeToArray(n))}},{"../Observable":8,"../Subscription":16,"../util/subscribeToArray":193}],29:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),s=t("../util/isArray"),u=t("../util/isFunction"),c=t("../operators/map");Object.prototype.toString;r.fromEvent=function t(r,n,i,e){return u.isFunction(i)&&(e=i,i=void 0),e?t(r,n,i).pipe(c.map(function(t){return s.isArray(t)?e.apply(void 0,t):e(t)})):new o.Observable(function(e){!function t(e,r,n,i,o){var s,u,c,a;if((a=e)&&"function"==typeof a.addEventListener&&"function"==typeof a.removeEventListener){var l=e;e.addEventListener(r,n,o),s=function(){return l.removeEventListener(r,n,o)}}else if((c=e)&&"function"==typeof c.on&&"function"==typeof c.off){var h=e;e.on(r,n),s=function(){return h.off(r,n)}}else if((u=e)&&"function"==typeof u.addListener&&"function"==typeof u.removeListener){var f=e;e.addListener(r,n),s=function(){return f.removeListener(r,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var p=0,b=e.length;p<b;p++)t(e[p],r,n,i,o)}i.add(s)}(r,n,function(t){1<arguments.length?e.next(Array.prototype.slice.call(arguments)):e.next(t)},e,i)})}},{"../Observable":8,"../operators/map":88,"../util/isArray":178,"../util/isFunction":181}],30:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),s=t("../util/isArray"),u=t("../util/isFunction"),c=t("../operators/map");r.fromEventPattern=function t(n,i,e){return e?t(n,i).pipe(c.map(function(t){return s.isArray(t)?e.apply(void 0,t):e(t)})):new o.Observable(function(r){var t,e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.next(1===t.length?t[0]:t)};try{t=n(e)}catch(t){return void r.error(t)}if(u.isFunction(i))return function(){return i(e,t)}})}},{"../Observable":8,"../operators/map":88,"../util/isArray":178,"../util/isFunction":181}],31:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),o=t("../Subscription"),s=t("../symbol/iterator"),i=t("../util/subscribeToIterable");r.fromIterable=function(e,r){if(!e)throw new Error("Iterable cannot be null");return r?new n.Observable(function(n){var i,t=new o.Subscription;return t.add(function(){i&&"function"==typeof i.return&&i.return()}),t.add(r.schedule(function(){i=e[s.iterator](),t.add(r.schedule(function(){if(!n.closed){var t,e;try{var r=i.next();t=r.value,e=r.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),t}):new n.Observable(i.subscribeToIterable(e))}},{"../Observable":8,"../Subscription":16,"../symbol/iterator":166,"../util/subscribeToIterable":194}],32:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),s=t("../Subscription"),u=t("../symbol/observable"),c=t("../util/subscribeToObservable");r.fromObservable=function(n,i){return i?new o.Observable(function(e){var r=new s.Subscription;return r.add(i.schedule(function(){var t=n[u.observable]();r.add(t.subscribe({next:function(t){r.add(i.schedule(function(){return e.next(t)}))},error:function(t){r.add(i.schedule(function(){return e.error(t)}))},complete:function(){r.add(i.schedule(function(){return e.complete()}))}}))})),r}):new o.Observable(c.subscribeToObservable(n))}},{"../Observable":8,"../Subscription":16,"../symbol/observable":167,"../util/subscribeToObservable":195}],33:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Observable"),o=t("../Subscription"),s=t("../util/subscribeToPromise");r.fromPromise=function(t,n){return n?new i.Observable(function(e){var r=new o.Subscription;return r.add(n.schedule(function(){return t.then(function(t){r.add(n.schedule(function(){e.next(t),r.add(n.schedule(function(){return e.complete()}))}))},function(t){r.add(n.schedule(function(){return e.error(t)}))})})),r}):new i.Observable(s.subscribeToPromise(t))}},{"../Observable":8,"../Subscription":16,"../util/subscribeToPromise":196}],34:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),a=t("../util/identity"),l=t("../util/isScheduler");function h(t){var e=t.subscriber,r=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(r){var n=void 0;try{n=r(t.state)}catch(t){return void e.error(t)}if(!n)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}r.generate=function(t,i,o,e,s){var u,c;if(1==arguments.length){var r=t;c=r.initialState,i=r.condition,o=r.iterate,u=r.resultSelector||a.identity,s=r.scheduler}else void 0===e||l.isScheduler(e)?(c=t,u=a.identity,s=e):(c=t,u=e);return new n.Observable(function(e){var t=c;if(s)return s.schedule(h,0,{subscriber:e,iterate:o,condition:i,resultSelector:u,state:t});for(;;){if(i){var r=void 0;try{r=i(t)}catch(t){return void e.error(t)}if(!r){e.complete();break}}var n=void 0;try{n=u(t)}catch(t){return void e.error(t)}if(e.next(n),e.closed)break;try{t=o(t)}catch(t){return void e.error(t)}}})}},{"../Observable":8,"../util/identity":177,"../util/isScheduler":188}],35:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./defer"),i=t("./empty");r.iif=function(t,e,r){return void 0===e&&(e=i.EMPTY),void 0===r&&(r=i.EMPTY),n.defer(function(){return t()?e:r})}},{"./defer":24,"./empty":25}],36:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),i=t("../scheduler/async"),o=t("../util/isNumeric");function s(t){var e=t.subscriber,r=t.counter,n=t.period;e.next(r),this.schedule({subscriber:e,counter:r+1,period:n},n)}r.interval=function(e,r){return void 0===e&&(e=0),void 0===r&&(r=i.async),(!o.isNumeric(e)||e<0)&&(e=0),r&&"function"==typeof r.schedule||(r=i.async),new n.Observable(function(t){return t.add(r.schedule(s,e,{subscriber:t,counter:0,period:e})),t})}},{"../Observable":8,"../scheduler/async":164,"../util/isNumeric":184}],37:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),s=t("../util/isScheduler"),u=t("../operators/mergeAll"),c=t("./fromArray");r.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return s.isScheduler(i)?(n=t.pop(),1<t.length&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof i&&(r=t.pop()),null===n&&1===t.length&&t[0]instanceof o.Observable?t[0]:u.mergeAll(r)(c.fromArray(t,n))}},{"../Observable":8,"../operators/mergeAll":93,"../util/isScheduler":188,"./fromArray":28}],38:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),i=t("../util/noop");r.NEVER=new n.Observable(i.noop),r.never=function(){return r.NEVER}},{"../Observable":8,"../util/noop":189}],39:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util/isScheduler"),i=t("./fromArray"),o=t("./empty"),s=t("./scalar");r.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];switch(n.isScheduler(r)?t.pop():r=void 0,t.length){case 0:return o.empty(r);case 1:return r?i.fromArray(t,r):s.scalar(t[0]);default:return i.fromArray(t,r)}}},{"../util/isScheduler":188,"./empty":25,"./fromArray":28,"./scalar":44}],40:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),s=t("./from"),u=t("../util/isArray"),c=t("./empty");r.onErrorResumeNext=function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return c.EMPTY;var n=t[0],i=t.slice(1);return 1===t.length&&u.isArray(n)?r.apply(void 0,n):new o.Observable(function(e){var t=function(){return e.add(r.apply(void 0,i).subscribe(e))};return s.from(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})})}},{"../Observable":8,"../util/isArray":178,"./empty":25,"./from":27}],41:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),s=t("../Subscription");function u(t){var e=t.keys,r=t.index,n=t.subscriber,i=t.subscription,o=t.obj;if(!n.closed)if(r<e.length){var s=e[r];n.next([s,o[s]]),i.add(this.schedule({keys:e,index:r+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}r.pairs=function(i,n){return n?new o.Observable(function(t){var e=Object.keys(i),r=new s.Subscription;return r.add(n.schedule(u,0,{keys:e,index:0,subscriber:t,subscription:r,obj:i})),r}):new o.Observable(function(t){for(var e=Object.keys(i),r=0;r<e.length&&!t.closed;r++){var n=e[r];i.hasOwnProperty(n)&&t.next([n,i[n]])}t.complete()})},r.dispatch=u},{"../Observable":8,"../Subscription":16}],42:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../util/isArray"),s=t("./fromArray"),u=t("../OuterSubscriber"),c=t("../util/subscribeToResult");r.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!o.isArray(t[0]))return t[0];t=t[0]}return s.fromArray(t,void 0).lift(new a)};var a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}();r.RaceOperator=a;var l=function(r){function t(t){var e=r.call(this,t)||this;return e.hasFirst=!1,e.observables=[],e.subscriptions=[],e}return i(t,r),t.prototype._next=function(t){this.observables.push(t)},t.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var r=0;r<e&&!this.hasFirst;r++){var n=t[r],i=c.subscribeToResult(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(t,e,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},t}(u.OuterSubscriber);r.RaceSubscriber=l},{"../OuterSubscriber":10,"../util/isArray":178,"../util/subscribeToResult":197,"./fromArray":28}],43:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("../Observable");function u(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;n<=r?i.complete():(i.next(e),i.closed||(t.index=r+1,t.start=e+1,this.schedule(t)))}r.range=function(n,i,o){return void 0===n&&(n=0),void 0===i&&(i=0),new s.Observable(function(t){var e=0,r=n;if(o)return o.schedule(u,0,{index:e,count:i,start:n,subscriber:t});for(;;){if(e++>=i){t.complete();break}if(t.next(r++),t.closed)break}})},r.dispatch=u},{"../Observable":8}],44:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable");r.scalar=function(e){var t=new n.Observable(function(t){t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}},{"../Observable":8}],45:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable");function i(t){var e=t.error;t.subscriber.error(e)}r.throwError=function(e,r){return r?new n.Observable(function(t){return r.schedule(i,0,{error:e,subscriber:t})}):new n.Observable(function(t){return t.error(e)})}},{"../Observable":8}],46:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),s=t("../scheduler/async"),u=t("../util/isNumeric"),c=t("../util/isScheduler");function a(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(-1===r)return n.complete();t.index=e+1,this.schedule(t,r)}}r.timer=function(r,t,n){void 0===r&&(r=0);var i=-1;return u.isNumeric(t)?i=Number(t)<1?1:Number(t):c.isScheduler(t)&&(n=t),c.isScheduler(n)||(n=s.async),new o.Observable(function(t){var e=u.isNumeric(r)?r:+r-n.now();return n.schedule(a,e,{index:0,period:i,subscriber:t})})}},{"../Observable":8,"../scheduler/async":164,"../util/isNumeric":184,"../util/isScheduler":188}],47:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),s=t("./from"),u=t("./empty");r.using=function(i,o){return new n.Observable(function(e){var t,r;try{t=i()}catch(t){return void e.error(t)}try{r=o(t)}catch(t){return void e.error(t)}var n=(r?s.from(r):u.EMPTY).subscribe(e);return function(){n.unsubscribe(),t&&t.unsubscribe()}})}},{"../Observable":8,"./empty":25,"./from":27}],48:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("./fromArray"),s=t("../util/isArray"),u=t("../Subscriber"),c=t("../OuterSubscriber"),a=t("../util/subscribeToResult"),l=t("../../internal/symbol/iterator");r.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return"function"==typeof r&&t.pop(),i.fromArray(t,void 0).lift(new h(r))};var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.resultSelector))},t}();r.ZipOperator=h;var f=function(i){function t(t,e,r){void 0===r&&(r=Object.create(null));var n=i.call(this,t)||this;return n.iterators=[],n.active=0,n.resultSelector="function"==typeof e?e:null,n.values=r,n}return o(t,i),t.prototype._next=function(t){var e=this.iterators;s.isArray(t)?e.push(new b(t)):"function"==typeof t[l.iterator]?e.push(new p(t[l.iterator]())):e.push(new d(this.destination,this,t))},t.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var r=0;r<e;r++){var n=t[r];n.stillUnsubscribed?this.add(n.subscribe(n,r)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,r=this.destination,n=0;n<e;n++){if("function"==typeof(s=t[n]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(n=0;n<e;n++){var s,u=(s=t[n]).next();if(s.hasCompleted()&&(i=!0),u.done)return void r.complete();o.push(u.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()},t.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(u.Subscriber);r.ZipSubscriber=f;var p=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),b=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[l.iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++,r=this.array;return e<this.length?{value:r[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),d=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.parent=e,n.observable=r,n.stillUnsubscribed=!0,n.buffer=[],n.isComplete=!1,n}return o(t,i),t.prototype[l.iterator]=function(){return this},t.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(t,e){return a.subscribeToResult(this,this.observable,this,e)},t}(c.OuterSubscriber)},{"../../internal/symbol/iterator":166,"../OuterSubscriber":10,"../Subscriber":15,"../util/isArray":178,"../util/subscribeToResult":197,"./fromArray":28}],49:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../util/tryCatch"),s=t("../util/errorObject"),u=t("../OuterSubscriber"),c=t("../util/subscribeToResult");r.audit=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector))},t}(),l=function(n){function t(t,e){var r=n.call(this,t)||this;return r.durationSelector=e,r.hasValue=!1,r}return i(t,n),t.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=o.tryCatch(this.durationSelector)(t);if(e===s.errorObject)this.destination.error(s.errorObject.e);else{var r=c.subscribeToResult(this,e);!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}},t.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,r=this.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(t,e,r,n){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(u.OuterSubscriber)},{"../OuterSubscriber":10,"../util/errorObject":175,"../util/subscribeToResult":197,"../util/tryCatch":199}],50:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../scheduler/async"),i=t("./audit"),o=t("../observable/timer");r.auditTime=function(t,e){return void 0===e&&(e=n.async),i.audit(function(){return o.timer(t,e)})}},{"../observable/timer":46,"../scheduler/async":164,"./audit":49}],51:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../OuterSubscriber"),s=t("../util/subscribeToResult");r.buffer=function(e){return function(t){return t.lift(new u(e))}};var u=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.closingNotifier))},t}(),c=function(n){function t(t,e){var r=n.call(this,t)||this;return r.buffer=[],r.add(s.subscribeToResult(r,e)),r}return i(t,n),t.prototype._next=function(t){this.buffer.push(t)},t.prototype.notifyNext=function(t,e,r,n,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},t}(o.OuterSubscriber)},{"../OuterSubscriber":10,"../util/subscribeToResult":197}],52:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber");r.bufferCount=function(e,r){return void 0===r&&(r=null),function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?c:u}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),u=function(n){function t(t,e){var r=n.call(this,t)||this;return r.bufferSize=e,r.buffer=[],r}return o(t,n),t.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;0<t.length&&this.destination.next(t),n.prototype._complete.call(this)},t}(i.Subscriber),c=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.bufferSize=e,n.startBufferEvery=r,n.buffers=[],n.count=0,n}return o(t,i),t.prototype._next=function(t){var e=this.bufferSize,r=this.startBufferEvery,n=this.buffers,i=this.count;this.count++,i%r==0&&n.push([]);for(var o=n.length;o--;){var s=n[o];s.push(t),s.length===e&&(n.splice(o,1),this.destination.next(s))}},t.prototype._complete=function(){for(var t=this.buffers,e=this.destination;0<t.length;){var r=t.shift();0<r.length&&e.next(r)}i.prototype._complete.call(this)},t}(i.Subscriber)},{"../Subscriber":15}],53:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../scheduler/async"),s=t("../Subscriber"),u=t("../util/isScheduler");r.bufferTime=function(e){var t=arguments.length,r=o.async;u.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var n=null;2<=t&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return 3<=t&&(i=arguments[2]),function(t){return t.lift(new c(e,n,i,r))}};var c=function(){function t(t,e,r,n){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=r,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),a=function(){this.buffer=[]},l=function(l){function t(t,e,r,n,i){var o=l.call(this,t)||this;o.bufferTimeSpan=e,o.bufferCreationInterval=r,o.maxBufferSize=n,o.scheduler=i,o.contexts=[];var s=o.openContext();if(o.timespanOnly=null==r||r<0,o.timespanOnly){var u={subscriber:o,context:s,bufferTimeSpan:e};o.add(s.closeAction=i.schedule(h,e,u))}else{var c={subscriber:o,context:s},a={bufferTimeSpan:e,bufferCreationInterval:r,subscriber:o,scheduler:i};o.add(s.closeAction=i.schedule(p,e,c)),o.add(i.schedule(f,r,a))}return o}return i(t,l),t.prototype._next=function(t){for(var e,r=this.contexts,n=r.length,i=0;i<n;i++){var o=r[i],s=o.buffer;s.push(t),s.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},t.prototype._error=function(t){this.contexts.length=0,l.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,e=this.destination;0<t.length;){var r=t.shift();e.next(r.buffer)}l.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var r=this.bufferTimeSpan,n={subscriber:this,context:t,bufferTimeSpan:r};this.add(t.closeAction=this.scheduler.schedule(h,r,n))}},t.prototype.openContext=function(){var t=new a;return this.contexts.push(t),t},t.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;0<=(e?e.indexOf(t):-1)&&e.splice(e.indexOf(t),1)},t}(s.Subscriber);function h(t){var e=t.subscriber,r=t.context;r&&e.closeContext(r),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function f(t){var e=t.bufferCreationInterval,r=t.bufferTimeSpan,n=t.subscriber,i=t.scheduler,o=n.openContext();n.closed||(n.add(o.closeAction=i.schedule(p,r,{subscriber:n,context:o})),this.schedule(t,e))}function p(t){var e=t.subscriber,r=t.context;e.closeContext(r)}},{"../Subscriber":15,"../scheduler/async":164,"../util/isScheduler":188}],54:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("../Subscription"),u=t("../util/subscribeToResult"),i=t("../OuterSubscriber");r.bufferToggle=function(e,r){return function(t){return t.lift(new c(e,r))}};var c=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.openings,this.closingSelector))},t}(),a=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.openings=e,n.closingSelector=r,n.contexts=[],n.add(u.subscribeToResult(n,e)),n}return o(t,i),t.prototype._next=function(t){for(var e=this.contexts,r=e.length,n=0;n<r;n++)e[n].buffer.push(t)},t.prototype._error=function(t){for(var e=this.contexts;0<e.length;){var r=e.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,i.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;0<t.length;){var e=t.shift();this.destination.next(e.buffer),e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,i.prototype._complete.call(this)},t.prototype.notifyNext=function(t,e,r,n,i){t?this.closeBuffer(t):this.openBuffer(e)},t.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},t.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},t.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var r=t.buffer,n=t.subscription;this.destination.next(r),e.splice(e.indexOf(t),1),this.remove(n),n.unsubscribe()}},t.prototype.trySubscribe=function(t){var e=this.contexts,r=new s.Subscription,n={buffer:[],subscription:r};e.push(n);var i=u.subscribeToResult(this,t,n);!i||i.closed?this.closeBuffer(n):(i.context=n,this.add(i),r.add(i))},t}(i.OuterSubscriber)},{"../OuterSubscriber":10,"../Subscription":16,"../util/subscribeToResult":197}],55:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscription"),s=t("../util/tryCatch"),u=t("../util/errorObject"),c=t("../OuterSubscriber"),a=t("../util/subscribeToResult");r.bufferWhen=function(e){return function(t){return t.lift(new l(e))}};var l=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.closingSelector))},t}(),h=function(n){function t(t,e){var r=n.call(this,t)||this;return r.closingSelector=e,r.subscribing=!1,r.openBuffer(),r}return i(t,n),t.prototype._next=function(t){this.buffer.push(t)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),n.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(t,e,r,n,i){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var r=s.tryCatch(this.closingSelector)();r===u.errorObject?this.error(u.errorObject.e):(t=new o.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(a.subscribeToResult(this,r)),this.subscribing=!1)},t}(c.OuterSubscriber)},{"../OuterSubscriber":10,"../Subscription":16,"../util/errorObject":175,"../util/subscribeToResult":197,"../util/tryCatch":199}],56:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../OuterSubscriber"),s=t("../InnerSubscriber"),u=t("../util/subscribeToResult");r.catchError=function(n){return function(t){var e=new c(n),r=t.lift(e);return e.caught=r}};var c=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.selector,this.caught))},t}(),a=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.selector=e,n.caught=r,n}return o(t,i),t.prototype.error=function(t){if(!this.isStopped){var e=void 0;try{e=this.selector(t,this.caught)}catch(t){return void i.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var r=new s.InnerSubscriber(this,void 0,void 0);this.add(r),u.subscribeToResult(this,e,void 0,void 0,r)}},t}(i.OuterSubscriber)},{"../InnerSubscriber":6,"../OuterSubscriber":10,"../util/subscribeToResult":197}],57:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/combineLatest");r.combineAll=function(e){return function(t){return t.lift(new n.CombineLatestOperator(e))}}},{"../observable/combineLatest":22}],58:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util/isArray"),i=t("../observable/combineLatest"),o=t("../observable/from");r.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&n.isArray(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(o.from([t].concat(e)),new i.CombineLatestOperator(r))}}},{"../observable/combineLatest":22,"../observable/from":27,"../util/isArray":178}],59:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/concat");r.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(n.concat.apply(void 0,[t].concat(e)))}}},{"../observable/concat":23}],60:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./mergeAll");r.concatAll=function(){return n.mergeAll(1)}},{"./mergeAll":93}],61:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./mergeMap");r.concatMap=function(t,e){return n.mergeMap(t,e,1)}},{"./mergeMap":94}],62:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./concatMap");r.concatMapTo=function(t,e){return n.concatMap(function(){return t},e)}},{"./concatMap":61}],63:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber");r.count=function(e){return function(t){return t.lift(new s(e,t))}};var s=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.source))},t}(),u=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.predicate=e,n.source=r,n.count=0,n.index=0,n}return o(t,i),t.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},t.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(i.Subscriber)},{"../Subscriber":15}],64:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../OuterSubscriber"),s=t("../util/subscribeToResult");r.debounce=function(e){return function(t){return t.lift(new u(e))}};var u=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.durationSelector))},t}(),c=function(n){function t(t,e){var r=n.call(this,t)||this;return r.durationSelector=e,r.hasValue=!1,r.durationSubscription=null,r}return i(t,n),t.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(t,e){var r=this.durationSubscription;this.value=t,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),(r=s.subscribeToResult(this,e))&&!r.closed&&this.add(this.durationSubscription=r)},t.prototype.notifyNext=function(t,e,r,n,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,e=this.durationSubscription;e&&(this.durationSubscription=null,e.unsubscribe(),this.remove(e)),this.value=null,this.hasValue=!1,n.prototype._next.call(this,t)}},t}(o.OuterSubscriber)},{"../OuterSubscriber":10,"../util/subscribeToResult":197}],65:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../scheduler/async");r.debounceTime=function(e,r){return void 0===r&&(r=s.async),function(t){return t.lift(new u(e,r))}};var u=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.dueTime,this.scheduler))},t}(),c=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.dueTime=e,n.scheduler=r,n.debouncedSubscription=null,n.lastValue=null,n.hasValue=!1,n}return o(t,i),t.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(a,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},t.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},t}(i.Subscriber);function a(t){t.debouncedNext()}},{"../Subscriber":15,"../scheduler/async":164}],66:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.defaultIfEmpty=function(e){return void 0===e&&(e=null),function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.defaultValue))},t}(),u=function(n){function t(t,e){var r=n.call(this,t)||this;return r.defaultValue=e,r.isEmpty=!0,r}return i(t,n),t.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(o.Subscriber)},{"../Subscriber":15}],67:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../scheduler/async"),s=t("../util/isDate"),u=t("../Subscriber"),c=t("../Notification");r.delay=function(t,e){void 0===e&&(e=i.async);var r=s.isDate(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new a(r,e))}};var a=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.delay,this.scheduler))},t}(),l=function(i){function e(t,e,r){var n=i.call(this,t)||this;return n.delay=e,n.scheduler=r,n.queue=[],n.active=!1,n.errored=!1,n}return o(e,i),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,i=t.destination;0<r.length&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(0<r.length){var o=Math.max(0,r[0].time-n.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,r=new h(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(c.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(c.Notification.createComplete())},e}(u.Subscriber),h=function(t,e){this.time=t,this.notification=e}},{"../Notification":7,"../Subscriber":15,"../scheduler/async":164,"../util/isDate":180}],68:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber"),s=t("../Observable"),u=t("../OuterSubscriber"),c=t("../util/subscribeToResult");r.delayWhen=function(e,r){return r?function(t){return new h(t,r).lift(new a(e))}:function(t){return t.lift(new a(e))}};var a=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.delayDurationSelector))},t}(),l=function(n){function t(t,e){var r=n.call(this,t)||this;return r.delayDurationSelector=e,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return i(t,n),t.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(t,e){this._error(t)},t.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},t.prototype._next=function(t){var e=this.index++;try{var r=this.delayDurationSelector(t,e);r&&this.tryDelay(r,t)}catch(t){this.destination.error(t)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},t.prototype.tryDelay=function(t,e){var r=c.subscribeToResult(this,t,e);r&&!r.closed&&(this.add(r),this.delayNotifierSubscriptions.push(r))},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(u.OuterSubscriber),h=function(n){function t(t,e){var r=n.call(this)||this;return r.source=t,r.subscriptionDelay=e,r}return i(t,n),t.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new f(t,this.source))},t}(s.Observable),f=function(n){function t(t,e){var r=n.call(this)||this;return r.parent=t,r.source=e,r.sourceSubscribed=!1,r}return i(t,n),t.prototype._next=function(t){this.subscribeToSource()},t.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(o.Subscriber)},{"../Observable":8,"../OuterSubscriber":10,"../Subscriber":15,"../util/subscribeToResult":197}],69:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.dematerialize=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype._next=function(t){t.observe(this.destination)},t}(o.Subscriber)},{"../Subscriber":15}],70:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../OuterSubscriber"),s=t("../util/subscribeToResult");r.distinct=function(e,r){return function(t){return t.lift(new u(e,r))}};var u=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.keySelector,this.flushes))},t}(),c=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.keySelector=e,n.values=new Set,r&&n.add(s.subscribeToResult(n,r)),n}return o(t,i),t.prototype.notifyNext=function(t,e,r,n,i){this.values.clear()},t.prototype.notifyError=function(t,e){this._error(t)},t.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},t.prototype._useKeySelector=function(t){var e,r=this.destination;try{e=this.keySelector(t)}catch(t){return void r.error(t)}this._finalizeNext(e,t)},t.prototype._finalizeNext=function(t,e){var r=this.values;r.has(t)||(r.add(t),this.destination.next(e))},t}(i.OuterSubscriber);r.DistinctSubscriber=c},{"../OuterSubscriber":10,"../util/subscribeToResult":197}],71:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../util/tryCatch"),u=t("../util/errorObject");r.distinctUntilChanged=function(e,r){return function(t){return t.lift(new c(e,r))}};var c=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.compare,this.keySelector))},t}(),a=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.keySelector=r,n.hasKey=!1,"function"==typeof e&&(n.compare=e),n}return o(t,i),t.prototype.compare=function(t,e){return t===e},t.prototype._next=function(t){var e=t;if(this.keySelector&&(e=s.tryCatch(this.keySelector)(t))===u.errorObject)return this.destination.error(u.errorObject.e);var r=!1;if(this.hasKey){if((r=s.tryCatch(this.compare)(this.key,e))===u.errorObject)return this.destination.error(u.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=e,this.destination.next(t))},t}(i.Subscriber)},{"../Subscriber":15,"../util/errorObject":175,"../util/tryCatch":199}],72:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("./distinctUntilChanged");r.distinctUntilKeyChanged=function(r,n){return i.distinctUntilChanged(function(t,e){return n?n(t[r],e[r]):t[r]===e[r]})}},{"./distinctUntilChanged":71}],73:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../util/ArgumentOutOfRangeError"),o=t("./filter"),s=t("./throwIfEmpty"),u=t("./defaultIfEmpty"),c=t("./take");r.elementAt=function(r,e){if(r<0)throw new i.ArgumentOutOfRangeError;var n=2<=arguments.length;return function(t){return t.pipe(o.filter(function(t,e){return e===r}),c.take(1),n?u.defaultIfEmpty(e):s.throwIfEmpty(function(){return new i.ArgumentOutOfRangeError}))}}},{"../util/ArgumentOutOfRangeError":169,"./defaultIfEmpty":66,"./filter":79,"./take":131,"./throwIfEmpty":138}],74:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../observable/fromArray"),o=t("../observable/scalar"),s=t("../observable/empty"),u=t("../observable/concat"),c=t("../util/isScheduler");r.endWith=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){var e=n[n.length-1];c.isScheduler(e)?n.pop():e=null;var r=n.length;return 1!==r||e?0<r?u.concat(t,i.fromArray(n,e)):u.concat(t,s.empty(e)):u.concat(t,o.scalar(n[0]))}}},{"../observable/concat":23,"../observable/empty":25,"../observable/fromArray":28,"../observable/scalar":44,"../util/isScheduler":188}],75:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.every=function(e,r){return function(t){return t.lift(new s(e,r,t))}};var s=function(){function t(t,e,r){this.predicate=t,this.thisArg=e,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.thisArg,this.source))},t}(),u=function(o){function t(t,e,r,n){var i=o.call(this,t)||this;return i.predicate=e,i.thisArg=r,i.source=n,i.index=0,i.thisArg=r||i,i}return i(t,o),t.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},t.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(o.Subscriber)},{"../Subscriber":15}],76:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../OuterSubscriber"),s=t("../util/subscribeToResult");r.exhaust=function(){return function(t){return t.lift(new u)}};var u=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new c(t))},t}(),c=function(r){function t(t){var e=r.call(this,t)||this;return e.hasCompleted=!1,e.hasSubscription=!1,e}return i(t,r),t.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(s.subscribeToResult(this,t)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber)},{"../OuterSubscriber":10,"../util/subscribeToResult":197}],77:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../OuterSubscriber"),s=t("../InnerSubscriber"),u=t("../util/subscribeToResult"),c=t("./map"),a=t("../observable/from");r.exhaustMap=function e(i,o){return o?function(t){return t.pipe(e(function(r,n){return a.from(i(r,n)).pipe(c.map(function(t,e){return o(r,t,n,e)}))}))}:function(t){return t.lift(new l(i))}};var l=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project))},t}(),h=function(n){function t(t,e){var r=n.call(this,t)||this;return r.project=e,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return i(t,n),t.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},t.prototype.tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.hasSubscription=!0,this._innerSub(e,t,r)},t.prototype._innerSub=function(t,e,r){var n=new s.InnerSubscriber(this,void 0,void 0);this.add(n),u.subscribeToResult(this,t,e,r,n)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},t.prototype.notifyError=function(t){this.destination.error(t)},t.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber)},{"../InnerSubscriber":6,"../OuterSubscriber":10,"../observable/from":27,"../util/subscribeToResult":197,"./map":88}],78:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var u=t("../util/tryCatch"),c=t("../util/errorObject"),o=t("../OuterSubscriber"),a=t("../util/subscribeToResult");r.expand=function(e,r,n){return void 0===r&&(r=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),r=(r||0)<1?Number.POSITIVE_INFINITY:r,function(t){return t.lift(new s(e,r,n))}};var s=function(){function t(t,e,r){this.project=t,this.concurrent=e,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.concurrent,this.scheduler))},t}();r.ExpandOperator=s;var l=function(o){function s(t,e,r,n){var i=o.call(this,t)||this;return i.project=e,i.concurrent=r,i.scheduler=n,i.index=0,i.active=0,i.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(i.buffer=[]),i}return i(s,o),s.dispatch=function(t){var e=t.subscriber,r=t.result,n=t.value,i=t.index;e.subscribeToProjection(r,n,i)},s.prototype._next=function(t){var e=this.destination;if(e.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){e.next(t);var n=u.tryCatch(this.project)(t,r);if(n===c.errorObject)e.error(c.errorObject.e);else if(this.scheduler){var i={subscriber:this,result:n,value:t,index:r};this.add(this.scheduler.schedule(s.dispatch,0,i))}else this.subscribeToProjection(n,t,r)}else this.buffer.push(t)}},s.prototype.subscribeToProjection=function(t,e,r){this.active++,this.add(a.subscribeToResult(this,t,e,r))},s.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},s.prototype.notifyNext=function(t,e,r,n,i){this._next(e)},s.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&0<e.length&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},s}(o.OuterSubscriber);r.ExpandSubscriber=l},{"../OuterSubscriber":10,"../util/errorObject":175,"../util/subscribeToResult":197,"../util/tryCatch":199}],79:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber");r.filter=function(e,r){return function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.thisArg))},t}(),u=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.predicate=e,n.thisArg=r,n.count=0,n}return o(t,i),t.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},t}(i.Subscriber)},{"../Subscriber":15}],80:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber"),s=t("../Subscription");r.finalize=function(e){return function(t){return t.lift(new u(e))}};var u=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.callback))},t}(),c=function(n){function t(t,e){var r=n.call(this,t)||this;return r.add(new s.Subscription(e)),r}return i(t,n),t}(o.Subscriber)},{"../Subscriber":15,"../Subscription":16}],81:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.find=function(e,r){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(t){return t.lift(new s(e,t,!1,r))}};var s=function(){function t(t,e,r,n){this.predicate=t,this.source=e,this.yieldIndex=r,this.thisArg=n}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}();r.FindValueOperator=s;var u=function(s){function t(t,e,r,n,i){var o=s.call(this,t)||this;return o.predicate=e,o.source=r,o.yieldIndex=n,o.thisArg=i,o.index=0,o}return i(t,s),t.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},t.prototype._next=function(t){var e=this.predicate,r=this.thisArg,n=this.index++;try{e.call(r||this,t,n,this.source)&&this.notifyComplete(this.yieldIndex?n:t)}catch(t){this.destination.error(t)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(o.Subscriber);r.FindValueSubscriber=u},{"../Subscriber":15}],82:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../operators/find");r.findIndex=function(e,r){return function(t){return t.lift(new n.FindValueOperator(e,t,!0,r))}}},{"../operators/find":81}],83:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../util/EmptyError"),o=t("./filter"),s=t("./take"),u=t("./defaultIfEmpty"),c=t("./throwIfEmpty"),a=t("../util/identity");r.first=function(n,t){var e=2<=arguments.length;return function(r){return r.pipe(n?o.filter(function(t,e){return n(t,e,r)}):a.identity,s.take(1),e?u.defaultIfEmpty(t):c.throwIfEmpty(function(){return new i.EmptyError}))}}},{"../util/EmptyError":170,"../util/identity":177,"./defaultIfEmpty":66,"./filter":79,"./take":131,"./throwIfEmpty":138}],84:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../Subscription"),u=t("../Observable"),c=t("../Subject");r.groupBy=function(e,r,n,i){return function(t){return t.lift(new a(e,r,n,i))}};var a=function(){function t(t,e,r,n){this.keySelector=t,this.elementSelector=e,this.durationSelector=r,this.subjectSelector=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),l=function(s){function t(t,e,r,n,i){var o=s.call(this,t)||this;return o.keySelector=e,o.elementSelector=r,o.durationSelector=n,o.subjectSelector=i,o.groups=null,o.attemptedToUnsubscribe=!1,o.count=0,o}return o(t,s),t.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},t.prototype._group=function(t,e){var r=this.groups;r||(r=this.groups=new Map);var n,i=r.get(e);if(this.elementSelector)try{n=this.elementSelector(t)}catch(t){this.error(t)}else n=t;if(!i){i=this.subjectSelector?this.subjectSelector():new c.Subject,r.set(e,i);var o=new f(e,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new f(e,i))}catch(t){return void this.error(t)}this.add(s.subscribe(new h(e,i,this)))}}i.closed||i.next(n)},t.prototype._error=function(r){var t=this.groups;t&&(t.forEach(function(t,e){t.error(r)}),t.clear()),this.destination.error(r)},t.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},t.prototype.removeGroup=function(t){this.groups.delete(t)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&s.prototype.unsubscribe.call(this))},t}(i.Subscriber),h=function(i){function t(t,e,r){var n=i.call(this,e)||this;return n.key=t,n.group=e,n.parent=r,n}return o(t,i),t.prototype._next=function(t){this.complete()},t.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},t}(i.Subscriber),f=function(i){function t(t,e,r){var n=i.call(this)||this;return n.key=t,n.groupSubject=e,n.refCountSubscription=r,n}return o(t,i),t.prototype._subscribe=function(t){var e=new s.Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&e.add(new p(r)),e.add(n.subscribe(t)),e},t}(u.Observable);r.GroupedObservable=f;var p=function(r){function t(t){var e=r.call(this)||this;return(e.parent=t).count++,e}return o(t,r),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(r.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(s.Subscription)},{"../Observable":8,"../Subject":13,"../Subscriber":15,"../Subscription":16}],85:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.ignoreElements=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._next=function(t){},e}(o.Subscriber)},{"../Subscriber":15}],86:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.isEmpty=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},t.prototype._next=function(t){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(o.Subscriber)},{"../Subscriber":15}],87:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../util/EmptyError"),o=t("./filter"),s=t("./takeLast"),u=t("./throwIfEmpty"),c=t("./defaultIfEmpty"),a=t("../util/identity");r.last=function(n,t){var e=2<=arguments.length;return function(r){return r.pipe(n?o.filter(function(t,e){return n(t,e,r)}):a.identity,s.takeLast(1),e?c.defaultIfEmpty(t):u.throwIfEmpty(function(){return new i.EmptyError}))}}},{"../util/EmptyError":170,"../util/identity":177,"./defaultIfEmpty":66,"./filter":79,"./takeLast":132,"./throwIfEmpty":138}],88:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber");r.map=function(e,r){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.thisArg))},t}();r.MapOperator=s;var u=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.project=e,n.count=0,n.thisArg=r||n,n}return o(t,i),t.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(i.Subscriber)},{"../Subscriber":15}],89:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.mapTo=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.value))},t}(),u=function(n){function t(t,e){var r=n.call(this,t)||this;return r.value=e,r}return i(t,n),t.prototype._next=function(t){this.destination.next(this.value)},t}(o.Subscriber)},{"../Subscriber":15}],90:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber"),s=t("../Notification");r.materialize=function(){return function(t){return t.lift(new u)}};var u=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new c(t))},t}(),c=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype._next=function(t){this.destination.next(s.Notification.createNext(t))},t.prototype._error=function(t){var e=this.destination;e.next(s.Notification.createError(t)),e.complete()},t.prototype._complete=function(){var t=this.destination;t.next(s.Notification.createComplete()),t.complete()},t}(o.Subscriber)},{"../Notification":7,"../Subscriber":15}],91:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./reduce");r.max=function(r){var t="function"==typeof r?function(t,e){return 0<r(t,e)?t:e}:function(t,e){return e<t?t:e};return n.reduce(t)}},{"./reduce":109}],92:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/merge");r.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(n.merge.apply(void 0,[t].concat(e)))}}},{"../observable/merge":37}],93:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./mergeMap"),i=t("../util/identity");r.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),n.mergeMap(i.identity,t)}},{"../util/identity":177,"./mergeMap":94}],94:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("../util/subscribeToResult"),i=t("../OuterSubscriber"),u=t("../InnerSubscriber"),c=t("./map"),a=t("../observable/from");r.mergeMap=function e(i,o,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof o?function(t){return t.pipe(e(function(r,n){return a.from(i(r,n)).pipe(c.map(function(t,e){return o(r,t,n,e)}))},r))}:("number"==typeof o&&(r=o),function(t){return t.lift(new l(i,r))})};var l=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project,this.concurrent))},t}();r.MergeMapOperator=l;var h=function(i){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var n=i.call(this,t)||this;return n.project=e,n.concurrent=r,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return o(t,i),t.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},t.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},t.prototype._innerSub=function(t,e,r){var n=new u.InnerSubscriber(this,void 0,void 0);this.add(n),s.subscribeToResult(this,t,e,r,n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},t.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);r.MergeMapSubscriber=h},{"../InnerSubscriber":6,"../OuterSubscriber":10,"../observable/from":27,"../util/subscribeToResult":197,"./map":88}],95:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./mergeMap");r.mergeMapTo=function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof e?n.mergeMap(function(){return t},e,r):("number"==typeof e&&(r=e),n.mergeMap(function(){return t},r))}},{"./mergeMap":94}],96:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("../util/tryCatch"),u=t("../util/errorObject"),c=t("../util/subscribeToResult"),o=t("../OuterSubscriber"),a=t("../InnerSubscriber");r.mergeScan=function(e,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(t){return t.lift(new l(e,r,n))}};var l=function(){function t(t,e,r){this.accumulator=t,this.seed=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.accumulator,this.seed,this.concurrent))},t}();r.MergeScanOperator=l;var h=function(o){function t(t,e,r,n){var i=o.call(this,t)||this;return i.accumulator=e,i.acc=r,i.concurrent=n,i.hasValue=!1,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(t,o),t.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,r=s.tryCatch(this.accumulator)(this.acc,t),n=this.destination;r===u.errorObject?n.error(u.errorObject.e):(this.active++,this._innerSub(r,t,e))}else this.buffer.push(t)},t.prototype._innerSub=function(t,e,r){var n=new a.InnerSubscriber(this,void 0,void 0);this.add(n),c.subscribeToResult(this,t,e,r,n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(t,e,r,n,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},t.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(o.OuterSubscriber);r.MergeScanSubscriber=h},{"../InnerSubscriber":6,"../OuterSubscriber":10,"../util/errorObject":175,"../util/subscribeToResult":197,"../util/tryCatch":199}],97:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./reduce");r.min=function(r){var t="function"==typeof r?function(t,e){return r(t,e)<0?t:e}:function(t,e){return t<e?t:e};return n.reduce(t)}},{"./reduce":109}],98:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../observable/ConnectableObservable");r.multicast=function(n,i){return function(t){var e;if(e="function"==typeof n?n:function(){return n},"function"==typeof i)return t.lift(new s(e,i));var r=Object.create(t,o.connectableObservableDescriptor);return r.source=t,r.subjectFactory=e,r}};var s=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(t);return i.add(e.subscribe(n)),i},t}();r.MulticastOperator=s},{"../observable/ConnectableObservable":18}],99:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../Notification");r.observeOn=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new u(e,r))}};var u=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.scheduler,this.delay))},t}();r.ObserveOnOperator=u;var c=function(i){function e(t,e,r){void 0===r&&(r=0);var n=i.call(this,t)||this;return n.scheduler=e,n.delay=r,n}return o(e,i),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new a(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(s.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(s.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(s.Notification.createComplete())},e}(i.Subscriber);r.ObserveOnSubscriber=c;var a=function(t,e){this.notification=t,this.destination=e};r.ObserveOnMessage=a},{"../Notification":7,"../Subscriber":15}],100:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../observable/from"),s=t("../util/isArray"),u=t("../OuterSubscriber"),c=t("../InnerSubscriber"),a=t("../util/subscribeToResult");r.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&s.isArray(e[0])&&(e=e[0]),function(t){return t.lift(new l(e))}},r.onErrorResumeNextStatic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r;return 1===t.length&&s.isArray(t[0])&&(t=t[0]),r=t.shift(),o.from(r,null).lift(new l(t))};var l=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.nextSources))},t}(),h=function(n){function t(t,e){var r=n.call(this,t)||this;return r.destination=t,r.nextSources=e,r}return i(t,n),t.prototype.notifyError=function(t,e){this.subscribeToNextSource()},t.prototype.notifyComplete=function(t){this.subscribeToNextSource()},t.prototype._error=function(t){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var e=new c.InnerSubscriber(this,void 0,void 0);this.add(e),a.subscribeToResult(this,t,void 0,void 0,e)}else this.destination.complete()},t}(u.OuterSubscriber)},{"../InnerSubscriber":6,"../OuterSubscriber":10,"../observable/from":27,"../util/isArray":178,"../util/subscribeToResult":197}],101:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.pairwise=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(r){function t(t){var e=r.call(this,t)||this;return e.hasPrev=!1,e}return i(t,r),t.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},t}(o.Subscriber)},{"../Subscriber":15}],102:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util/not"),i=t("./filter");r.partition=function(e,r){return function(t){return[i.filter(e,r)(t),i.filter(n.not(e,r))(t)]}}},{"../util/not":190,"./filter":79}],103:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./map");r.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(t){return n.map((i=e,o=r,function(t){for(var e=t,r=0;r<o;r++){var n=e[i[r]];if(void 0===n)return;e=n}return e}))(t);var i,o}}},{"./map":88}],104:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Subject"),i=t("./multicast");r.publish=function(t){return t?i.multicast(function(){return new n.Subject},t):i.multicast(new n.Subject)}},{"../Subject":13,"./multicast":98}],105:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../BehaviorSubject"),i=t("./multicast");r.publishBehavior=function(e){return function(t){return i.multicast(new n.BehaviorSubject(e))(t)}}},{"../BehaviorSubject":5,"./multicast":98}],106:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../AsyncSubject"),i=t("./multicast");r.publishLast=function(){return function(t){return i.multicast(new n.AsyncSubject)(t)}}},{"../AsyncSubject":4,"./multicast":98}],107:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("../ReplaySubject"),u=t("./multicast");r.publishReplay=function(t,e,r,n){r&&"function"!=typeof r&&(n=r);var i="function"==typeof r?r:void 0,o=new s.ReplaySubject(t,e,n);return function(t){return u.multicast(function(){return o},i)(t)}}},{"../ReplaySubject":11,"./multicast":98}],108:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util/isArray"),i=t("../observable/race");r.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return 1===e.length&&n.isArray(e[0])&&(e=e[0]),t.lift.call(i.race.apply(void 0,[t].concat(e)))}}},{"../observable/race":42,"../util/isArray":178}],109:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("./scan"),o=t("./takeLast"),s=t("./defaultIfEmpty"),u=t("../util/pipe");r.reduce=function(n,e){return 2<=arguments.length?function(t){return u.pipe(i.scan(n,e),o.takeLast(1),s.defaultIfEmpty(e))(t)}:function(t){return u.pipe(i.scan(function(t,e,r){return n(t,e,r+1)}),o.takeLast(1))(t)}}},{"../util/pipe":191,"./defaultIfEmpty":66,"./scan":117,"./takeLast":132}],110:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.refCount=function(){return function(t){return t.lift(new s(t))}};var s=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new u(t,r),i=e.subscribe(n);return n.closed||(n.connection=r.connect()),i},t}(),u=function(n){function t(t,e){var r=n.call(this,t)||this;return r.connectable=e,r}return i(t,n),t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,1<e)this.connection=null;else{var r=this.connection,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(o.Subscriber)},{"../Subscriber":15}],111:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../observable/empty");r.repeat=function(e){return void 0===e&&(e=-1),function(t){return 0===e?s.empty():e<0?t.lift(new u(-1,t)):t.lift(new u(e-1,t))}};var u=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.count,this.source))},t}(),c=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.count=e,n.source=r,n}return o(t,i),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,e=this.count;if(0===e)return i.prototype.complete.call(this);-1<e&&(this.count=e-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(i.Subscriber)},{"../Subscriber":15,"../observable/empty":25}],112:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("../Subject"),u=t("../util/tryCatch"),c=t("../util/errorObject"),i=t("../OuterSubscriber"),a=t("../util/subscribeToResult");r.repeatWhen=function(e){return function(t){return t.lift(new l(e))}};var l=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,e))},t}(),h=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.notifier=e,n.source=r,n.sourceIsBeingSubscribedTo=!0,n}return o(t,i),t.prototype.notifyNext=function(t,e,r,n,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return i.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return i.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,i.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},t.prototype.subscribeToRetries=function(){this.notifications=new s.Subject;var t=u.tryCatch(this.notifier)(this.notifications);if(t===c.errorObject)return i.prototype.complete.call(this);this.retries=t,this.retriesSubscription=a.subscribeToResult(this,t)},t}(i.OuterSubscriber)},{"../OuterSubscriber":10,"../Subject":13,"../util/errorObject":175,"../util/subscribeToResult":197,"../util/tryCatch":199}],113:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber");r.retry=function(e){return void 0===e&&(e=-1),function(t){return t.lift(new s(e,t))}};var s=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.count,this.source))},t}(),u=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.count=e,n.source=r,n}return o(t,i),t.prototype.error=function(t){if(!this.isStopped){var e=this.source,r=this.count;if(0===r)return i.prototype.error.call(this,t);-1<r&&(this.count=r-1),e.subscribe(this._unsubscribeAndRecycle())}},t}(i.Subscriber)},{"../Subscriber":15}],114:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("../Subject"),u=t("../util/tryCatch"),c=t("../util/errorObject"),i=t("../OuterSubscriber"),a=t("../util/subscribeToResult");r.retryWhen=function(e){return function(t){return t.lift(new l(e,t))}};var l=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,this.source))},t}(),h=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.notifier=e,n.source=r,n}return o(t,i),t.prototype.error=function(t){if(!this.isStopped){var e=this.errors,r=this.retries,n=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(e=new s.Subject,(r=u.tryCatch(this.notifier)(e))===c.errorObject)return i.prototype.error.call(this,c.errorObject.e);n=a.subscribeToResult(this,r)}this._unsubscribeAndRecycle(),this.errors=e,this.retries=r,this.retriesSubscription=n,e.next(t)}},t.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(t,e,r,n,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},t}(i.OuterSubscriber)},{"../OuterSubscriber":10,"../Subject":13,"../util/errorObject":175,"../util/subscribeToResult":197,"../util/tryCatch":199}],115:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../OuterSubscriber"),s=t("../util/subscribeToResult");r.sample=function(e){return function(t){return t.lift(new u(e))}};var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var r=new c(t),n=e.subscribe(r);return n.add(s.subscribeToResult(r,this.notifier)),n},t}(),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasValue=!1,t}return i(t,e),t.prototype._next=function(t){this.value=t,this.hasValue=!0},t.prototype.notifyNext=function(t,e,r,n,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(o.OuterSubscriber)},{"../OuterSubscriber":10,"../util/subscribeToResult":197}],116:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../scheduler/async");r.sampleTime=function(e,r){return void 0===r&&(r=s.async),function(t){return t.lift(new u(e,r))}};var u=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.period,this.scheduler))},t}(),c=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.period=e,n.scheduler=r,n.hasValue=!1,n.add(r.schedule(a,e,{subscriber:n,period:e})),n}return o(t,i),t.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(i.Subscriber);function a(t){var e=t.subscriber,r=t.period;e.notifyNext(),this.schedule(t,r)}},{"../Subscriber":15,"../scheduler/async":164}],117:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.scan=function(e,r){var n=!1;return 2<=arguments.length&&(n=!0),function(t){return t.lift(new s(e,r,n))}};var s=function(){function t(t,e,r){void 0===r&&(r=!1),this.accumulator=t,this.seed=e,this.hasSeed=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.accumulator,this.seed,this.hasSeed))},t}(),u=function(o){function t(t,e,r,n){var i=o.call(this,t)||this;return i.accumulator=e,i._seed=r,i.hasSeed=n,i.index=0,i}return i(t,o),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),t.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},t.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.accumulator(this.seed,t,r)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},t}(o.Subscriber)},{"../Subscriber":15}],118:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../util/tryCatch"),u=t("../util/errorObject");r.sequenceEqual=function(e,r){return function(t){return t.lift(new c(e,r))}};var c=function(){function t(t,e){this.compareTo=t,this.comparor=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.compareTo,this.comparor))},t}();r.SequenceEqualOperator=c;var a=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.compareTo=e,n.comparor=r,n._a=[],n._b=[],n._oneComplete=!1,n.add(e.subscribe(new l(t,n))),n}return o(t,i),t.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t.prototype.checkValues=function(){for(var t=this._a,e=this._b,r=this.comparor;0<t.length&&0<e.length;){var n=t.shift(),i=e.shift(),o=!1;r?(o=s.tryCatch(r)(n,i))===u.errorObject&&this.destination.error(u.errorObject.e):o=n===i,o||this.emit(!1)}},t.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},t.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},t}(i.Subscriber);r.SequenceEqualSubscriber=a;var l=function(n){function t(t,e){var r=n.call(this,t)||this;return r.parent=e,r}return o(t,n),t.prototype._next=function(t){this.parent.nextB(t)},t.prototype._error=function(t){this.parent.error(t)},t.prototype._complete=function(){this.parent._complete()},t}(i.Subscriber)},{"../Subscriber":15,"../util/errorObject":175,"../util/tryCatch":199}],119:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./multicast"),i=t("./refCount"),o=t("../Subject");function s(){return new o.Subject}r.share=function(){return function(t){return i.refCount()(n.multicast(s)(t))}}},{"../Subject":13,"./multicast":98,"./refCount":110}],120:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var f=t("../ReplaySubject");r.shareReplay=function(e,l,h){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===l&&(l=Number.MAX_VALUE),function(t){return t.lift((r=e,n=l,i=h,u=0,a=c=!1,function(t){u++,o&&!c||(c=!1,o=new f.ReplaySubject(r,n,i),s=t.subscribe({next:function(t){o.next(t)},error:function(t){c=!0,o.error(t)},complete:function(){a=!0,o.complete()}}));var e=o.subscribe(this);return function(){u--,e.unsubscribe(),s&&0===u&&a&&s.unsubscribe()}}));var r,n,i,o,s,u,c,a}}},{"../ReplaySubject":11}],121:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../util/EmptyError");r.single=function(e){return function(t){return t.lift(new u(e,t))}};var u=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.predicate,this.source))},t}(),c=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.predicate=e,n.source=r,n.seenValue=!1,n.index=0,n}return o(t,i),t.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},t.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},t.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},t.prototype._complete=function(){var t=this.destination;0<this.index?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new s.EmptyError)},t}(i.Subscriber)},{"../Subscriber":15,"../util/EmptyError":170}],122:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.skip=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.total))},t}(),u=function(n){function t(t,e){var r=n.call(this,t)||this;return r.total=e,r.count=0,r}return i(t,n),t.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},t}(o.Subscriber)},{"../Subscriber":15}],123:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber"),s=t("../util/ArgumentOutOfRangeError");r.skipLast=function(e){return function(t){return t.lift(new u(e))}};var u=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new o.Subscriber(t)):e.subscribe(new c(t,this._skipCount))},t}(),c=function(n){function t(t,e){var r=n.call(this,t)||this;return r._skipCount=e,r._count=0,r._ring=new Array(e),r}return i(t,n),t.prototype._next=function(t){var e=this._skipCount,r=this._count++;if(r<e)this._ring[r]=t;else{var n=r%e,i=this._ring,o=i[n];i[n]=t,this.destination.next(o)}},t}(o.Subscriber)},{"../Subscriber":15,"../util/ArgumentOutOfRangeError":169}],124:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../OuterSubscriber"),s=t("../InnerSubscriber"),u=t("../util/subscribeToResult");r.skipUntil=function(e){return function(t){return t.lift(new c(e))}};var c=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier))},t}(),a=function(i){function t(t,e){var r=i.call(this,t)||this;r.hasValue=!1;var n=new s.InnerSubscriber(r,void 0,void 0);return r.add(n),r.innerSubscription=n,u.subscribeToResult(r,e,void 0,void 0,n),r}return o(t,i),t.prototype._next=function(t){this.hasValue&&i.prototype._next.call(this,t)},t.prototype.notifyNext=function(t,e,r,n,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(i.OuterSubscriber)},{"../InnerSubscriber":6,"../OuterSubscriber":10,"../util/subscribeToResult":197}],125:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.skipWhile=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate))},t}(),u=function(n){function t(t,e){var r=n.call(this,t)||this;return r.predicate=e,r.skipping=!0,r.index=0,r}return i(t,n),t.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},t.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},t}(o.Subscriber)},{"../Subscriber":15}],126:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../observable/fromArray"),o=t("../observable/scalar"),s=t("../observable/empty"),u=t("../observable/concat"),c=t("../util/isScheduler");r.startWith=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){var e=n[n.length-1];c.isScheduler(e)?n.pop():e=null;var r=n.length;return 1!==r||e?0<r?u.concat(i.fromArray(n,e),t):u.concat(s.empty(e),t):u.concat(o.scalar(n[0]),t)}}},{"../observable/concat":23,"../observable/empty":25,"../observable/fromArray":28,"../observable/scalar":44,"../util/isScheduler":188}],127:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/SubscribeOnObservable");r.subscribeOn=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new i(e,r))}};var i=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new n.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},t}()},{"../observable/SubscribeOnObservable":19}],128:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./switchMap"),i=t("../util/identity");r.switchAll=function(){return n.switchMap(i.identity)}},{"../util/identity":177,"./switchMap":129}],129:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../OuterSubscriber"),s=t("../InnerSubscriber"),u=t("../util/subscribeToResult"),c=t("./map"),a=t("../observable/from");r.switchMap=function e(i,o){return"function"==typeof o?function(t){return t.pipe(e(function(r,n){return a.from(i(r,n)).pipe(c.map(function(t,e){return o(r,t,n,e)}))}))}:function(t){return t.lift(new l(i))}};var l=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project))},t}(),h=function(n){function t(t,e){var r=n.call(this,t)||this;return r.project=e,r.index=0,r}return i(t,n),t.prototype._next=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,r)},t.prototype._innerSub=function(t,e,r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new s.InnerSubscriber(this,void 0,void 0);this.add(i),this.innerSubscription=u.subscribeToResult(this,t,e,r,i)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||n.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&n.prototype._complete.call(this)},t.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},t}(o.OuterSubscriber)},{"../InnerSubscriber":6,"../OuterSubscriber":10,"../observable/from":27,"../util/subscribeToResult":197,"./map":88}],130:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./switchMap");r.switchMapTo=function(t,e){return e?n.switchMap(function(){return t},e):n.switchMap(function(){return t})}},{"./switchMap":129}],131:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber"),s=t("../util/ArgumentOutOfRangeError"),u=t("../observable/empty");r.take=function(e){return function(t){return 0===e?u.empty():t.lift(new c(e))}};var c=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.total))},t}(),a=function(n){function t(t,e){var r=n.call(this,t)||this;return r.total=e,r.count=0,r}return i(t,n),t.prototype._next=function(t){var e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))},t}(o.Subscriber)},{"../Subscriber":15,"../observable/empty":25,"../util/ArgumentOutOfRangeError":169}],132:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber"),s=t("../util/ArgumentOutOfRangeError"),u=t("../observable/empty");r.takeLast=function(e){return function(t){return 0===e?u.empty():t.lift(new c(e))}};var c=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.total))},t}(),a=function(n){function t(t,e){var r=n.call(this,t)||this;return r.total=e,r.ring=new Array,r.count=0,r}return i(t,n),t.prototype._next=function(t){var e=this.ring,r=this.total,n=this.count++;e.length<r?e.push(t):e[n%r]=t},t.prototype._complete=function(){var t=this.destination,e=this.count;if(0<e)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var o=e++%r;t.next(n[o])}t.complete()},t}(o.Subscriber)},{"../Subscriber":15,"../observable/empty":25,"../util/ArgumentOutOfRangeError":169}],133:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../OuterSubscriber"),s=t("../util/subscribeToResult");r.takeUntil=function(e){return function(t){return t.lift(new u(e))}};var u=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var r=new c(t),n=s.subscribeToResult(r,this.notifier);return n&&!r.seenValue?(r.add(n),e.subscribe(r)):r},t}(),c=function(r){function t(t){var e=r.call(this,t)||this;return e.seenValue=!1,e}return i(t,r),t.prototype.notifyNext=function(t,e,r,n,i){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(o.OuterSubscriber)},{"../OuterSubscriber":10,"../util/subscribeToResult":197}],134:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.takeWhile=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate))},t}(),u=function(n){function t(t,e){var r=n.call(this,t)||this;return r.predicate=e,r.index=0,r}return i(t,n),t.prototype._next=function(t){var e,r=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void r.error(t)}this.nextOrComplete(t,e)},t.prototype.nextOrComplete=function(t,e){var r=this.destination;Boolean(e)?r.next(t):r.complete()},t}(o.Subscriber)},{"../Subscriber":15}],135:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber"),s=t("../util/noop"),u=t("../util/isFunction");r.tap=function(e,r,n){return function(t){return t.lift(new c(e,r,n))}};var c=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.nextOrObserver,this.error,this.complete))},t}(),a=function(o){function t(t,e,r,n){var i=o.call(this,t)||this;return i._tapNext=s.noop,i._tapError=s.noop,i._tapComplete=s.noop,i._tapError=r||s.noop,i._tapComplete=n||s.noop,u.isFunction(e)?(i._context=i)._tapNext=e:e&&(i._context=e,i._tapNext=e.next||s.noop,i._tapError=e.error||s.noop,i._tapComplete=e.complete||s.noop),i}return i(t,o),t.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},t.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},t}(o.Subscriber)},{"../Subscriber":15,"../util/isFunction":181,"../util/noop":189}],136:[function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../OuterSubscriber"),s=t("../util/subscribeToResult");n.defaultThrottleConfig={leading:!0,trailing:!1},n.throttle=function(e,r){return void 0===r&&(r=n.defaultThrottleConfig),function(t){return t.lift(new u(e,r.leading,r.trailing))}};var u=function(){function t(t,e,r){this.durationSelector=t,this.leading=e,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.durationSelector,this.leading,this.trailing))},t}(),c=function(o){function t(t,e,r,n){var i=o.call(this,t)||this;return i.destination=t,i.durationSelector=e,i._leading=r,i._trailing=n,i._hasValue=!1,i}return r(t,o),t.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},t.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},t.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=s.subscribeToResult(this,e))},t.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},t.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},t.prototype.notifyNext=function(t,e,r,n,i){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(o.OuterSubscriber)},{"../OuterSubscriber":10,"../util/subscribeToResult":197}],137:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber"),s=t("../scheduler/async"),u=t("./throttle");r.throttleTime=function(e,r,n){return void 0===r&&(r=s.async),void 0===n&&(n=u.defaultThrottleConfig),function(t){return t.lift(new c(e,r,n.leading,n.trailing))}};var c=function(){function t(t,e,r,n){this.duration=t,this.scheduler=e,this.leading=r,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),a=function(s){function t(t,e,r,n,i){var o=s.call(this,t)||this;return o.duration=e,o.scheduler=r,o.leading=n,o.trailing=i,o._hasTrailingValue=!1,o._trailingValue=null,o}return i(t,s),t.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},t}(o.Subscriber);function l(t){t.subscriber.clearThrottle()}},{"../Subscriber":15,"../scheduler/async":164,"./throttle":136}],138:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./tap"),i=t("../util/EmptyError");function o(){return new i.EmptyError}r.throwIfEmpty=function(t){return void 0===t&&(t=o),n.tap({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})}},{"../util/EmptyError":170,"./tap":135}],139:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../scheduler/async"),o=t("./scan"),s=t("../observable/defer"),u=t("./map");r.timeInterval=function(n){return void 0===n&&(n=i.async),function(t){return s.defer(function(){return t.pipe(o.scan(function(t,e){var r=t.current;return{value:e,current:n.now(),last:r}},{current:n.now(),value:void 0,last:void 0}),u.map(function(t){var e=t.current,r=t.last,n=t.value;return new c(n,e-r)}))})}};var c=function(t,e){this.value=t,this.interval=e};r.TimeInterval=c},{"../observable/defer":24,"../scheduler/async":164,"./map":88,"./scan":117}],140:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../scheduler/async"),i=t("../util/TimeoutError"),o=t("./timeoutWith"),s=t("../observable/throwError");r.timeout=function(t,e){return void 0===e&&(e=n.async),o.timeoutWith(t,s.throwError(new i.TimeoutError),e)}},{"../observable/throwError":45,"../scheduler/async":164,"../util/TimeoutError":173,"./timeoutWith":141}],141:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("../scheduler/async"),u=t("../util/isDate"),o=t("../OuterSubscriber"),c=t("../util/subscribeToResult");r.timeoutWith=function(n,i,o){return void 0===o&&(o=s.async),function(t){var e=u.isDate(n),r=e?+n-o.now():Math.abs(n);return t.lift(new a(r,e,i,o))}};var a=function(){function t(t,e,r,n){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=r,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),l=function(s){function e(t,e,r,n,i){var o=s.call(this,t)||this;return o.absoluteTimeout=e,o.waitFor=r,o.withObservable=n,o.scheduler=i,o.action=null,o.scheduleTimeout(),o}return i(e,s),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(c.subscribeToResult(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),s.prototype._next.call(this,t)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(o.OuterSubscriber)},{"../OuterSubscriber":10,"../scheduler/async":164,"../util/isDate":180,"../util/subscribeToResult":197}],142:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../scheduler/async"),i=t("./map");r.timestamp=function(e){return void 0===e&&(e=n.async),i.map(function(t){return new o(t,e.now())})};var o=function(t,e){this.value=t,this.timestamp=e};r.Timestamp=o},{"../scheduler/async":164,"./map":88}],143:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./reduce");function i(t,e,r){return 0===r?[e]:(t.push(e),t)}r.toArray=function(){return n.reduce(i,[])}},{"./reduce":109}],144:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subject"),s=t("../OuterSubscriber"),u=t("../util/subscribeToResult");r.window=function(e){return function(t){return t.lift(new c(e))}};var c=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var r=new a(t),n=e.subscribe(r);return n.closed||r.add(u.subscribeToResult(r,this.windowBoundaries)),n},t}(),a=function(r){function t(t){var e=r.call(this,t)||this;return e.window=new o.Subject,t.next(e.window),e}return i(t,r),t.prototype.notifyNext=function(t,e,r,n,i){this.openWindow()},t.prototype.notifyError=function(t,e){this._error(t)},t.prototype.notifyComplete=function(t){this._complete()},t.prototype._next=function(t){this.window.next(t)},t.prototype._error=function(t){this.window.error(t),this.destination.error(t)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,r=this.window=new o.Subject;e.next(r)},t}(s.OuterSubscriber)},{"../OuterSubscriber":10,"../Subject":13,"../util/subscribeToResult":197}],145:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),a=t("../Subject");r.windowCount=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.windowSize,this.startWindowEvery))},t}(),u=function(i){function t(t,e,r){var n=i.call(this,t)||this;return n.destination=t,n.windowSize=e,n.startWindowEvery=r,n.windows=[new a.Subject],n.count=0,t.next(n.windows[0]),n}return o(t,i),t.prototype._next=function(t){for(var e=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,i=this.windows,o=i.length,s=0;s<o&&!this.closed;s++)i[s].next(t);var u=this.count-n+1;if(0<=u&&u%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var c=new a.Subject;i.push(c),r.next(c)}},t.prototype._error=function(t){var e=this.windows;if(e)for(;0<e.length&&!this.closed;)e.shift().error(t);this.destination.error(t)},t.prototype._complete=function(){var t=this.windows;if(t)for(;0<t.length&&!this.closed;)t.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(i.Subscriber)},{"../Subject":13,"../Subscriber":15}],146:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subject"),s=t("../scheduler/async"),u=t("../Subscriber"),c=t("../util/isNumeric"),a=t("../util/isScheduler");r.windowTime=function(e){var r=s.async,n=null,i=Number.POSITIVE_INFINITY;return a.isScheduler(arguments[3])&&(r=arguments[3]),a.isScheduler(arguments[2])?r=arguments[2]:c.isNumeric(arguments[2])&&(i=arguments[2]),a.isScheduler(arguments[1])?r=arguments[1]:c.isNumeric(arguments[1])&&(n=arguments[1]),function(t){return t.lift(new l(e,n,i,r))}};var l=function(){function t(t,e,r,n){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=r,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return i(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(o.Subject),f=function(l){function t(t,e,r,n,i){var o=l.call(this,t)||this;o.destination=t,o.windowTimeSpan=e,o.windowCreationInterval=r,o.maxWindowSize=n,o.scheduler=i,o.windows=[];var s=o.openWindow();if(null!==r&&0<=r){var u={subscriber:o,window:s,context:null},c={windowTimeSpan:e,windowCreationInterval:r,subscriber:o,scheduler:i};o.add(i.schedule(d,e,u)),o.add(i.schedule(b,r,c))}else{var a={subscriber:o,window:s,windowTimeSpan:e};o.add(i.schedule(p,e,a))}return o}return i(t,l),t.prototype._next=function(t){for(var e=this.windows,r=e.length,n=0;n<r;n++){var i=e[n];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(t){for(var e=this.windows;0<e.length;)e.shift().error(t);this.destination.error(t)},t.prototype._complete=function(){for(var t=this.windows;0<t.length;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},t.prototype.openWindow=function(){var t=new h;return this.windows.push(t),this.destination.next(t),t},t.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},t}(u.Subscriber);function p(t){var e=t.subscriber,r=t.windowTimeSpan,n=t.window;n&&e.closeWindow(n),t.window=e.openWindow(),this.schedule(t,r)}function b(t){var e=t.windowTimeSpan,r=t.subscriber,n=t.scheduler,i=t.windowCreationInterval,o=r.openWindow(),s={action:this,subscription:null},u={subscriber:r,window:o,context:s};s.subscription=n.schedule(d,e,u),this.add(s.subscription),this.schedule(t,i)}function d(t){var e=t.subscriber,r=t.window,n=t.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),e.closeWindow(r)}},{"../Subject":13,"../Subscriber":15,"../scheduler/async":164,"../util/isNumeric":184,"../util/isScheduler":188}],147:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var h=t("../Subject"),f=t("../Subscription"),p=t("../util/tryCatch"),b=t("../util/errorObject"),o=t("../OuterSubscriber"),d=t("../util/subscribeToResult");r.windowToggle=function(e,r){return function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.openings,this.closingSelector))},t}(),u=function(o){function t(t,e,r){var n=o.call(this,t)||this;return n.openings=e,n.closingSelector=r,n.contexts=[],n.add(n.openSubscription=d.subscribeToResult(n,e,e)),n}return i(t,o),t.prototype._next=function(t){var e=this.contexts;if(e)for(var r=e.length,n=0;n<r;n++)e[n].window.next(t)},t.prototype._error=function(t){var e=this.contexts;if(this.contexts=null,e)for(var r=e.length,n=-1;++n<r;){var i=e[n];i.window.error(t),i.subscription.unsubscribe()}o.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,r=-1;++r<e;){var n=t[r];n.window.complete(),n.subscription.unsubscribe()}o.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,r=-1;++r<e;){var n=t[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},t.prototype.notifyNext=function(t,e,r,n,i){if(t===this.openings){var o=this.closingSelector,s=p.tryCatch(o)(e);if(s===b.errorObject)return this.error(b.errorObject.e);var u=new h.Subject,c=new f.Subscription,a={window:u,subscription:c};this.contexts.push(a);var l=d.subscribeToResult(this,s,a);l.closed?this.closeWindow(this.contexts.length-1):(l.context=a,c.add(l)),this.destination.next(u)}else this.closeWindow(this.contexts.indexOf(t))},t.prototype.notifyError=function(t){this.error(t)},t.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},t.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,r=e[t],n=r.window,i=r.subscription;e.splice(t,1),n.complete(),i.unsubscribe()}},t}(o.OuterSubscriber)},{"../OuterSubscriber":10,"../Subject":13,"../Subscription":16,"../util/errorObject":175,"../util/subscribeToResult":197,"../util/tryCatch":199}],148:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subject"),s=t("../util/tryCatch"),u=t("../util/errorObject"),c=t("../OuterSubscriber"),a=t("../util/subscribeToResult");r.windowWhen=function(e){return function(t){return t.lift(new l(e))}};var l=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.closingSelector))},t}(),h=function(n){function t(t,e){var r=n.call(this,t)||this;return r.destination=t,r.closingSelector=e,r.openWindow(),r}return i(t,n),t.prototype.notifyNext=function(t,e,r,n,i){this.openWindow(i)},t.prototype.notifyError=function(t,e){this._error(t)},t.prototype.notifyComplete=function(t){this.openWindow(t)},t.prototype._next=function(t){this.window.next(t)},t.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var r=this.window=new o.Subject;this.destination.next(r);var n=s.tryCatch(this.closingSelector)();if(n===u.errorObject){var i=u.errorObject.e;this.destination.error(i),this.window.error(i)}else this.add(this.closingNotification=a.subscribeToResult(this,n))},t}(c.OuterSubscriber)},{"../OuterSubscriber":10,"../Subject":13,"../util/errorObject":175,"../util/subscribeToResult":197,"../util/tryCatch":199}],149:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../OuterSubscriber"),c=t("../util/subscribeToResult");r.withLatestFrom=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){var e;"function"==typeof n[n.length-1]&&(e=n.pop());var r=n;return t.lift(new s(r,e))}};var s=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.observables,this.project))},t}(),u=function(u){function t(t,e,r){var n=u.call(this,t)||this;n.observables=e,n.project=r,n.toRespond=[];var i=e.length;n.values=new Array(i);for(var o=0;o<i;o++)n.toRespond.push(o);for(o=0;o<i;o++){var s=e[o];n.add(c.subscribeToResult(n,s,s,o))}return n}return i(t,u),t.prototype.notifyNext=function(t,e,r,n,i){this.values[r]=e;var o=this.toRespond;if(0<o.length){var s=o.indexOf(r);-1!==s&&o.splice(s,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},t.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(o.OuterSubscriber)},{"../OuterSubscriber":10,"../util/subscribeToResult":197}],150:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/zip");r.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(n.zip.apply(void 0,[t].concat(e)))}}},{"../observable/zip":48}],151:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/zip");r.zipAll=function(e){return function(t){return t.lift(new n.ZipOperator(e))}}},{"../observable/zip":48}],152:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=function(r){function t(t,e){return r.call(this)||this}return i(t,r),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},t}(t("../Subscription").Subscription);r.Action=o},{"../Subscription":16}],153:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r}return i(t,n),t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&0<r?n.prototype.requestAsyncId.call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},t.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return n.prototype.recycleAsyncId.call(this,t,e,r);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)},t}(t("./AsyncAction").AsyncAction);r.AnimationFrameAction=o},{"./AsyncAction":157}],154:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,i=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<i&&(t=r.shift()));if(this.active=!1,e){for(;++n<i&&(t=r.shift());)t.unsubscribe();throw e}},e}(t("./AsyncScheduler").AsyncScheduler);r.AnimationFrameScheduler=o},{"./AsyncScheduler":158}],155:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../util/Immediate"),s=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r}return i(t,n),t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&0<r?n.prototype.requestAsyncId.call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=o.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return n.prototype.recycleAsyncId.call(this,t,e,r);0===t.actions.length&&(o.Immediate.clearImmediate(e),t.scheduled=void 0)},t}(t("./AsyncAction").AsyncAction);r.AsapAction=s},{"../util/Immediate":171,"./AsyncAction":157}],156:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,i=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<i&&(t=r.shift()));if(this.active=!1,e){for(;++n<i&&(t=r.shift());)t.unsubscribe();throw e}},e}(t("./AsyncScheduler").AsyncScheduler);r.AsapScheduler=o},{"./AsyncScheduler":158}],157:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r.pending=!1,r}return i(t,n),t.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},t.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},t.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},t}(t("./Action").Action);r.AsyncAction=o},{"./Action":152}],158:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("../Scheduler"),i=function(n){function i(t,e){void 0===e&&(e=s.Scheduler.now);var r=n.call(this,t,function(){return i.delegate&&i.delegate!==r?i.delegate.now():e()})||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return o(i,n),i.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,r):n.prototype.schedule.call(this,t,e,r)},i.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},i}(s.Scheduler);r.AsyncScheduler=i},{"../Scheduler":12}],159:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r}return i(t,n),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),0<e?n.prototype.schedule.call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,e){return 0<e||this.closed?n.prototype.execute.call(this,t,e):this._execute(t,e)},t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?n.prototype.requestAsyncId.call(this,t,e,r):t.flush(this)},t}(t("./AsyncAction").AsyncAction);r.QueueAction=o},{"./AsyncAction":157}],160:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(t("./AsyncScheduler").AsyncScheduler);r.QueueScheduler=o},{"./AsyncScheduler":158}],161:[function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("./AsyncAction"),o=function(n){function t(t,e){void 0===t&&(t=u),void 0===e&&(e=Number.POSITIVE_INFINITY);var r=n.call(this,t,function(){return r.frame})||this;return r.maxFrames=e,r.frame=0,r.index=-1,r}return s(t,n),t.prototype.flush=function(){for(var t,e,r=this.actions,n=this.maxFrames;(e=r.shift())&&(this.frame=e.delay)<=n&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=r.shift();)e.unsubscribe();throw t}},t.frameTimeFactor=10,t}(t("./AsyncScheduler").AsyncScheduler);r.VirtualTimeScheduler=o;var u=function(i){function o(t,e,r){void 0===r&&(r=t.index+=1);var n=i.call(this,t,e)||this;return n.scheduler=t,n.work=e,n.index=r,n.active=!0,n.index=t.index=r,n}return s(o,i),o.prototype.schedule=function(t,e){if(void 0===e&&(e=0),!this.id)return i.prototype.schedule.call(this,t,e);this.active=!1;var r=new o(this.scheduler,this.work);return this.add(r),r.schedule(t,e)},o.prototype.requestAsyncId=function(t,e,r){void 0===r&&(r=0),this.delay=t.frame+r;var n=t.actions;return n.push(this),n.sort(o.sortActions),!0},o.prototype.recycleAsyncId=function(t,e,r){void 0===r&&(r=0)},o.prototype._execute=function(t,e){if(!0===this.active)return i.prototype._execute.call(this,t,e)},o.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},o}(i.AsyncAction);r.VirtualAction=u},{"./AsyncAction":157,"./AsyncScheduler":158}],162:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./AnimationFrameAction"),i=t("./AnimationFrameScheduler");r.animationFrame=new i.AnimationFrameScheduler(n.AnimationFrameAction)},{"./AnimationFrameAction":153,"./AnimationFrameScheduler":154}],163:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./AsapAction"),i=t("./AsapScheduler");r.asap=new i.AsapScheduler(n.AsapAction)},{"./AsapAction":155,"./AsapScheduler":156}],164:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./AsyncAction"),i=t("./AsyncScheduler");r.async=new i.AsyncScheduler(n.AsyncAction)},{"./AsyncAction":157,"./AsyncScheduler":158}],165:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./QueueAction"),i=t("./QueueScheduler");r.queue=new i.QueueScheduler(n.QueueAction)},{"./QueueAction":159,"./QueueScheduler":160}],166:[function(t,e,r){"use strict";function n(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(r,"__esModule",{value:!0}),r.getSymbolIterator=n,r.iterator=n(),r.$$iterator=r.iterator},{}],167:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},{}],168:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",r.$$rxSubscriber=r.rxSubscriber},{}],169:[function(t,e,r){"use strict";function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Object.defineProperty(r,"__esModule",{value:!0}),n.prototype=Object.create(Error.prototype),r.ArgumentOutOfRangeError=n},{}],170:[function(t,e,r){"use strict";function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Object.defineProperty(r,"__esModule",{value:!0}),n.prototype=Object.create(Error.prototype),r.EmptyError=n},{}],171:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=1,i={};r.Immediate={setImmediate:function(t){var e=n++;return i[e]=t,Promise.resolve().then(function(){var t;(t=i[e])&&t()}),e},clearImmediate:function(t){delete i[t]}}},{}],172:[function(t,e,r){"use strict";function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}Object.defineProperty(r,"__esModule",{value:!0}),n.prototype=Object.create(Error.prototype),r.ObjectUnsubscribedError=n},{}],173:[function(t,e,r){"use strict";function n(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}Object.defineProperty(r,"__esModule",{value:!0}),n.prototype=Object.create(Error.prototype),r.TimeoutError=n},{}],174:[function(t,e,r){"use strict";function n(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}Object.defineProperty(r,"__esModule",{value:!0}),n.prototype=Object.create(Error.prototype),r.UnsubscriptionError=n},{}],175:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.errorObject={e:{}}},{}],176:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hostReportError=function(t){setTimeout(function(){throw t})}},{}],177:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.identity=function(t){return t}},{}],178:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},{}],179:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},{}],180:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},{}],181:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isFunction=function(t){return"function"==typeof t}},{}],182:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../symbol/observable");r.isInteropObservable=function(t){return t&&"function"==typeof t[n.observable]}},{"../symbol/observable":167}],183:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../symbol/iterator");r.isIterable=function(t){return t&&"function"==typeof t[n.iterator]}},{"../symbol/iterator":166}],184:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./isArray");r.isNumeric=function(t){return!n.isArray(t)&&0<=t-parseFloat(t)+1}},{"./isArray":178}],185:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isObject=function(t){return null!=t&&"object"==typeof t}},{}],186:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable");r.isObservable=function(t){return!!t&&(t instanceof n.Observable||"function"==typeof t.lift&&"function"==typeof t.subscribe)}},{"../Observable":8}],187:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},{}],188:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isScheduler=function(t){return t&&"function"==typeof t.schedule}},{}],189:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.noop=function(){}},{}],190:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.not=function(t,e){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=t,r.thisArg=e,r}},{}],191:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./noop");function i(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}:n.noop}r.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(t)},r.pipeFromArray=i},{"./noop":189}],192:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),i=t("./subscribeToArray"),o=t("./subscribeToPromise"),s=t("./subscribeToIterable"),u=t("./subscribeToObservable"),c=t("./isArrayLike"),a=t("./isPromise"),l=t("./isObject"),h=t("../symbol/iterator"),f=t("../symbol/observable");r.subscribeTo=function(e){if(e instanceof n.Observable)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[f.observable])return u.subscribeToObservable(e);if(c.isArrayLike(e))return i.subscribeToArray(e);if(a.isPromise(e))return o.subscribeToPromise(e);if(e&&"function"==typeof e[h.iterator])return s.subscribeToIterable(e);var t=l.isObject(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},{"../Observable":8,"../symbol/iterator":166,"../symbol/observable":167,"./isArrayLike":179,"./isObject":185,"./isPromise":187,"./subscribeToArray":193,"./subscribeToIterable":194,"./subscribeToObservable":195,"./subscribeToPromise":196}],193:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.subscribeToArray=function(n){return function(t){for(var e=0,r=n.length;e<r&&!t.closed;e++)t.next(n[e]);t.closed||t.complete()}}},{}],194:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../symbol/iterator");r.subscribeToIterable=function(n){return function(t){for(var e=n[i.iterator]();;){var r=e.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t}}},{"../symbol/iterator":166}],195:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../symbol/observable");r.subscribeToObservable=function(r){return function(t){var e=r[n.observable]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}}},{"../symbol/observable":167}],196:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./hostReportError");r.subscribeToPromise=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,n.hostReportError),e}}},{"./hostReportError":176}],197:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../InnerSubscriber"),s=t("./subscribeTo");r.subscribeToResult=function(t,e,r,n,i){if(void 0===i&&(i=new o.InnerSubscriber(t,r,n)),!i.closed)return s.subscribeTo(e)(i)}},{"../InnerSubscriber":6,"./subscribeTo":192}],198:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Subscriber"),i=t("../symbol/rxSubscriber"),o=t("../Observer");r.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(o.empty)}},{"../Observer":9,"../Subscriber":15,"../symbol/rxSubscriber":168}],199:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=t("./errorObject");function o(){try{return n.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}r.tryCatch=function(t){return n=t,o}},{"./errorObject":175}],200:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../internal/operators/audit");r.audit=n.audit;var i=t("../internal/operators/auditTime");r.auditTime=i.auditTime;var o=t("../internal/operators/buffer");r.buffer=o.buffer;var s=t("../internal/operators/bufferCount");r.bufferCount=s.bufferCount;var u=t("../internal/operators/bufferTime");r.bufferTime=u.bufferTime;var c=t("../internal/operators/bufferToggle");r.bufferToggle=c.bufferToggle;var a=t("../internal/operators/bufferWhen");r.bufferWhen=a.bufferWhen;var l=t("../internal/operators/catchError");r.catchError=l.catchError;var h=t("../internal/operators/combineAll");r.combineAll=h.combineAll;var f=t("../internal/operators/combineLatest");r.combineLatest=f.combineLatest;var p=t("../internal/operators/concat");r.concat=p.concat;var b=t("../internal/operators/concatAll");r.concatAll=b.concatAll;var d=t("../internal/operators/concatMap");r.concatMap=d.concatMap;var y=t("../internal/operators/concatMapTo");r.concatMapTo=y.concatMapTo;var v=t("../internal/operators/count");r.count=v.count;var m=t("../internal/operators/debounce");r.debounce=m.debounce;var _=t("../internal/operators/debounceTime");r.debounceTime=_.debounceTime;var x=t("../internal/operators/defaultIfEmpty");r.defaultIfEmpty=x.defaultIfEmpty;var w=t("../internal/operators/delay");r.delay=w.delay;var g=t("../internal/operators/delayWhen");r.delayWhen=g.delayWhen;var O=t("../internal/operators/dematerialize");r.dematerialize=O.dematerialize;var S=t("../internal/operators/distinct");r.distinct=S.distinct;var j=t("../internal/operators/distinctUntilChanged");r.distinctUntilChanged=j.distinctUntilChanged;var E=t("../internal/operators/distinctUntilKeyChanged");r.distinctUntilKeyChanged=E.distinctUntilKeyChanged;var P=t("../internal/operators/elementAt");r.elementAt=P.elementAt;var A=t("../internal/operators/endWith");r.endWith=A.endWith;var C=t("../internal/operators/every");r.every=C.every;var T=t("../internal/operators/exhaust");r.exhaust=T.exhaust;var M=t("../internal/operators/exhaustMap");r.exhaustMap=M.exhaustMap;var I=t("../internal/operators/expand");r.expand=I.expand;var R=t("../internal/operators/filter");r.filter=R.filter;var N=t("../internal/operators/finalize");r.finalize=N.finalize;var k=t("../internal/operators/find");r.find=k.find;var L=t("../internal/operators/findIndex");r.findIndex=L.findIndex;var V=t("../internal/operators/first");r.first=V.first;var B=t("../internal/operators/groupBy");r.groupBy=B.groupBy;var F=t("../internal/operators/ignoreElements");r.ignoreElements=F.ignoreElements;var D=t("../internal/operators/isEmpty");r.isEmpty=D.isEmpty;var z=t("../internal/operators/last");r.last=z.last;var W=t("../internal/operators/map");r.map=W.map;var U=t("../internal/operators/mapTo");r.mapTo=U.mapTo;var Y=t("../internal/operators/materialize");r.materialize=Y.materialize;var q=t("../internal/operators/max");r.max=q.max;var X=t("../internal/operators/merge");r.merge=X.merge;var H=t("../internal/operators/mergeAll");r.mergeAll=H.mergeAll;var $=t("../internal/operators/mergeMap");r.mergeMap=$.mergeMap;var G=t("../internal/operators/mergeMap");r.flatMap=G.mergeMap;var Q=t("../internal/operators/mergeMapTo");r.mergeMapTo=Q.mergeMapTo;var J=t("../internal/operators/mergeScan");r.mergeScan=J.mergeScan;var K=t("../internal/operators/min");r.min=K.min;var Z=t("../internal/operators/multicast");r.multicast=Z.multicast;var tt=t("../internal/operators/observeOn");r.observeOn=tt.observeOn;var et=t("../internal/operators/onErrorResumeNext");r.onErrorResumeNext=et.onErrorResumeNext;var rt=t("../internal/operators/pairwise");r.pairwise=rt.pairwise;var nt=t("../internal/operators/partition");r.partition=nt.partition;var it=t("../internal/operators/pluck");r.pluck=it.pluck;var ot=t("../internal/operators/publish");r.publish=ot.publish;var st=t("../internal/operators/publishBehavior");r.publishBehavior=st.publishBehavior;var ut=t("../internal/operators/publishLast");r.publishLast=ut.publishLast;var ct=t("../internal/operators/publishReplay");r.publishReplay=ct.publishReplay;var at=t("../internal/operators/race");r.race=at.race;var lt=t("../internal/operators/reduce");r.reduce=lt.reduce;var ht=t("../internal/operators/repeat");r.repeat=ht.repeat;var ft=t("../internal/operators/repeatWhen");r.repeatWhen=ft.repeatWhen;var pt=t("../internal/operators/retry");r.retry=pt.retry;var bt=t("../internal/operators/retryWhen");r.retryWhen=bt.retryWhen;var dt=t("../internal/operators/refCount");r.refCount=dt.refCount;var yt=t("../internal/operators/sample");r.sample=yt.sample;var vt=t("../internal/operators/sampleTime");r.sampleTime=vt.sampleTime;var mt=t("../internal/operators/scan");r.scan=mt.scan;var _t=t("../internal/operators/sequenceEqual");r.sequenceEqual=_t.sequenceEqual;var xt=t("../internal/operators/share");r.share=xt.share;var wt=t("../internal/operators/shareReplay");r.shareReplay=wt.shareReplay;var gt=t("../internal/operators/single");r.single=gt.single;var Ot=t("../internal/operators/skip");r.skip=Ot.skip;var St=t("../internal/operators/skipLast");r.skipLast=St.skipLast;var jt=t("../internal/operators/skipUntil");r.skipUntil=jt.skipUntil;var Et=t("../internal/operators/skipWhile");r.skipWhile=Et.skipWhile;var Pt=t("../internal/operators/startWith");r.startWith=Pt.startWith;var At=t("../internal/operators/subscribeOn");r.subscribeOn=At.subscribeOn;var Ct=t("../internal/operators/switchAll");r.switchAll=Ct.switchAll;var Tt=t("../internal/operators/switchMap");r.switchMap=Tt.switchMap;var Mt=t("../internal/operators/switchMapTo");r.switchMapTo=Mt.switchMapTo;var It=t("../internal/operators/take");r.take=It.take;var Rt=t("../internal/operators/takeLast");r.takeLast=Rt.takeLast;var Nt=t("../internal/operators/takeUntil");r.takeUntil=Nt.takeUntil;var kt=t("../internal/operators/takeWhile");r.takeWhile=kt.takeWhile;var Lt=t("../internal/operators/tap");r.tap=Lt.tap;var Vt=t("../internal/operators/throttle");r.throttle=Vt.throttle;var Bt=t("../internal/operators/throttleTime");r.throttleTime=Bt.throttleTime;var Ft=t("../internal/operators/throwIfEmpty");r.throwIfEmpty=Ft.throwIfEmpty;var Dt=t("../internal/operators/timeInterval");r.timeInterval=Dt.timeInterval;var zt=t("../internal/operators/timeout");r.timeout=zt.timeout;var Wt=t("../internal/operators/timeoutWith");r.timeoutWith=Wt.timeoutWith;var Ut=t("../internal/operators/timestamp");r.timestamp=Ut.timestamp;var Yt=t("../internal/operators/toArray");r.toArray=Yt.toArray;var qt=t("../internal/operators/window");r.window=qt.window;var Xt=t("../internal/operators/windowCount");r.windowCount=Xt.windowCount;var Ht=t("../internal/operators/windowTime");r.windowTime=Ht.windowTime;var $t=t("../internal/operators/windowToggle");r.windowToggle=$t.windowToggle;var Gt=t("../internal/operators/windowWhen");r.windowWhen=Gt.windowWhen;var Qt=t("../internal/operators/withLatestFrom");r.withLatestFrom=Qt.withLatestFrom;var Jt=t("../internal/operators/zip");r.zip=Jt.zip;var Kt=t("../internal/operators/zipAll");r.zipAll=Kt.zipAll},{"../internal/operators/audit":49,"../internal/operators/auditTime":50,"../internal/operators/buffer":51,"../internal/operators/bufferCount":52,"../internal/operators/bufferTime":53,"../internal/operators/bufferToggle":54,"../internal/operators/bufferWhen":55,"../internal/operators/catchError":56,"../internal/operators/combineAll":57,"../internal/operators/combineLatest":58,"../internal/operators/concat":59,"../internal/operators/concatAll":60,"../internal/operators/concatMap":61,"../internal/operators/concatMapTo":62,"../internal/operators/count":63,"../internal/operators/debounce":64,"../internal/operators/debounceTime":65,"../internal/operators/defaultIfEmpty":66,"../internal/operators/delay":67,"../internal/operators/delayWhen":68,"../internal/operators/dematerialize":69,"../internal/operators/distinct":70,"../internal/operators/distinctUntilChanged":71,"../internal/operators/distinctUntilKeyChanged":72,"../internal/operators/elementAt":73,"../internal/operators/endWith":74,"../internal/operators/every":75,"../internal/operators/exhaust":76,"../internal/operators/exhaustMap":77,"../internal/operators/expand":78,"../internal/operators/filter":79,"../internal/operators/finalize":80,"../internal/operators/find":81,"../internal/operators/findIndex":82,"../internal/operators/first":83,"../internal/operators/groupBy":84,"../internal/operators/ignoreElements":85,"../internal/operators/isEmpty":86,"../internal/operators/last":87,"../internal/operators/map":88,"../internal/operators/mapTo":89,"../internal/operators/materialize":90,"../internal/operators/max":91,"../internal/operators/merge":92,"../internal/operators/mergeAll":93,"../internal/operators/mergeMap":94,"../internal/operators/mergeMapTo":95,"../internal/operators/mergeScan":96,"../internal/operators/min":97,"../internal/operators/multicast":98,"../internal/operators/observeOn":99,"../internal/operators/onErrorResumeNext":100,"../internal/operators/pairwise":101,"../internal/operators/partition":102,"../internal/operators/pluck":103,"../internal/operators/publish":104,"../internal/operators/publishBehavior":105,"../internal/operators/publishLast":106,"../internal/operators/publishReplay":107,"../internal/operators/race":108,"../internal/operators/reduce":109,"../internal/operators/refCount":110,"../internal/operators/repeat":111,"../internal/operators/repeatWhen":112,"../internal/operators/retry":113,"../internal/operators/retryWhen":114,"../internal/operators/sample":115,"../internal/operators/sampleTime":116,"../internal/operators/scan":117,"../internal/operators/sequenceEqual":118,"../internal/operators/share":119,"../internal/operators/shareReplay":120,"../internal/operators/single":121,"../internal/operators/skip":122,"../internal/operators/skipLast":123,"../internal/operators/skipUntil":124,"../internal/operators/skipWhile":125,"../internal/operators/startWith":126,"../internal/operators/subscribeOn":127,"../internal/operators/switchAll":128,"../internal/operators/switchMap":129,"../internal/operators/switchMapTo":130,"../internal/operators/take":131,"../internal/operators/takeLast":132,"../internal/operators/takeUntil":133,"../internal/operators/takeWhile":134,"../internal/operators/tap":135,"../internal/operators/throttle":136,"../internal/operators/throttleTime":137,"../internal/operators/throwIfEmpty":138,"../internal/operators/timeInterval":139,"../internal/operators/timeout":140,"../internal/operators/timeoutWith":141,"../internal/operators/timestamp":142,"../internal/operators/toArray":143,"../internal/operators/window":144,"../internal/operators/windowCount":145,"../internal/operators/windowTime":146,"../internal/operators/windowToggle":147,"../internal/operators/windowWhen":148,"../internal/operators/withLatestFrom":149,"../internal/operators/zip":150,"../internal/operators/zipAll":151}],201:[function(t,e,r){var n,i;n="undefined"!=typeof window?window:this,i=function(s,i){var h=(void 0!==this?this:s).SVG=function(t){if(h.supported)return t=new h.Doc(t),h.parser.draw||h.prepare(),t};if(h.ns="http://www.w3.org/2000/svg",h.xmlns="http://www.w3.org/2000/xmlns/",h.xlink="http://www.w3.org/1999/xlink",h.svgjs="http://svgjs.com/svgjs",h.supported=!!i.createElementNS&&!!i.createElementNS(h.ns,"svg").createSVGRect,!h.supported)return!1;h.did=1e3,h.eid=function(t){return"Svgjs"+u(t)+h.did++},h.create=function(t){var e=i.createElementNS(this.ns,t);return e.setAttribute("id",this.eid(t)),e},h.extend=function(){var t,e,r,n;for(e=(t=[].slice.call(arguments)).pop(),n=t.length-1;0<=n;n--)if(t[n])for(r in e)t[n].prototype[r]=e[r];h.Set&&h.Set.inherit&&h.Set.inherit()},h.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,h.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&h.extend(e,t.extend),t.construct&&h.extend(t.parent||h.Container,t.construct),e},h.adopt=function(t){return t?t.instance?t.instance:((e="svg"==t.nodeName?t.parentNode instanceof s.SVGElement?new h.Nested:new h.Doc:"linearGradient"==t.nodeName?new h.Gradient("linear"):"radialGradient"==t.nodeName?new h.Gradient("radial"):h[u(t.nodeName)]?new(h[u(t.nodeName)]):new h.Element(t)).type=t.nodeName,((e.node=t).instance=e)instanceof h.Doc&&e.namespace().defs(),e.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),e):null;var e},h.prepare=function(){var t=i.getElementsByTagName("body")[0],e=(t?new h.Doc(t):h.adopt(i.documentElement).nested()).size(2,0);h.parser={body:t||i.documentElement,draw:e.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:e.polyline().node,path:e.path().node,native:h.create("svg")}},h.parser={native:h.create("svg")},i.addEventListener("DOMContentLoaded",function(){h.parser.draw||h.prepare()},!1),h.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},h.utils={map:function(t,e){var r,n=t.length,i=[];for(r=0;r<n;r++)i.push(e(t[r]));return i},filter:function(t,e){var r,n=t.length,i=[];for(r=0;r<n;r++)e(t[r])&&i.push(t[r]);return i},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(t){return this.filter(t,function(t){return t instanceof s.SVGElement})}},h.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},h.Color=function(t){var e,r;(this.r=0,this.g=0,this.b=0,t)&&("string"==typeof t?h.regex.isRgb.test(t)?(e=h.regex.rgb.exec(t.replace(h.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):h.regex.isHex.test(t)&&(e=h.regex.hex.exec(4==(r=t).length?["#",r.substring(1,2),r.substring(1,2),r.substring(2,3),r.substring(2,3),r.substring(3,4),r.substring(3,4)].join(""):r),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},h.extend(h.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+l(this.r)+l(this.g)+l(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new h.Color(t),this},at:function(t){return this.destination?(t=t<0?0:1<t?1:t,new h.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),h.Color.test=function(t){return t+="",h.regex.isHex.test(t)||h.regex.isRgb.test(t)},h.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},h.Color.isColor=function(t){return h.Color.isRgb(t)||h.Color.test(t)},h.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},h.extend(h.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],r=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(r);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,r=[];t<e;t++)-1==r.indexOf(this.value[t])&&r.push(this.value[t]);return this.value=r},at:function(t){if(!this.destination)return this;for(var e=0,r=this.value.length,n=[];e<r;e++)n.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new h.Array(n)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(h.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=function t(e){var r=e.slice(0);for(var n=r.length;n--;)Array.isArray(r[n])&&(r[n]=t(r[n]));return r}(this.value),t}}),h.PointArray=function(t,e){h.Array.call(this,t,e||[[0,0]])},h.PointArray.prototype=new h.Array,h.PointArray.prototype.constructor=h.PointArray,h.extend(h.PointArray,{toString:function(){for(var t=0,e=this.value.length,r=[];t<e;t++)r.push(this.value[t].join(","));return r.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,r=this.value.length,n=[];e<r;e++)n.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new h.PointArray(n)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t.map(function(t){return t.slice()});if(null!=t[0].x)return t.map(function(t){return[t.x,t.y]})}else t=t.trim().split(h.regex.delimiter).map(parseFloat);t.length%2!=0&&t.pop();for(var r=0,n=t.length;r<n;r+=2)e.push([t[r],t[r+1]]);return e},move:function(t,e){var r=this.bbox();if(t-=r.x,e-=r.y,!isNaN(t)&&!isNaN(e))for(var n=this.value.length-1;0<=n;n--)this.value[n]=[this.value[n][0]+t,this.value[n][1]+e];return this},size:function(t,e){var r,n=this.bbox();for(r=this.value.length-1;0<=r;r--)n.width&&(this.value[r][0]=(this.value[r][0]-n.x)*t/n.width+n.x),n.height&&(this.value[r][1]=(this.value[r][1]-n.y)*e/n.height+n.y);return this},bbox:function(){return h.parser.poly.setAttribute("points",this.toString()),h.parser.poly.getBBox()}});for(var c={M:function(t,e,r){return e.x=r.x=t[0],e.y=r.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,r){return e.x=r.x,e.y=r.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},t="mlhvqtcsaz".split(""),e=0,r=t.length;e<r;++e)c[t[e]]=function(o){return function(t,e,r){if("H"==o)t[0]=t[0]+e.x;else if("V"==o)t[0]=t[0]+e.y;else if("A"==o)t[5]=t[5]+e.x,t[6]=t[6]+e.y;else for(var n=0,i=t.length;n<i;++n)t[n]=t[n]+(n%2?e.y:e.x);return c[o](t,e,r)}}(t[e].toUpperCase());h.PathArray=function(t,e){h.Array.call(this,t,e||[["M",0,0]])},h.PathArray.prototype=new h.Array,h.PathArray.prototype.constructor=h.PathArray,h.extend(h.PathArray,{toString:function(){return function(t){for(var e=0,r=t.length,n="";e<r;e++)n+=t[e][0],null!=t[e][1]&&(n+=t[e][1],null!=t[e][2]&&(n+=" ",n+=t[e][2],null!=t[e][3]&&(n+=" ",n+=t[e][3],n+=" ",n+=t[e][4],null!=t[e][5]&&(n+=" ",n+=t[e][5],n+=" ",n+=t[e][6],null!=t[e][7]&&(n+=" ",n+=t[e][7])))));return n+" "}(this.value)},move:function(t,e){var r=this.bbox();if(t-=r.x,e-=r.y,!isNaN(t)&&!isNaN(e))for(var n,i=this.value.length-1;0<=i;i--)"M"==(n=this.value[i][0])||"L"==n||"T"==n?(this.value[i][1]+=t,this.value[i][2]+=e):"H"==n?this.value[i][1]+=t:"V"==n?this.value[i][1]+=e:"C"==n||"S"==n||"Q"==n?(this.value[i][1]+=t,this.value[i][2]+=e,this.value[i][3]+=t,this.value[i][4]+=e,"C"==n&&(this.value[i][5]+=t,this.value[i][6]+=e)):"A"==n&&(this.value[i][6]+=t,this.value[i][7]+=e);return this},size:function(t,e){var r,n,i=this.bbox();for(r=this.value.length-1;0<=r;r--)"M"==(n=this.value[r][0])||"L"==n||"T"==n?(this.value[r][1]=(this.value[r][1]-i.x)*t/i.width+i.x,this.value[r][2]=(this.value[r][2]-i.y)*e/i.height+i.y):"H"==n?this.value[r][1]=(this.value[r][1]-i.x)*t/i.width+i.x:"V"==n?this.value[r][1]=(this.value[r][1]-i.y)*e/i.height+i.y:"C"==n||"S"==n||"Q"==n?(this.value[r][1]=(this.value[r][1]-i.x)*t/i.width+i.x,this.value[r][2]=(this.value[r][2]-i.y)*e/i.height+i.y,this.value[r][3]=(this.value[r][3]-i.x)*t/i.width+i.x,this.value[r][4]=(this.value[r][4]-i.y)*e/i.height+i.y,"C"==n&&(this.value[r][5]=(this.value[r][5]-i.x)*t/i.width+i.x,this.value[r][6]=(this.value[r][6]-i.y)*e/i.height+i.y)):"A"==n&&(this.value[r][1]=this.value[r][1]*t/i.width,this.value[r][2]=this.value[r][2]*e/i.height,this.value[r][6]=(this.value[r][6]-i.x)*t/i.width+i.x,this.value[r][7]=(this.value[r][7]-i.y)*e/i.height+i.y);return this},equalCommands:function(t){var e,r,n;for(t=new h.PathArray(t),n=this.value.length===t.value.length,e=0,r=this.value.length;n&&e<r;e++)n=this.value[e][0]===t.value[e][0];return n},morph:function(t){return t=new h.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,r,n,i,o=this.value,s=this.destination.value,u=[],c=new h.PathArray;for(e=0,r=o.length;e<r;e++){for(u[e]=[o[e][0]],n=1,i=o[e].length;n<i;n++)u[e][n]=o[e][n]+(s[e][n]-o[e][n])*t;"A"===u[e][0]&&(u[e][4]=+(0!=u[e][4]),u[e][5]=+(0!=u[e][5]))}return c.value=u,c},parse:function(t){if(t instanceof h.PathArray)return t.valueOf();var e,r={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(h.regex.numbersWithDots,a).replace(h.regex.pathLetters," $& ").replace(h.regex.hyphen,"$1 -").trim().split(h.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);for(var n=[],i=new h.Point,o=new h.Point,s=0,u=t.length;h.regex.isPathLetter.test(t[s])?(e=t[s],++s):"M"==e?e="L":"m"==e&&(e="l"),n.push(c[e].call(null,t.slice(s,s+=r[e.toUpperCase()]).map(parseFloat),i,o)),s<u;);return n},bbox:function(){return h.parser.path.setAttribute("d",this.toString()),h.parser.path.getBBox()}}),h.Number=h.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(h.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof h.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new h.Number(t),new h.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new h.Number(t),new h.Number(this-t,this.unit||t.unit)},times:function(t){return t=new h.Number(t),new h.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new h.Number(t),new h.Number(this/t,this.unit||t.unit)},to:function(t){var e=new h.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new h.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new h.Number(this.destination).minus(this).times(t).plus(this):this}}}),h.Element=h.invent({create:function(t){this._stroke=h.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,(this.node.instance=this)._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var r=f(this,t,e);return this.width(new h.Number(r.width)).height(new h.Number(r.height))},clone:function(t){this.writeDataToDom();var e=y(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var r=this.bbox();return t>r.x&&e>r.y&&t<r.x+r.width&&e<r.y+r.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(h.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter(function(t){return t!=e}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return h.get(this.attr(t))},parent:function(t){var e=this;if(!e.node.parentNode)return null;if(e=h.adopt(e.node.parentNode),!t)return e;for(;e&&e.node instanceof s.SVGElement;){if("string"==typeof t?e.matches(t):e instanceof t)return e;if(!e.node.parentNode||"#document"==e.node.parentNode.nodeName)return null;e=h.adopt(e.node.parentNode)}},doc:function(){return this instanceof h.Doc?this:this.parent(h.Doc)},parents:function(t){var e=[],r=this;do{if(!(r=r.parent(t))||!r.node)break;e.push(r)}while(r.parent);return e},matches:function(t){return e=this.node,r=t,(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,r);var e,r},native:function(){return this.node},svg:function(t){var e=i.createElement("svg");if(!(t&&this instanceof h.Parent))return e.appendChild(t=i.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),e.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");e.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var r=0,n=e.firstChild.childNodes.length;r<n;r++)this.node.appendChild(e.firstChild.firstChild);return this},writeDataToDom:function(){(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()});return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return this instanceof t}}}),h.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},h.morph=function(r){return function(t,e){return new h.MorphObj(t,e).at(r)}},h.Situation=h.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new h.Number(t.duration).valueOf(),this.delay=new h.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),h.FX=h.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,r){"object"==typeof t&&(e=t.ease,r=t.delay,t=t.duration);var n=new h.Situation({duration:t||1e3,delay:r||0,ease:h.easing[e||"-"]||e});return this.queue(n),this},delay:function(t){var e=new h.Situation({duration:t,delay:0,ease:h.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof h.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=s.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){s.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof h.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof h.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,r,n=this.situation;if(n.init)return this;for(t in n.animations)for(r=this.target()[t](),Array.isArray(r)||(r=[r]),Array.isArray(n.animations[t])||(n.animations[t]=[n.animations[t]]),e=r.length;e--;)n.animations[t][e]instanceof h.Number&&(r[e]=new h.Number(r[e])),n.animations[t][e]=r[e].morph(n.animations[t][e]);for(t in n.attrs)n.attrs[t]=new h.MorphObj(this.target().attr(t),n.attrs[t]);for(t in n.styles)n.styles[t]=new h.MorphObj(this.target().style(t),n.styles[t]);return n.initialTransformation=this.target().matrixify(),n.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var r=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!r&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var r=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*r,this.situation.finish=this.situation.start+r,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var r=this.last();return r.loops=null==t||t,r.loop=0,e&&(r.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return e.reversed=void 0===t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(r){var n=this.last();return this.target().on("finished.fx",function t(e){e.detail.situation==n&&(r.call(this,n),this.off("finished.fx",t))}),this._callStart()},during:function(e){var r=this.last(),t=function(t){t.detail.situation==r&&e.call(this,t.detail.pos,h.morph(t.detail.pos),t.detail.eased,r)};return this.target().off("during.fx",t).on("during.fx",t),this.after(function(){this.off("during.fx",t)}),this._callStart()},afterAll:function(r){var t=function t(e){r.call(this),this.off("allfinished.fx",t)};return this.target().off("allfinished.fx",t).on("allfinished.fx",t),this._callStart()},duringAll:function(e){var t=function(t){e.call(this,t.detail.pos,h.morph(t.detail.pos),t.detail.eased,t.detail.situation)};return this.target().off("during.fx",t).on("during.fx",t),this.afterAll(function(){this.off("during.fx",t)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,r){return this.last()[r||"animations"][t]=e,this._callStart()},step:function(t){var e,r,n;(t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops)?(e=Math.max(this.absPos,0),r=Math.floor(e),!0===this.situation.loops||r<this.situation.loops?(this.pos=e-r,n=this.situation.loop,this.situation.loop=r):(this.absPos=this.situation.loops,this.pos=1,n=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-n)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos);this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var i=this.situation.ease(this.pos);for(var o in this.situation.once)o>this.lastPos&&o<=i&&(this.situation.once[o].call(this.target(),this.pos,i),delete this.situation.once[o]);return this.active&&this.target().fire("during",{pos:this.pos,eased:i,fx:this,situation:this.situation}),this.situation&&(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=i),this},eachAt:function(){var t,e,r,n=this,i=this.target(),o=this.situation;for(t in o.animations)r=[].concat(o.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(o.ease(n.pos),n.pos):t}),i[t].apply(i,r);for(t in o.attrs)r=[t].concat(o.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(o.ease(n.pos),n.pos):t}),i.attr.apply(i,r);for(t in o.styles)r=[t].concat(o.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(o.ease(n.pos),n.pos):t}),i.style.apply(i,r);if(o.transforms.length){for(r=o.initialTransformation,t=0,e=o.transforms.length;t<e;t++){var s=o.transforms[t];s instanceof h.Matrix?r=s.relative?r.multiply((new h.Matrix).morph(s).at(o.ease(this.pos))):r.morph(s).at(o.ease(this.pos)):(s.relative||s.undo(r.extract()),r=r.multiply(s.at(o.ease(this.pos))))}i.matrix(r)}return this},once:function(t,e,r){var n=this.last();return r||(t=n.ease(t)),n.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:h.Element,construct:{animate:function(t,e,r){return(this.fx||(this.fx=new h.FX(this))).animate(t,e,r)},delay:function(t){return(this.fx||(this.fx=new h.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),h.MorphObj=h.invent({create:function(t,e){return h.Color.isColor(e)?new h.Color(t).morph(e):h.regex.delimiter.test(t)?h.regex.pathLetters.test(t)?new h.PathArray(t).morph(e):new h.Array(t).morph(e):h.regex.numberAndUnit.test(e)?new h.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),h.extend(h.FX,{attr:function(t,e,r){if("object"==typeof t)for(var n in t)this.attr(n,t[n]);else this.add(t,e,"attrs");return this},style:function(t,e){if("object"==typeof t)for(var r in t)this.style(r,t[r]);else this.add(t,e,"styles");return this},x:function(t,e){if(this.target()instanceof h.G)return this.transform({x:t},e),this;var r=new h.Number(t);return r.relative=e,this.add("x",r)},y:function(t,e){if(this.target()instanceof h.G)return this.transform({y:t},e),this;var r=new h.Number(t);return r.relative=e,this.add("y",r)},cx:function(t){return this.add("cx",new h.Number(t))},cy:function(t){return this.add("cy",new h.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var r;this.target()instanceof h.Text?this.attr("font-size",t):(t&&e||(r=this.target().bbox()),t||(t=r.width/r.height*e),e||(e=r.height/r.width*t),this.add("width",new h.Number(t)).add("height",new h.Number(e)));return this},width:function(t){return this.add("width",new h.Number(t))},height:function(t){return this.add("height",new h.Number(t))},plot:function(t,e,r,n){return 4==arguments.length?this.plot([t,e,r,n]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new h.Number(t)):this},viewbox:function(t,e,r,n){return this.target()instanceof h.Container&&this.add("viewbox",new h.ViewBox(t,e,r,n)),this},update:function(t){if(this.target()instanceof h.Stop){if("number"==typeof t||t instanceof h.Number)return this.update({offset:t,color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),h.Box=h.invent({create:function(t,e,r,n){if(!("object"!=typeof t||t instanceof h.Element))return h.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=r,this.height=n),v(this)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,v(e)},transform:function(e){var t,r=1/0,n=-1/0,i=1/0,o=-1/0;return[new h.Point(this.x,this.y),new h.Point(this.x2,this.y),new h.Point(this.x,this.y2),new h.Point(this.x2,this.y2)].forEach(function(t){t=t.transform(e),r=Math.min(r,t.x),n=Math.max(n,t.x),i=Math.min(i,t.y),o=Math.max(o,t.y)}),(t=new this.constructor).x=r,t.width=n-r,t.y=i,t.height=o-i,v(t),t}}}),h.BBox=h.invent({create:function(e){if(h.Box.apply(this,[].slice.call(arguments)),e instanceof h.Element){var r;try{if(i.documentElement.contains){if(!i.documentElement.contains(e.node))throw new Exception("Element not in the dom")}else{for(var t=e.node;t.parentNode;)t=t.parentNode;if(t!=i)throw new Exception("Element not in the dom")}r=e.node.getBBox()}catch(t){if(e instanceof h.Shape){var n=e.clone(h.parser.draw.instance).show();r=n.node.getBBox(),n.remove()}else r={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}h.Box.call(this,r)}},inherit:h.Box,parent:h.Element,construct:{bbox:function(){return new h.BBox(this)}}}),h.BBox.prototype.constructor=h.BBox,h.extend(h.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),h.RBox=h.invent({create:function(t){h.Box.apply(this,[].slice.call(arguments)),t instanceof h.Element&&h.Box.call(this,t.node.getBoundingClientRect())},inherit:h.Box,parent:h.Element,extend:{addOffset:function(){return this.x+=s.pageXOffset,this.y+=s.pageYOffset,this}},construct:{rbox:function(t){return t?new h.RBox(this).transform(t.screenCTM().inverse()):new h.RBox(this).addOffset()}}}),h.RBox.prototype.constructor=h.RBox,h.Matrix=h.invent({create:function(t){var e,r=b([1,0,0,1,0,0]);for(t=t instanceof h.Element?t.matrixify():"string"==typeof t?b(t.split(h.regex.delimiter).map(parseFloat)):6==arguments.length?b([].slice.call(arguments)):Array.isArray(t)?b(t):"object"==typeof t?t:r,e=_.length-1;0<=e;--e)this[_[e]]=null!=t[_[e]]?t[_[e]]:r[_[e]]},extend:{extract:function(){var t=p(this,0,1),e=p(this,1,0),r=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(r*Math.PI/180)+this.f*Math.sin(r*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(r*Math.PI/180)+this.e*Math.sin(-r*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-r,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:r,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new h.Matrix(this)}},clone:function(){return new h.Matrix(this)},morph:function(t){return this.destination=new h.Matrix(t),this},at:function(t){return this.destination?new h.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t}):this},multiply:function(t){return new h.Matrix(this.native().multiply(function(t){t instanceof h.Matrix||(t=new h.Matrix(t));return t}(t).native()))},inverse:function(){return new h.Matrix(this.native().inverse())},translate:function(t,e){return new h.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,r,n){return 1==arguments.length?e=t:3==arguments.length&&(n=r,r=e,e=t),this.around(r,n,new h.Matrix(t,0,0,e,0,0))},rotate:function(t,e,r){return t=h.utils.radians(t),this.around(e,r,new h.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,t,null!=e?e:t)},skew:function(t,e,r,n){return 1==arguments.length?e=t:3==arguments.length&&(n=r,r=e,e=t),t=h.utils.radians(t),e=h.utils.radians(e),this.around(r,n,new h.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,r){return this.skew(t,0,e,r)},skewY:function(t,e,r){return this.skew(0,t,e,r)},around:function(t,e,r){return this.multiply(new h.Matrix(1,0,0,1,t||0,e||0)).multiply(r).multiply(new h.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=h.parser.native.createSVGMatrix(),e=_.length-1;0<=e;e--)t[_[e]]=this[_[e]];return t},toString:function(){return"matrix("+m(this.a)+","+m(this.b)+","+m(this.c)+","+m(this.d)+","+m(this.e)+","+m(this.f)+")"}},parent:h.Element,construct:{ctm:function(){return new h.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof h.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new h.Matrix(e)}return new h.Matrix(this.node.getScreenCTM())}}}),h.Point=h.invent({create:function(t,e){var r;r=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=r.x,this.y=r.y},extend:{clone:function(){return new h.Point(this)},morph:function(t,e){return this.destination=new h.Point(t,e),this},at:function(t){return this.destination?new h.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=h.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new h.Point(this.native().matrixTransform(t.native()))}}}),h.extend(h.Element,{point:function(t,e){return new h.Point(t,e).transform(this.screenCTM().inverse())}}),h.extend(h.Element,{attr:function(t,e,r){if(null==t){for(t={},r=(e=this.node.attributes).length-1;0<=r;r--)t[e[r].nodeName]=h.regex.isNumber.test(e[r].nodeValue)?parseFloat(e[r].nodeValue):e[r].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?h.defaults.attrs[t]:h.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",0<parseFloat(e)?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(h.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof h.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new h.Number(e):h.Color.isColor(e)?e=new h.Color(e):Array.isArray(e)&&(e=new h.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof r?this.node.setAttributeNS(r,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),h.extend(h.Element,{transform:function(t,e){var r,n;if("object"!=typeof t)return r=new h.Matrix(this).extract(),"string"==typeof t?r[t]:r;if(r=new h.Matrix(this),e=!!e||!!t.relative,null!=t.a)r=e?r.multiply(new h.Matrix(t)):new h.Matrix(t);else if(null!=t.rotation)d(t,this),r=e?r.rotate(t.rotation,t.cx,t.cy):r.rotate(t.rotation-r.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(d(t,this),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var i=r.extract();t.scaleX=1*t.scaleX/i.scaleX,t.scaleY=1*t.scaleY/i.scaleY}r=r.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else if(null!=t.skew||null!=t.skewX||null!=t.skewY){if(d(t,this),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,!e){i=r.extract();r=r.multiply((new h.Matrix).skew(i.skewX,i.skewY,t.cx,t.cy).inverse())}r=r.skew(t.skewX,t.skewY,t.cx,t.cy)}else t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?this.bbox()["c"+t.flip]:t.offset:null==t.offset?(n=this.bbox(),t.flip=n.cx,t.offset=n.cy):t.flip=t.offset,r=(new h.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(e?r=r.translate(t.x,t.y):(null!=t.x&&(r.e=t.x),null!=t.y&&(r.f=t.y)));return this.attr("transform",r)}}),h.extend(h.FX,{transform:function(t,e){var r,n,i=this.target();return"object"!=typeof t?(r=new h.Matrix(i).extract(),"string"==typeof t?r[t]:r):(e=!!e||!!t.relative,null!=t.a?r=new h.Matrix(t):null!=t.rotation?(d(t,i),r=new h.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(d(t,i),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,r=new h.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(d(t,i),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,r=new h.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?i.bbox()["c"+t.flip]:t.offset:null==t.offset?(n=i.bbox(),t.flip=n.cx,t.offset=n.cy):t.flip=t.offset,r=(new h.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(r=new h.Translate(t.x,t.y)),r?(r.relative=e,this.last().transforms.push(r),this._callStart()):this)}}),h.extend(h.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(h.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(h.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(b(e[1])):t[e[0]].apply(t,e[1])},new h.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),r=t.screenCTM().inverse();return this.addTo(t).untransform().transform(r.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),h.Transformation=h.invent({create:function(t,e){if(1<arguments.length&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var r=0,n=this.arguments.length;r<n;++r)this[this.arguments[r]]=t[r];else if("object"==typeof t)for(r=0,n=this.arguments.length;r<n;++r)this[this.arguments[r]]=t[this.arguments[r]];!(this.inversed=!1)===e&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],r=0,n=this.arguments.length;r<n;++r)e.push(this[this.arguments[r]]);var i=this._undo||new h.Matrix;return i=(new h.Matrix).morph(h.Matrix.prototype[this.method].apply(i,e)).at(t),this.inversed?i.inverse():i},undo:function(t){for(var e=0,r=this.arguments.length;e<r;++e)t[this.arguments[e]]=void 0===this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(h[u(this.method)])(t,!0).at(1),this}}}),h.Translate=h.invent({parent:h.Matrix,inherit:h.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),h.Rotate=h.invent({parent:h.Matrix,inherit:h.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new h.Matrix).rotate((new h.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),h.Scale=h.invent({parent:h.Matrix,inherit:h.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),h.Skew=h.invent({parent:h.Matrix,inherit:h.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),h.extend(h.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!h.regex.isCss.test(t))return this.node.style[o(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[o(t)]=null===e||h.regex.isBlank.test(e)?"":e;return this}}),h.Parent=h.invent({create:function(t){this.constructor.call(this,t)},inherit:h.Element,extend:{children:function(){return h.utils.map(h.utils.filterSVGElements(this.node.childNodes),function(t){return h.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return 0<=this.index(t)},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return h.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var r,n,i=this.children();for(r=0,n=i.length;r<n;r++)i[r]instanceof h.Element&&t.apply(i[r],[r,i]),e&&i[r]instanceof h.Container&&i[r].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),h.extend(h.Parent,{ungroup:function(t,e){return 0===e||this instanceof h.Defs||this.node==h.parser.draw||(t=t||(this instanceof h.Doc?this:this.parent(h.Parent)),e=e||1/0,this.each(function(){return this instanceof h.Defs?this:this instanceof h.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),h.Container=h.invent({create:function(t){this.constructor.call(this,t)},inherit:h.Parent}),h.ViewBox=h.invent({create:function(t){var e,r,n,i,o,s,u,c=1,a=1,l=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof h.Element){for(o=((u=s=t).attr("viewBox")||"").match(l),t.bbox,n=new h.Number(t.width()),i=new h.Number(t.height());"%"==n.unit;)c*=n.value,n=new h.Number(s instanceof h.Doc?s.parent().offsetWidth:s.parent().width()),s=s.parent();for(;"%"==i.unit;)a*=i.value,i=new h.Number(u instanceof h.Doc?u.parent().offsetHeight:u.parent().height()),u=u.parent();this.x=0,this.y=0,this.width=n*c,this.height=i*a,this.zoom=1,o&&(e=parseFloat(o[0]),r=parseFloat(o[1]),n=parseFloat(o[2]),i=parseFloat(o[3]),this.zoom=this.width/this.height>n/i?this.height/i:this.width/n,this.x=e,this.y=r,this.width=n,this.height=i)}else t="string"==typeof t?t.match(l).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,r,n){return this.destination=new h.ViewBox(t,e,r,n),this},at:function(t){return this.destination?new h.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:h.Container,construct:{viewbox:function(t,e,r,n){return 0==arguments.length?new h.ViewBox(this):this.attr("viewBox",new h.ViewBox(t,e,r,n))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(e){h.Element.prototype[e]=function(t){return h.on(this.node,e,t),this}}),h.listeners=[],h.handlerMap=[],h.listenerId=0,h.on=function(t,e,r,n,i){var o=r.bind(n||t.instance||t),s=(h.handlerMap.indexOf(t)+1||h.handlerMap.push(t))-1,u=e.split(".")[0],c=e.split(".")[1]||"*";h.listeners[s]=h.listeners[s]||{},h.listeners[s][u]=h.listeners[s][u]||{},h.listeners[s][u][c]=h.listeners[s][u][c]||{},r._svgjsListenerId||(r._svgjsListenerId=++h.listenerId),h.listeners[s][u][c][r._svgjsListenerId]=o,t.addEventListener(u,o,i||!1)},h.off=function(t,e,r){var n=h.handlerMap.indexOf(t),i=e&&e.split(".")[0],o=e&&e.split(".")[1],s="";if(-1!=n)if(r){if("function"==typeof r&&(r=r._svgjsListenerId),!r)return;h.listeners[n][i]&&h.listeners[n][i][o||"*"]&&(t.removeEventListener(i,h.listeners[n][i][o||"*"][r],!1),delete h.listeners[n][i][o||"*"][r])}else if(o&&i){if(h.listeners[n][i]&&h.listeners[n][i][o]){for(r in h.listeners[n][i][o])h.off(t,[i,o].join("."),r);delete h.listeners[n][i][o]}}else if(o)for(e in h.listeners[n])for(s in h.listeners[n][e])o===s&&h.off(t,[e,o].join("."));else if(i){if(h.listeners[n][i]){for(s in h.listeners[n][i])h.off(t,[i,s].join("."));delete h.listeners[n][i]}}else{for(e in h.listeners[n])h.off(t,e);delete h.listeners[n],delete h.handlerMap[n]}},h.extend(h.Element,{on:function(t,e,r,n){return h.on(this.node,t,e,r,n),this},off:function(t,e){return h.off(this.node,t,e),this},fire:function(t,e){return t instanceof s.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new h.CustomEvent(t,{detail:e,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),h.Defs=h.invent({create:"defs",inherit:h.Container}),h.G=h.invent({create:"g",inherit:h.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new h.G)}}}),h.Doc=h.invent({create:function(t){t&&("svg"==(t="string"==typeof t?i.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,h.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:h.Container,extend:{namespace:function(){return this.attr({xmlns:h.ns,version:"1.1"}).attr("xmlns:xlink",h.xlink,h.xmlns).attr("xmlns:svgjs",h.svgjs,h.xmlns)},defs:function(){var t;this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=h.adopt(t):this._defs=new h.Defs,this.node.appendChild(this._defs.node));return this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,h.parser.draw.parentNode||this.node.appendChild(h.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,r=y(e.cloneNode(!0));return t?(t.node||t).appendChild(r.node):e.parentNode.insertBefore(r.node,e.nextSibling),r}}}),h.extend(h.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof h.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return 0<t&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof h.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return 0<this.position()&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),h.Mask=h.invent({create:function(){this.constructor.call(this,h.create("mask")),this.targets=[]},inherit:h.Container,extend:{remove:function(){for(var t=this.targets.length-1;0<=t;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],h.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new h.Mask)}}}),h.extend(h.Element,{maskWith:function(t){return this.masker=t instanceof h.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),h.ClipPath=h.invent({create:function(){this.constructor.call(this,h.create("clipPath")),this.targets=[]},inherit:h.Container,extend:{remove:function(){for(var t=this.targets.length-1;0<=t;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new h.ClipPath)}}}),h.extend(h.Element,{clipWith:function(t){return this.clipper=t instanceof h.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),h.Gradient=h.invent({create:function(t){this.constructor.call(this,h.create(t+"Gradient")),this.type=t},inherit:h.Container,extend:{at:function(t,e,r){return this.put(new h.Stop).update(t,e,r)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,r){return"transform"==t&&(t="gradientTransform"),h.Container.prototype.attr.call(this,t,e,r)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),h.extend(h.Gradient,h.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new h.Number(t),fy:new h.Number(e)}):this.attr({x1:new h.Number(t),y1:new h.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new h.Number(t),cy:new h.Number(e)}):this.attr({x2:new h.Number(t),y2:new h.Number(e)})}}),h.extend(h.Defs,{gradient:function(t,e){return this.put(new h.Gradient(t)).update(e)}}),h.Stop=h.invent({create:"stop",inherit:h.Element,extend:{update:function(t){return("number"==typeof t||t instanceof h.Number)&&(t={offset:t,color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new h.Number(t.offset)),this}}}),h.Pattern=h.invent({create:"pattern",inherit:h.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,r){return"transform"==t&&(t="patternTransform"),h.Container.prototype.attr.call(this,t,e,r)}},construct:{pattern:function(t,e,r){return this.defs().pattern(t,e,r)}}}),h.extend(h.Defs,{pattern:function(t,e,r){return this.put(new h.Pattern).update(r).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),h.Shape=h.invent({create:function(t){this.constructor.call(this,t)},inherit:h.Element}),h.Bare=h.invent({create:function(t,e){if(this.constructor.call(this,h.create(t)),e)for(var r in e.prototype)"function"==typeof e.prototype[r]&&(this[r]=e.prototype[r])},inherit:h.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(i.createTextNode(t)),this}}}),h.extend(h.Parent,{element:function(t,e){return this.put(new h.Bare(t,e))}}),h.Symbol=h.invent({create:"symbol",inherit:h.Container,construct:{symbol:function(){return this.put(new h.Symbol)}}}),h.Use=h.invent({create:"use",inherit:h.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,h.xlink)}},construct:{use:function(t,e){return this.put(new h.Use).element(t,e)}}}),h.Rect=h.invent({create:"rect",inherit:h.Shape,construct:{rect:function(t,e){return this.put(new h.Rect).size(t,e)}}}),h.Circle=h.invent({create:"circle",inherit:h.Shape,construct:{circle:function(t){return this.put(new h.Circle).rx(new h.Number(t).divide(2)).move(0,0)}}}),h.extend(h.Circle,h.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),h.Ellipse=h.invent({create:"ellipse",inherit:h.Shape,construct:{ellipse:function(t,e){return this.put(new h.Ellipse).size(t,e).move(0,0)}}}),h.extend(h.Ellipse,h.Rect,h.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),h.extend(h.Circle,h.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new h.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new h.Number(t).divide(2))},size:function(t,e){var r=f(this,t,e);return this.rx(new h.Number(r.width).divide(2)).ry(new h.Number(r.height).divide(2))}}),h.Line=h.invent({create:"line",inherit:h.Shape,extend:{array:function(){return new h.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,r,n){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:r,y2:n}:new h.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var r=f(this,t,e);return this.attr(this.array().size(r.width,r.height).toLine())}},construct:{line:function(t,e,r,n){return h.Line.prototype.plot.apply(this.put(new h.Line),null!=t?[t,e,r,n]:[0,0,0,0])}}}),h.Polyline=h.invent({create:"polyline",inherit:h.Shape,construct:{polyline:function(t){return this.put(new h.Polyline).plot(t||new h.PointArray)}}}),h.Polygon=h.invent({create:"polygon",inherit:h.Shape,construct:{polygon:function(t){return this.put(new h.Polygon).plot(t||new h.PointArray)}}}),h.extend(h.Polyline,h.Polygon,{array:function(){return this._array||(this._array=new h.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new h.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var r=f(this,t,e);return this.attr("points",this.array().size(r.width,r.height))}}),h.extend(h.Line,h.Polyline,h.Polygon,{morphArray:h.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),h.Path=h.invent({create:"path",inherit:h.Shape,extend:{morphArray:h.PathArray,array:function(){return this._array||(this._array=new h.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new h.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var r=f(this,t,e);return this.attr("d",this.array().size(r.width,r.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new h.Path).plot(t||new h.PathArray)}}}),h.Image=h.invent({create:"image",inherit:h.Shape,extend:{load:function(e){if(!e)return this;var r=this,n=new s.Image;return h.on(n,"load",function(){h.off(n);var t=r.parent(h.Pattern);null!==t&&(0==r.width()&&0==r.height()&&r.size(n.width,n.height),t&&0==t.width()&&0==t.height()&&t.size(r.width(),r.height()),"function"==typeof r._loaded&&r._loaded.call(r,{width:n.width,height:n.height,ratio:n.width/n.height,url:e}))}),h.on(n,"error",function(t){h.off(n),"function"==typeof r._error&&r._error.call(r,t)}),this.attr("href",n.src=this.src=e,h.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,r){return this.put(new h.Image).load(t).size(e||0,r||e||0)}}}),h.Text=h.invent({create:function(){this.constructor.call(this,h.create("text")),this.dom.leading=new h.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",h.defaults.attrs["font-family"])},inherit:h.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),r="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-r:e:this.attr("y","number"==typeof t.valueOf()?t+r:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,r=0,n=e.length;r<n;++r)0!=r&&3!=e[r].nodeType&&1==h.adopt(e[r]).dom.newLined&&(t+="\n"),t+=e[r].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{r=0;for(var i=(t=t.split("\n")).length;r<i;r++)this.tspan(t[r]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new h.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=h.utils.map(h.utils.filterSVGElements(t.childNodes),function(t){return h.adopt(t)});return new h.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,r=0,n=this.dom.leading*new h.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?r+=n:(this.attr("dy",n+r),r=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new h.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new h.Text).text(t)},plain:function(t){return this.put(new h.Text).plain(t)}}}),h.Tspan=h.invent({create:"tspan",inherit:h.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(h.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),h.extend(h.Text,h.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(i.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,r=new h.Tspan;return!1===this._build&&this.clear(),e.appendChild(r.node),r.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),h.TextPath=h.invent({create:"textPath",inherit:h.Parent,parent:h.Text,construct:{morphArray:h.PathArray,path:function(t){for(var e=new h.TextPath,r=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+r,h.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),r=null;return e&&(r=e.plot(t)),null==t?r:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return h.adopt(this.node.firstChild)}}}),h.Nested=h.invent({create:function(){this.constructor.call(this,h.create("svg")),this.style("overflow","visible")},inherit:h.Container,construct:{nested:function(){return this.put(new h.Nested)}}}),h.A=h.invent({create:"a",inherit:h.Container,extend:{to:function(t){return this.attr("href",t,h.xlink)},show:function(t){return this.attr("show",t,h.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new h.A).to(t)}}}),h.extend(h.Element,{linkTo:function(t){var e=new h.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),h.Marker=h.invent({create:"marker",inherit:h.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,r){return this.defs().marker(t,e,r)}}}),h.extend(h.Defs,{marker:function(t,e,r){return this.put(new h.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(r)}}),h.extend(h.Line,h.Polyline,h.Polygon,h.Path,{marker:function(t,e,r,n){var i=["marker"];return"all"!=t&&i.push(t),i=i.join("-"),t=e instanceof h.Marker?e:this.doc().marker(e,r,n),this.attr(i,t)}});var n={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function a(t,e,r,n){return r+n.replace(h.regex.dots," .")}function o(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function u(t){return t.charAt(0).toUpperCase()+t.slice(1)}function l(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function f(t,e,r){if(null==e||null==r){var n=t.bbox();null==e?e=n.width/n.height*r:null==r&&(r=n.height/n.width*e)}return{width:e,height:r}}function p(t,e,r){return{x:e*t.a+r*t.c+0,y:e*t.b+r*t.d+0}}function b(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function d(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function y(t){for(var e=t.childNodes.length-1;0<=e;e--)t.childNodes[e]instanceof s.SVGElement&&y(t.childNodes[e]);return h.adopt(t).id(h.eid(t.nodeName))}function v(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function m(t){return 1e-37<Math.abs(t)?t:0}["fill","stroke"].forEach(function(e){var r,t={};t[e]=function(t){if(void 0===t)return this;if("string"==typeof t||h.Color.isRgb(t)||t&&"function"==typeof t.fill)this.attr(e,t);else for(r=n[e].length-1;0<=r;r--)null!=t[n[e][r]]&&this.attr(n.prefix(e,n[e][r]),t[n[e][r]]);return this},h.extend(h.Element,h.FX,t)}),h.extend(h.Element,h.FX,{rotate:function(t,e,r){return this.transform({rotation:t,cx:e,cy:r})},skew:function(t,e,r,n){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:r}):this.transform({skewX:t,skewY:e,cx:r,cy:n})},scale:function(t,e,r,n){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:r}):this.transform({scaleX:t,scaleY:e,cx:r,cy:n})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new h.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new h.Number(t).plus(this instanceof h.FX?0:this.x()),!0)},dy:function(t){return this.y(new h.Number(t).plus(this instanceof h.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),h.extend(h.Rect,h.Ellipse,h.Circle,h.Gradient,h.FX,{radius:function(t,e){var r=(this._target||this).type;return"radial"==r||"circle"==r?this.attr("r",new h.Number(t)):this.rx(t).ry(null==e?t:e)}}),h.extend(h.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),h.extend(h.Parent,h.Text,h.Tspan,h.FX,{font:function(t,e){if("object"==typeof t)for(e in t)this.font(e,t[e]);return"leading"==t?this.leading(e):"anchor"==t?this.attr("text-anchor",e):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e):this.attr(t,e)}}),h.Set=h.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,r=[].slice.call(arguments);for(t=0,e=r.length;t<e;t++)this.members.push(r[t]);return this},remove:function(t){var e=this.index(t);return-1<e&&this.members.splice(e,1),this},each:function(t){for(var e=0,r=this.members.length;e<r;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return 0<=this.index(t)},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new h.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each(function(){t=t.merge(this.rbox(this.doc()))}),t}},construct:{set:function(t){return new h.Set(t)}}}),h.FX.Set=h.invent({create:function(t){this.set=t}}),h.Set.inherit=function(){var t=[];for(var e in h.Shape.prototype)"function"==typeof h.Shape.prototype[e]&&"function"!=typeof h.Set.prototype[e]&&t.push(e);for(var e in t.forEach(function(r){h.Set.prototype[r]=function(){for(var t=0,e=this.members.length;t<e;t++)this.members[t]&&"function"==typeof this.members[t][r]&&this.members[t][r].apply(this.members[t],arguments);return"animate"==r?this.fx||(this.fx=new h.FX.Set(this)):this}}),t=[],h.FX.prototype)"function"==typeof h.FX.prototype[e]&&"function"!=typeof h.FX.Set.prototype[e]&&t.push(e);t.forEach(function(r){h.FX.Set.prototype[r]=function(){for(var t=0,e=this.set.members.length;t<e;t++)this.set.members[t].fx[r].apply(this.set.members[t].fx,arguments);return this}})},h.extend(h.Element,{data:function(e,t,r){if("object"==typeof e)for(t in e)this.data(t,e[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+e))}catch(t){return this.attr("data-"+e)}else this.attr("data-"+e,null===t?null:!0===r||"string"==typeof t||"number"==typeof t?t:JSON.stringify(t));return this}}),h.extend(h.Element,{remember:function(t,e){if("object"==typeof t)for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;0<=t;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),h.get=function(t){var e=i.getElementById(function(t){var e=(t||"").toString().match(h.regex.reference);if(e)return e[1]}(t)||t);return h.adopt(e)},h.select=function(t,e){return new h.Set(h.utils.map((e||i).querySelectorAll(t),function(t){return h.adopt(t)}))},h.extend(h.Parent,{select:function(t){return h.select(t,this.node)}});var _="abcdef".split("");if("function"!=typeof s.CustomEvent){var x=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var r=i.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r};x.prototype=s.Event.prototype,h.CustomEvent=x}else h.CustomEvent=s.CustomEvent;return function(i){for(var o=0,t=["moz","webkit"],e=0;e<t.length&&!s.requestAnimationFrame;++e)i.requestAnimationFrame=i[t[e]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[t[e]+"CancelAnimationFrame"]||i[t[e]+"CancelRequestAnimationFrame"];i.requestAnimationFrame=i.requestAnimationFrame||function(t){var e=(new Date).getTime(),r=Math.max(0,16-(e-o)),n=i.setTimeout(function(){t(e+r)},r);return o=e+r,n},i.cancelAnimationFrame=i.cancelAnimationFrame||i.clearTimeout}(s),h},"function"==typeof define&&define.amd?define(function(){return i(n,n.document)}):"object"==typeof r?e.exports=n.document?i(n,n.document):function(t){return i(t,t.document)}:n.SVG=i(n,n.document)},{}],202:[function(t,e,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),function(t){var i=function(t,e,r,n){void 0===n&&(n={}),this.categoryId=t,this.startIndex=e,this.endIndex=r,this.attributes=n};t.CreateLabelAction=i,t.Create=function(t,e,r,n){return new i(t,e,r,n)};var e=function(t){this.id=t};t.DeleteLabelAction=e,t.Delete=function(t){return new e(t)};var n=function(t,e,r){void 0===r&&(r={}),this.labelId=t,this.categoryId=e,this.attributes=r};t.UpdateLabelAction=n,t.Update=function(t,e,r){return new n(t,e,r)}}((n=r.Action||(r.Action={})).Label||(n.Label={})),function(t){var n=function(t,e,r){this.categoryId=t,this.fromId=e,this.toId=r};t.CreateConnectionAction=n,t.Create=function(t,e,r){return new n(t,e,r)};var e=function(t){this.id=t};t.DeleteConnectionAction=e,t.Delete=function(t){return new e(t)};var r=function(t,e){this.connectionId=t,this.categoryId=e};t.UpdateConnectionAction=r,t.Update=function(t,e){return new r(t,e)}}(n.Connection||(n.Connection={}))},{}],203:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("events"),s=t("./Store/Store"),u=t("./View/View"),c=t("./Dispatcher/Dispatcher"),a=t("./View/EventHandler/TextSelectionHandler"),l=t("./View/EventHandler/TwoLabelsClickedHandler");o.EventEmitter.defaultMaxListeners=1e4;var h=function(o){function t(e,t,r){var n=o.call(this)||this;if(n.htmlElement=t,n.config=r,n.store=new s.Store,n.config){var i=n.config;void 0!==i.maxLineWidth&&(n.store.config.maxLineWidth=i.maxLineWidth),void 0!==i.allowMultipleLabel&&(n.store.config.allowMultipleLabel=i.allowMultipleLabel)}if(n.view=new u.View(t,n),n.dispatcher=new c.Dispatcher(n.store),n.textSelectionHandler=new a.TextSelectionHandler(n),n.twoLabelsClickedHandler=new l.TwoLabelsClickedHandler(n),"string"==typeof e)try{JSON.parse(e),n.store.json=e}catch(t){n.store.text=e}else n.store.json=e;return n}return i(t,o),t.prototype.applyAction=function(t){this.dispatcher.dispatch(t)},t.prototype.remove=function(){this.htmlElement.innerHTML=""},t}(o.EventEmitter);r.Annotator=h},{"./Dispatcher/Dispatcher":204,"./Store/Store":212,"./View/EventHandler/TextSelectionHandler":218,"./View/EventHandler/TwoLabelsClickedHandler":219,"./View/View":220,events:1}],204:[function(t,e,r){"use strict";var p=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},b=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var d=t("../Store/Entities/Label"),y=t("../Action/Action"),v=t("../Store/Entities/Connection"),n=function(){function t(t){this.store=t}return t.prototype.dispatch=function(t){var e,r,n,i;if(t instanceof y.Action.Label.CreateLabelAction){if(!this.store.config.allowMultipleLabel)try{for(var o=p(this.store.labelRepo),s=o.next();!s.done;s=o.next()){var u=b(s.value,2);u[0];if((c=u[1]).startIndex===t.startIndex&&c.endIndex===t.endIndex)return}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}this.store.labelRepo.add(new d.Label.Entity(null,t.categoryId,t.startIndex,t.endIndex,this.store,t.attributes))}else if(t instanceof y.Action.Label.DeleteLabelAction)this.store.labelRepo.delete(t.id);else if(t instanceof y.Action.Label.UpdateLabelAction){var c,a=(c=this.store.labelRepo.get(t.labelId)).allConnections;this.store.labelRepo.delete(t.labelId),this.store.labelRepo.add(new d.Label.Entity(c.id,t.categoryId,c.startIndex,c.endIndex,this.store,t.attributes));try{for(var l=p(a),h=l.next();!h.done;h=l.next()){var f=h.value;this.store.connectionRepo.delete(f),this.store.connectionRepo.add(f)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}else if(t instanceof y.Action.Connection.CreateConnectionAction)this.store.connectionRepo.add(new v.Connection.Entity(null,t.categoryId,t.fromId,t.toId,this.store));else if(t instanceof y.Action.Connection.DeleteConnectionAction)this.store.connectionRepo.delete(t.id);else if(t instanceof y.Action.Connection.UpdateConnectionAction){f=this.store.connectionRepo.get(t.connectionId);this.store.connectionRepo.delete(t.connectionId),this.store.connectionRepo.add(new v.Connection.Entity(f.id,t.categoryId,f.from.id,f.to.id,this.store))}},t}();r.Dispatcher=n},{"../Action/Action":202,"../Store/Entities/Connection":207,"../Store/Entities/Label":209}],205:[function(t,e,n){(function(r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.assert=function(t,e){if("development"===r.env.NODE_ENV&&!1===t)throw Error(":"+e)}}).call(this,t("_process"))},{_process:2}],206:[function(t,e,r){"use strict";var u=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},c=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var n,i,o=t("events"),s=t("rxjs"),a=t("./Assert");n=r.Base||(r.Base={}),i=function(){function t(t){this.root=t,this.entities=new Map,this.eventEmitter=new o.EventEmitter,this.created$=s.fromEvent(this.eventEmitter,"created"),this.updated$=s.fromEvent(this.eventEmitter,"updated"),this.deleted$=s.fromEvent(this.eventEmitter,"deleted"),this.nextId=0}return Object.defineProperty(t.prototype,"json",{get:function(){var e,t,r=[];try{for(var n=u(this),i=n.next();!i.done;i=n.next()){var o=c(i.value,2),s=(o[0],o[1]);"json"in s?r.push(s.json):r.push(JSON.parse(JSON.stringify(s)))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.nextId},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return a.assert(this.has(t),"There's no Entity which id="+t+" in repo!"),this.entities.get(t)},t.prototype.has=function(t){return this.entities.has(t)},t.prototype.set=function(t,e){var r=this.has(t);return this.entities.set(t,e),r?this.eventEmitter.emit("updated",t):(this.nextId<t+1&&(this.nextId=t+1),this.eventEmitter.emit("created",t)),this},t.prototype.add=function(t){if("id"in t){var e=t.id;return a.assert(!this.has(e),"reAdd "+e+"!"),null===e?(t.id=this.nextId,this.add(t)):(this.set(e,t),e)}var r=this.nextId;return this.set(r,t),r},t.prototype[Symbol.iterator]=function(){return this.entities[Symbol.iterator]()},t.prototype.delete=function(t){if("number"==typeof t&&this.has(t)){var e=this.entities.get(t);return this.entities.delete(t),this.eventEmitter.emit("deleted",e),!0}return"number"!=typeof t&&"id"in t&&this.delete(t.id)},t}(),n.Repository=i},{"./Assert":205,events:1,rxjs:3}],207:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../../Infrastructure/Repository");!function(t){var r=function(){function t(t,e,r,n,i){this.id=t,this.categoryId=e,this.fromId=r,this.toId=n,this.root=i}return Object.defineProperty(t.prototype,"category",{get:function(){return this.root.connectionCategoryRepo.get(this.categoryId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this.root.labelRepo.get(this.fromId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.root.labelRepo.get(this.toId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sameLineLabel",{get:function(){return this.from.startIndex<this.to.startIndex?this.from:this.to},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mayNotSameLineLabel",{get:function(){return this.from.startIndex>=this.to.startIndex?this.from:this.to},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"json",{get:function(){return{id:this.id,categoryId:this.categoryId,fromId:this.fromId,toId:this.toId}},enumerable:!0,configurable:!0}),t}();t.Entity=r;var e=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(o.Base.Repository);function n(t,e){return new r(parseInt(t.id),parseInt(t.categoryId),parseInt(t.fromId),parseInt(t.toId),e)}t.Repository=e,t.construct=n,t.constructAll=function(t,e){return t.map(function(t){return n(t,e)})}}(r.Connection||(r.Connection={}))},{"../../Infrastructure/Repository":206}],208:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../../Infrastructure/Repository");!function(t){var e=function(t,e,r){this.id=t,this.text=e,this.attributes=r};t.Entity=e;var r=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(o.Base.Repository);function n(t){return t.attributes||(t.attributes=new Object),new e(parseInt(t.id),t.text,t.attributes)}t.Repository=r,t.construct=n,t.constructAll=function(t){return t.map(n)}}(r.ConnectionCategory||(r.ConnectionCategory={}))},{"../../Infrastructure/Repository":206}],209:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},l=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../../Infrastructure/Repository"),s=t("rxjs");!function(t){var r=function(){function t(t,e,r,n,i,o){void 0===o&&(o={}),this.id=t,this.categoryId=e,this.startIndex=r,this.endIndex=n,this.root=i,this.attributes=o}return Object.defineProperty(t.prototype,"category",{get:function(){return this.root.labelCategoryRepo.get(this.categoryId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"json",{get:function(){return{id:this.id,categoryId:this.categoryId,startIndex:this.startIndex,endIndex:this.endIndex,attributes:this.attributes}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sameLineConnections",{get:function(){var e,t,r=[];try{for(var n=a(this.root.connectionRepo),i=n.next();!i.done;i=n.next()){var o=l(i.value,2),s=(o[0],o[1]);s.sameLineLabel===this&&r.push(s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allConnections",{get:function(){var e,t,r=new Set;try{for(var n=a(this.root.connectionRepo),i=n.next();!i.done;i=n.next()){var o=l(i.value,2),s=(o[0],o[1]);s.from!==this&&s.to!==this||r.add(s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!0,configurable:!0}),t}();t.Entity=r;var e=function(u){function t(t){var e=u.call(this,t)||this;return e.readyToCreate$=s.fromEvent(e.eventEmitter,"readyToCreate"),e}return i(t,u),t.prototype.set=function(t,e){return this.eventEmitter.emit("readyToCreate",e),u.prototype.set.call(this,t,e),this},t.prototype.getEntitiesInRange=function(t,e){var r,n,i=[];try{for(var o=a(this),s=o.next();!s.done;s=o.next()){var u=l(s.value,2),c=(u[0],u[1]);t<=c.startIndex&&c.endIndex<=e&&i.push(c)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.prototype.delete=function(t){var e,r;"number"!=typeof t&&(t=t.id);var n=this.get(t);try{for(var i=a(n.allConnections),o=i.next();!o.done;o=i.next()){var s=o.value;this.root.connectionRepo.delete(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return u.prototype.delete.call(this,t)},t}(o.Base.Repository);function n(t,e){return new r(parseInt(t.id),parseInt(t.categoryId),parseInt(t.startIndex),parseInt(t.endIndex),e,t.attributes)}t.Repository=e,t.construct=n,t.constructAll=function(t,e){return t.map(function(t){return n(t,e)})}}(r.Label||(r.Label={}))},{"../../Infrastructure/Repository":206,rxjs:3}],210:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var o=t("../../Infrastructure/Repository");!function(t){var e=function(t,e,r,n,i){this.id=t,this.text=e,this.color=r,this.borderColor=n,this.attributes=i};t.Entity=e;var r=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(o.Base.Repository);function n(t){return!t.borderColor&&t["border-color"]&&(t.borderColor=t["border-color"]),t.color||(t.color="#ff9d61"),t.borderColor||(t.borderColor="#000080"),t.attributes||(t.attributes=new Object),new e(parseInt(t.id),t.text,t.color,t.borderColor,t.attributes)}t.Repository=r,t.construct=n,t.constructAll=function(t){return t.map(n)}}(r.LabelCategory||(r.LabelCategory={}))},{"../../Infrastructure/Repository":206}],211:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("../../Infrastructure/Repository"),u=t("../../Infrastructure/Assert");!function(t){var o=function(){function t(t,e,r,n,i){this.id=t,this.allContent=e,this.startIndex=r,this.endIndex=n,this.root=i}return Object.defineProperty(t.prototype,"text",{get:function(){return this.allContent.slice(this.startIndex,this.endIndex).replace("\n"," ")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelsInThisLine",{get:function(){return this.root.labelRepo.getEntitiesInRange(this.startIndex,this.endIndex)},enumerable:!0,configurable:!0}),t.prototype.isLabelInThisLine=function(t){return"number"==typeof t&&(t=this.root.labelRepo.get(t)),this.startIndex<=t.startIndex&&t.endIndex<=this.endIndex},t.prototype.isConnectionInThisLine=function(t){return"number"==typeof t&&(t=this.root.connectionRepo.get(t)),this.isLabelInThisLine(t.sameLineLabel)},t}();t.Entity=o;var e=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(s.Base.Repository);t.Repository=e,t.construct=function(t){for(var e=[],r=t.content.trim();-1!==r.indexOf("");)r=r.replace(""," ");for(;-1!==r.indexOf("  ");)r=r.replace("  "," ");for(var n=0;n<r.length;){for(;" "===r[n]||"\n"===r[n];)++n;for(var i=n;!/[!.?"\n]/.test(r[i])&&i<r.length&&i-n<t.config.maxLineWidth;)++i;for(;/[!.?"a-zA-Z]/.test(r[i])&&i<r.length;)++i;if(u.assert(n!==i,"startIndex should never equals to endIndex in divideSentences!"),n===i)break;e.push(new o(null,r,n,i,t)),n=i}return e}}(r.Line||(r.Line={}))},{"../../Infrastructure/Assert":205,"../../Infrastructure/Repository":206}],212:[function(t,e,r){"use strict";var l=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},h=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var n=t("./Entities/LabelCategory"),i=t("./Entities/Label"),o=t("./Entities/ConnectionCategory"),s=t("./Entities/Connection"),u=t("./Entities/Line"),c=t("rxjs"),a=t("events"),f=function(){function t(){var e=this;this.eventEmitter=new a.EventEmitter,this.lineRepo=new u.Line.Repository(this),this.labelCategoryRepo=new n.LabelCategory.Repository(this),this.labelRepo=new i.Label.Repository(this),this.connectionCategoryRepo=new o.ConnectionCategory.Repository(this),this.connectionRepo=new s.Connection.Repository(this),this.config={maxLineWidth:80,allowMultipleLabel:!0},this.ready$=c.fromEvent(this.eventEmitter,"ready"),this.labelRepo.readyToCreate$.subscribe(function(t){e.mergeForLabel(t)})}return Object.defineProperty(t.prototype,"text",{set:function(t){this.json={content:t,labelCategories:[],labels:[],connectionCategories:[],connections:[]}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"json",{get:function(){var t={};return t.content=this.content,t.labelCategories=this.labelCategoryRepo.json,t.labels=this.labelRepo.json,t.connectionCategories=this.connectionCategoryRepo.json,t.connections=this.connectionRepo.json,t},set:function(t){var e,r=this;e="string"==typeof t?JSON.parse(t):t,this.content=e.content,u.Line.construct(this).map(function(t){return r.lineRepo.add(t)}),n.LabelCategory.constructAll(e.labelCategories).map(function(t){return r.labelCategoryRepo.add(t)}),i.Label.constructAll(e.labels,this).map(function(t){return r.labelRepo.add(t)}),o.ConnectionCategory.constructAll(e.connectionCategories).map(function(t){return r.connectionCategoryRepo.add(t)}),s.Connection.constructAll(e.connections,this).map(function(t){return r.connectionRepo.add(t)}),this.eventEmitter.emit("ready")},enumerable:!0,configurable:!0}),t.prototype.mergeForLabel=function(t){var e,r,n=-1,i=-1;try{for(var o=l(this.lineRepo),s=o.next();!s.done;s=o.next()){var u=h(s.value,2),c=u[0],a=u[1];a.startIndex<=t.startIndex&&t.startIndex<a.endIndex&&(n=c),a.startIndex<t.endIndex&&t.endIndex<=a.endIndex&&(i=c)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}n!==i&&this.mergeLines(n,i)},t.prototype.mergeLines=function(t,e){for(var r=this.lineRepo.get(t),n=this.lineRepo.get(e),i=t+1;i<=e;++i)this.lineRepo.delete(i);this.lineRepo.set(t,new u.Line.Entity(t,r.allContent,r.startIndex,n.endIndex,this))},t}();r.Store=f},{"./Entities/Connection":207,"./Entities/ConnectionCategory":208,"./Entities/Label":209,"./Entities/LabelCategory":210,"./Entities/Line":211,events:1,rxjs:3}],213:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("./TopContextUser"),s=t("../../Infrastructure/Repository"),u=t("rxjs/operators"),c=t("../../Infrastructure/Assert");!function(t){var e=function(i){function t(t,e,r){var n=i.call(this)||this;return n.id=t,n.store=e,n.context=r,n.svgElement=null,n.textElement=null,n.lineElement=null,n.positionChangedSubscription=null,n.rerenderedSubscription=null,n}return o(t,i),Object.defineProperty(t.prototype,"x",{get:function(){return(this.from.annotationElementBox.container.x+this.to.annotationElementBox.container.x+this.to.annotationElementBox.container.width-this.width)/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this.context.attachTo.root.labelViewRepo.get(this.store.from.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.context.attachTo.root.labelViewRepo.get(this.store.to.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prior",{get:function(){return this.context.attachTo.root.labelViewRepo.get(this.store.sameLineLabel.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"posterior",{get:function(){return this.context.attachTo.root.labelViewRepo.get(this.store.mayNotSameLineLabel.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){return this.store.category},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inline",{get:function(){return this.posterior.context===this.prior.context},enumerable:!0,configurable:!0}),t.prototype.initPosition=function(){this.width=this.textElement.bbox().width},t.prototype.preRender=function(){var e=this;this.svgElement=this.context.svgElement.group(),this.textElement=this.svgElement.text(this.category.text).font({size:12}),this.textElement.style({"-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),this.svgElement.on("contextmenu",function(t){e.context.attachTo.root.root.emit("connectionRightClicked",e.id,t.clientX,t.clientY),t.preventDefault()}),this.svgElement.on("dblclick",function(t){e.context.attachTo.root.root.emit("connectionDblClicked",e.id,t.clientX,t.clientY),t.preventDefault()}),this.svgElement.addClass("connection-view"),this.svgElement.attr("x",""),this.svgElement.attr("y",""),this.textElement.attr("x",""),this.textElement.attr("y","")},t.prototype.render=function(){this.svgElement.rect(this.width,12).y(5).fill("white").back(),this.svgElement.x(this.x),this.svgElement.y(this.y)},t.prototype.rerenderLines=function(){c.assert(null!==this.svgElement,"should already unsub"),this.svgElement.x(this.x),this.svgElement.y(this.y),this.lineElement.remove(),this.renderLines()},t.prototype.eliminateOverlapping=function(){this.prior.context===this.posterior.context?this.layer=Math.max(this.prior.layer,this.posterior.layer)+1:this.layer=this.prior.layer+1,i.prototype.eliminateOverlapping.call(this)},t.prototype.postRender=function(){null!==this.lineElement&&this.lineElement.remove(),this.renderLines()},t.prototype.remove=function(){this.textElement.remove(),this.lineElement.remove(),this.svgElement.remove(),null!==this.positionChangedSubscription&&this.positionChangedSubscription.unsubscribe(),this.rerenderedSubscription.unsubscribe(),this.textElement=null,this.lineElement=null,this.svgElement=null},t.prototype.renderLines=function(){var e=this,t=0,r=0,n=0,i=null;this.inline?(r=this.from.y-5,t=this.y+20.8-11,n=this.to.y-5,i=this.context.svgElement):(r=this.from.y+this.from.context.y-4,t=this.y+this.context.y+11,n=this.to.y+this.to.context.y-5,i=this.svgElement.doc()),this.from.annotationElementBox.container.x<this.to.annotationElementBox.container.x?this.lineElement=i.path("\n                M "+this.from.annotationElementBox.container.x+"                    "+r+"\n                C "+(this.from.annotationElementBox.container.x-10)+"               "+t+",\n                  "+(this.from.annotationElementBox.container.x-10)+"               "+t+",\n                  "+this.from.annotationElementBox.container.x+"                    "+t+"\n                L "+this.x+"                         "+t+"\n                M "+(this.x+this.width)+"            "+t+"\n                L "+(this.to.annotationElementBox.container.x+this.to.annotationElementBox.container.width)+"      "+t+"\n                C "+(this.to.annotationElementBox.container.x+this.to.annotationElementBox.container.width+10)+" "+t+",\n                  "+(this.to.annotationElementBox.container.x+this.to.annotationElementBox.container.width+10)+" "+t+",\n                  "+(this.to.annotationElementBox.container.x+this.to.annotationElementBox.container.width)+"      "+n+"\n                ").stroke("black").fill("transparent"):this.lineElement=i.path("\n                M "+(this.from.annotationElementBox.container.x+this.from.annotationElementBox.container.width)+"      "+r+"\n                C "+(this.from.annotationElementBox.container.x+this.from.annotationElementBox.container.width+10)+" "+t+",\n                  "+(this.from.annotationElementBox.container.x+this.from.annotationElementBox.container.width+10)+" "+t+",\n                  "+(this.from.annotationElementBox.container.x+this.from.annotationElementBox.container.width)+"      "+t+"\n                L "+(this.x+this.width)+"                "+t+"\n                M "+this.x+"                             "+t+"\n                L "+this.to.annotationElementBox.container.x+"                          "+t+"\n                C "+(this.to.annotationElementBox.container.x-10)+"                     "+t+",\n                  "+(this.to.annotationElementBox.container.x-10)+"                     "+t+",\n                  "+this.to.annotationElementBox.container.x+"                          "+n+"\n                ").stroke("black").fill("transparent"),this.lineElement.marker("end",5,5,function(t){t.polyline("0,0 5,2.5 0,5 0.2,2.5")}),this.lineElement.back(),this.lineElement.on("mouseover",function(){e.lineElement.stroke({width:1.5,color:"red"})}),this.svgElement.on("mouseover",function(){e.lineElement.stroke({width:1.5,color:"red"})}),this.lineElement.on("mouseout",function(){e.lineElement.stroke({width:1,color:"black"})}),this.svgElement.on("mouseout",function(){e.lineElement.stroke({width:1,color:"black"})}),null!==this.positionChangedSubscription&&this.positionChangedSubscription.unsubscribe(),null!==this.rerenderedSubscription&&this.rerenderedSubscription.unsubscribe(),this.posterior.context!==this.prior.context&&(this.positionChangedSubscription=this.posterior.context.positionChanged$.subscribe(function(){c.assert(null!==e.svgElement,"should already unsub"),e.rerenderLines()})),this.rerenderedSubscription=this.context.attachTo.root.lineViewRepo.rerendered$.pipe(u.filter(function(t){return t===e.posterior.context.attachTo.id})).subscribe(function(){return e.rerenderLines()})},t}(i.TopContextUser);t.Entity=e;var r=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.delete=function(t){return"number"!=typeof t&&(t=t.id),this.has(t)&&this.get(t).remove(),e.prototype.delete.call(this,t)},t}(s.Base.Repository);t.Repository=r}(r.ConnectionView||(r.ConnectionView={}))},{"../../Infrastructure/Assert":205,"../../Infrastructure/Repository":206,"./TopContextUser":217,"rxjs/operators":200}],214:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("./TopContextUser"),s=t("../../Infrastructure/Repository");!function(t){var e=function(i){function t(t,e,r){var n=i.call(this)||this;return n.id=t,n.store=e,n.context=r,n.svgElement=null,n.textElement=null,n.textWidth=null,n.layer=1,n}return o(t,i),Object.defineProperty(t.prototype,"x",{get:function(){return Math.min(this.highlightElementBox.x,this.annotationElementBox.container.x)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalX",{get:function(){return this.annotationElement.children()[0].node.getBoundingClientRect().left+this.annotationElementBox.container.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalY",{get:function(){return this.annotationElement.children()[0].node.getBoundingClientRect().top+this.textElement.node.clientHeight/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.max(this.highlightElementBox.width,this.annotationElementBox.container.width)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlightElementBox",{get:function(){var t=this.store.startIndex-this.context.attachTo.store.startIndex,e=this.store.endIndex-this.context.attachTo.store.startIndex,r=this.context.attachTo,n=r.xCoordinateOfChar[t],i=r.xCoordinateOfChar[e];return{x:n,y:r.y,width:i-n,height:20}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"annotationElementBox",{get:function(){var t=this.highlightElementBox,e=t.x+t.width/2-this.textWidth/2;return{text:{x:e,width:this.textWidth},container:{x:e-3,y:t.y,width:this.textWidth+6}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){return this.store.category},enumerable:!0,configurable:!0}),t.prototype.bracket=function(t,e,r,n,i,o){void 0===o&&(o=.6);var s=t-r,u=e-n,c=Math.sqrt(s*s+u*u),a=t+o*i*(u/=c),l=e-o*i*(s/=c),h=t-.25*c*s+(1-o)*i*u,f=e-.25*c*u-(1-o)*i*s,p=t-.5*c*s+i*u,b=e-.5*c*u-i*s,d=r+o*i*u,y=n-o*i*s,v=t-.75*c*s+(1-o)*i*u,m=e-.75*c*u-(1-o)*i*s;return this.annotationElement.path("M"+t+","+e+"Q"+a+","+l+","+h+","+f+"T"+p+","+b+"M"+r+","+n+"Q"+d+","+y+","+v+","+m+"T"+p+","+b).fill("none").stroke({color:this.category.borderColor,width:1})},t.prototype.initPosition=function(){this.textWidth=document.getElementById(this.textElement.id()).getBoundingClientRect().width},t.prototype.preRender=function(){this.svgElement=this.context.svgElement.group(),this.annotationElement=this.svgElement.group().back(),this.textElement=this.annotationElement.text(this.category.text).font({size:12}),this.svgElement.attr("x",""),this.svgElement.attr("y",""),this.annotationElement.attr("x",""),this.annotationElement.attr("y",""),this.textElement.attr("x",""),this.textElement.attr("y","")},t.prototype.removeElement=function(){this.svgElement.remove(),this.svgElement=null,this.textElement.remove(),this.textElement=null},t.prototype.render=function(){this.renderHighlight(),this.renderAnnotation()},t.prototype.renderHighlight=function(){var t=this.highlightElementBox;this.highLightElement=this.svgElement.rect(t.width,t.height),this.highLightElement.fill({color:this.category.color,opacity:.5}).dx(t.x)},t.prototype.renderAnnotation=function(){var e=this,t=this.highlightElementBox,r=this.annotationElementBox;this.annotationElement.rect(r.container.width,18).radius(3,3).fill({color:this.category.color}).stroke(this.category.borderColor).back(),this.annotationElement.x(r.container.x),this.textElement.front(),this.textElement.x(3).y(-2),this.bracket(t.width-(r.container.x-t.x),26,0-(r.container.x-t.x),26,8),this.textElement.style({"-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),this.annotationElement.y(this.y-5),this.annotationElement.style({cursor:"pointer"}),this.annotationElement.addClass("label-view"),this.annotationElement.on("click",function(t){e.context.attachTo.root.root.emit("labelClicked",e.id),t.preventDefault()}),this.annotationElement.on("dblclick",function(t){e.context.attachTo.root.root.emit("labelDblClicked",e.id),t.preventDefault()}),this.annotationElement.on("contextmenu",function(t){e.context.attachTo.root.root.emit("labelRightClicked",e.id,t.clientX,t.clientY),t.preventDefault()})},t}(i.TopContextUser);t.Entity=e;var r=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.delete=function(t){return"number"!=typeof t&&(t=t.id),this.has(t)&&this.has(t)&&this.get(t).removeElement(),e.prototype.delete.call(this,t)},t}(s.Base.Repository);t.Repository=r}(r.LabelView||(r.LabelView={}))},{"../../Infrastructure/Repository":206,"./TopContextUser":217}],215:[function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},h=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../../Infrastructure/Repository"),s=t("./TopContext"),u=t("rxjs/operators"),c=t("rxjs");!function(t){var a=function(){function t(t,e,r){var n=this;this.id=t,this.store=e,this.root=r,this.svgElement=null,this.topContext=null,this.xCoordinateOfChar=[],this.topContext=new s.TopContext(this),r.store.lineRepo.updated$.pipe(u.filter(function(t){return t===n.id})).subscribe(function(){n.store=r.store.lineRepo.get(t),n.rerender()})}return Object.defineProperty(t.prototype,"prev",{get:function(){for(var t=this.root.lineViewRepo[Symbol.iterator](),e=this.root.lineViewRepo[Symbol.iterator](),r=e.next().value[0],n=null;r!==this.id;)n=t.next().value[1],r=e.next().value[0];return n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFirst",{get:function(){var e,t;try{for(var r=l(this.root.lineViewRepo),n=r.next();!n.done;n=r.next()){var i=h(n.value,2),o=i[0];i[1];if(o<this.id)return!1}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLast",{get:function(){var e,t;try{for(var r=l(this.root.lineViewRepo),n=r.next();!n.done;n=r.next()){var i=h(n.value,2),o=i[0];i[1];if(o>this.id)return!1}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return!0},enumerable:!0,configurable:!0}),t.prototype.remove=function(){var t=-this.topContext.height-20.8;this.topContext.remove(),this.svgElement.node.remove(),this.layoutAfterSelf(t)},t.prototype.render=function(t){var e=this;this.svgElement=t.tspan(this.store.text).newLine(),(this.svgElement.AnnotatorElement=this).svgElement.on("mouseup",function(){e.root.root.textSelectionHandler.textSelected()})},t.prototype.renderTopContext=function(){this.topContext.render()},t.prototype.layout=function(t){void 0===t&&(t=this.topContext.height+20.8),this.svgElement.dy(t),this.isLast&&this.root.resize()},Object.defineProperty(t.prototype,"rendered",{get:function(){return null!==this.svgElement},enumerable:!0,configurable:!0}),t.prototype.layoutAfterSelf=function(t){for(var e=this.id+1;e<this.root.lineViewRepo.length;++e)this.root.lineViewRepo.has(e)&&this.root.lineViewRepo.get(e).rendered&&this.root.lineViewRepo.get(e).topContext.layout(t)},t.prototype.calculateInitialCharPositions=function(){this.xCoordinateOfChar=[],this.y=this.svgElement.node.getExtentOfChar(0).y;for(var t=0;t<this.store.text.length;++t)this.xCoordinateOfChar.push(this.svgElement.node.getExtentOfChar(t).x);var e=this.svgElement.node.getExtentOfChar(this.store.text.length-1);this.xCoordinateOfChar.push(e.x+e.width)},t.prototype.Test=function(){var t=this.topContext.height;this.topContext.remove(),this.topContext=new s.TopContext(this),this.topContext.preRender(this.svgElement.doc()),this.topContext.initPosition(),this.layout(),this.layoutAfterSelf(this.topContext.height-t),this.renderTopContext(),this.topContext.layout(null),this.topContext.postRender()},t.prototype.rerender=function(){var t=this.topContext.height;this.topContext.remove(),this.svgElement.clear(),this.svgElement.plain(this.store.text),this.calculateInitialCharPositions(),this.topContext=new s.TopContext(this),this.topContext.preRender(this.svgElement.doc()),this.topContext.initPosition(),this.layout(),this.layoutAfterSelf(this.topContext.height-t),this.renderTopContext(),this.topContext.layout(null),this.topContext.postRender(),this.topContext.attachTo.root.lineViewRepo.rerendered(this.id)},t}();t.Entity=a;var e=function(r){function t(t){var e=r.call(this,t)||this;return e.rerendered$=null,e.rerendered$=c.fromEvent(e.eventEmitter,"rerendered"),e}return i(t,r),t.prototype.rerendered=function(t){this.eventEmitter.emit("rerendered",t)},t.prototype.delete=function(t){return"number"!=typeof t&&(t=t.id),this.has(t)&&this.get(t).remove(),r.prototype.delete.call(this,t)},t}(o.Base.Repository);t.Repository=e,t.constructAll=function(t){var e,r,n=[];try{for(var i=l(t.store.lineRepo),o=i.next();!o.done;o=i.next()){var s=h(o.value,2),u=s[0],c=s[1];n.push(new a(u,c,t))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}}(r.LineView||(r.LineView={}))},{"../../Infrastructure/Repository":206,"./TopContext":216,rxjs:3,"rxjs/operators":200}],216:[function(t,e,r){"use strict";var d=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}};Object.defineProperty(r,"__esModule",{value:!0});var b=t("events"),y=t("rxjs"),v=t("./LabelView"),m=t("./ConnectionView"),n=t("../../Infrastructure/Assert"),_=t("rxjs/operators"),i=function(){function t(t){var e,r,n,i,u=this;this.attachTo=t,this.labelCreatedSubscription=null,this.labelDeletedSubscription=null,this.connectionCreatedSubscription=null,this.connectionDeletedSubscription=null,this.eventEmitter=new b.EventEmitter,this._y=null,this.elements=new Set,this.positionChanged$=y.fromEvent(this.eventEmitter,"positionChanged");try{for(var o=d(this.attachTo.store.labelsInThisLine),s=o.next();!s.done;s=o.next()){var c=s.value,a=new v.LabelView.Entity(c.id,c,this);this.attachTo.root.labelViewRepo.add(a),this.elements.add(a);try{for(var l=d(c.sameLineConnections),h=l.next();!h.done;h=l.next()){var f=h.value,p=new m.ConnectionView.Entity(f.id,f,this);this.attachTo.root.connectionViewRepo.add(p),this.elements.add(p)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}this.labelCreatedSubscription=this.attachTo.root.store.labelRepo.created$.pipe(_.filter(function(t){return u.attachTo.store.isLabelInThisLine(t)})).subscribe(function(t){var e=u.attachTo.root.store.labelRepo.get(t),r=new v.LabelView.Entity(e.id,e,u);u.attachTo.root.labelViewRepo.has(r.id)||u.attachTo.root.labelViewRepo.add(r),u.addElement(r)}),this.connectionCreatedSubscription=this.attachTo.root.store.connectionRepo.created$.pipe(_.filter(function(t){return u.attachTo.store.isConnectionInThisLine(t)})).subscribe(function(t){var e=u.attachTo.root.store.connectionRepo.get(t),r=new m.ConnectionView.Entity(e.id,e,u);u.attachTo.root.connectionViewRepo.has(r.id)||u.attachTo.root.connectionViewRepo.add(r),u.addElement(r)}),this.labelDeletedSubscription=this.attachTo.root.store.labelRepo.deleted$.pipe(_.filter(function(t){return u.attachTo.store.isLabelInThisLine(t)})).subscribe(function(t){var e,r;u.attachTo.root.labelViewRepo.delete(t.id);var n=u.height;try{for(var i=d(u.elements),o=i.next();!o.done;o=i.next()){var s=o.value;if(s instanceof v.LabelView.Entity&&s.id===t.id){u.elements.delete(s);break}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}u.height!==n&&(u.attachTo.layout(),u.layout(u.height-n),u.attachTo.layoutAfterSelf(u.height-n))}),this.connectionDeletedSubscription=this.attachTo.root.store.connectionRepo.deleted$.pipe(_.filter(function(t){return u.attachTo.store.isConnectionInThisLine(t)})).subscribe(function(t){var e,r;u.attachTo.root.connectionViewRepo.delete(t.id);var n=u.height;try{for(var i=d(u.elements),o=i.next();!o.done;o=i.next()){var s=o.value;if(s instanceof m.ConnectionView.Entity&&s.id===t.id){u.elements.delete(s);break}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}u.height!==n&&(u.attachTo.layout(),u.layout(u.height-n),u.attachTo.layoutAfterSelf(u.height-n))})}return Object.defineProperty(t.prototype,"y",{get:function(){return n.assert(null!==this._y),this._y},set:function(t){t!==this._y&&(this._y=t,this.svgElement.y(this.y),this.positionChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var e,t,r,n,i,o;try{for(var s=d(this.elements),u=s.next();!u.done;u=s.next()){(l=u.value)instanceof v.LabelView.Entity&&l.eliminateOverlapping()}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}try{for(var c=d(this.elements),a=c.next();!a.done;a=c.next()){var l;(l=a.value)instanceof m.ConnectionView.Entity&&l.eliminateOverlapping()}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}var h=0;try{for(var f=d(this.elements),p=f.next();!p.done;p=f.next()){var b=p.value;b.layer>h&&(h=b.layer)}}catch(t){i={error:t}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return 30*h},enumerable:!0,configurable:!0}),t.prototype.layout=function(t){null===t?this.attachTo.isFirst?this.y=this.attachTo.svgElement.node.getExtentOfChar(0).y:this.y=this.attachTo.prev.topContext.y+20.8+this.height:this.y+=t},t.prototype.render=function(){this.elements.forEach(function(t){return t.render()})},t.prototype.preRender=function(t){this.svgElement=t.group().back(),this.elements.forEach(function(t){return t.preRender()})},t.prototype.initPosition=function(){this.elements.forEach(function(t){return t.initPosition()})},t.prototype.postRender=function(){this.elements.forEach(function(t){return t.postRender()})},t.prototype.remove=function(){var e,t;try{for(var r=d(this.elements),n=r.next();!n.done;n=r.next()){var i=n.value;i instanceof v.LabelView.Entity?this.attachTo.root.labelViewRepo.delete(i):i instanceof m.ConnectionView.Entity&&this.attachTo.root.connectionViewRepo.delete(i)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.svgElement.remove(),this.labelCreatedSubscription.unsubscribe(),this.labelDeletedSubscription.unsubscribe(),this.connectionCreatedSubscription.unsubscribe(),this.connectionDeletedSubscription.unsubscribe()},t.prototype.addElement=function(t){var e=this.height;this.elements.add(t),t.preRender(),t.initPosition(),t.eliminateOverlapping(),t.render(),t.postRender(),e!==this.height&&(this.attachTo.layout(),this.layout(this.height-e),this.attachTo.layoutAfterSelf(this.height-e))},t.prototype.positionChanged=function(){this.eventEmitter.emit("positionChanged")},t}();r.TopContext=i},{"../../Infrastructure/Assert":205,"./ConnectionView":213,"./LabelView":214,events:1,rxjs:3,"rxjs/operators":200}],217:[function(t,e,r){"use strict";var y=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}};Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(){}return Object.defineProperty(t.prototype,"y",{get:function(){return 30*-(this.layer-1)-20.8},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlapping",{get:function(){var e,t,r,n,i=new Set;try{for(var o=y(this.context.elements),s=o.next();!s.done;s=o.next()){var u=s.value;u!==this&&u.layer===this.layer&&i.add(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}var c=this.x,a=this.width;try{for(var l=y(i),h=l.next();!h.done;h=l.next()){var f=h.value,p=c+a,b=f.x,d=b+f.width;if(c<=b&&b<=p||c<=d&&d<=p||c<=b&&d<=p||b<=c&&p<=d)return!0}}catch(t){r={error:t}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return!1},enumerable:!0,configurable:!0}),t.prototype.eliminateOverlapping=function(){for(;this.overlapping;)++this.layer},t.prototype.postRender=function(){},t}();r.TopContextUser=n},{}],218:[function(t,e,r){"use strict";var c=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t){this.root=t,this.selectLengthLimit=80}return t.prototype.getSelectionInfo=function(){var t,e,r,n,i,o=window.getSelection(),s=null,u=null;try{s=o.anchorNode.parentNode,u=o.focusNode.parentNode}catch(t){return null}try{if(e=s.instance.AnnotatorElement,r=u.instance.AnnotatorElement,e.root.root!==this.root||r.root.root!==this.root)return null;n=e.store.startIndex+o.anchorOffset,i=r.store.startIndex+o.focusOffset}catch(t){return null}if(i<n&&(n=(t=c([i,n],2))[0],i=t[1]),i-n>=this.root.store.config.maxLineWidth)return null;for(;" "===e.store.allContent[n]||"\n"===e.store.allContent[n];)++n;for(;" "===e.store.allContent[i-1]||"\n"===e.store.allContent[i-1];)--i;return i<=n?null:{startIndex:n,endIndex:i}},t.prototype.textSelected=function(){var t=this.getSelectionInfo();t&&this.root.emit("textSelected",t.startIndex,t.endIndex),window.getSelection().removeAllRanges()},t}();r.TextSelectionHandler=n},{}],219:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t){var c=this;this.root=t,this.lastSelection=null,this.svgElement=null,this.markerElement=null,this.root.on("labelClicked",function(t){null===c.lastSelection?(c.lastSelection=t,c.svgElement=c.root.view.svgDoc.path("M0 0L0 0").stroke("black"),c.markerElement=c.svgElement.marker("end",5,5,function(t){t.polyline("0,0 5,2.5 0,5 0.2,2.5")})):c.lastSelection===t?(c.svgElement.remove(),c.svgElement=null,c.lastSelection=null):c.lastSelection!==t&&(c.root.emit("twoLabelsClicked",c.lastSelection,t),c.svgElement.remove(),c.svgElement=null,c.lastSelection=null)}),this.root.view.svgDoc.on("mousemove",function(t){if(null!==c.svgElement){c.markerElement.remove(),c.svgElement.remove();var e=c.root.view.labelViewRepo.get(c.lastSelection),r=e.globalX-c.root.view.svgDoc.node.getBoundingClientRect().left-20,n=e.globalY-c.root.view.svgDoc.node.getBoundingClientRect().top,i=t.clientX-c.root.view.svgDoc.node.getBoundingClientRect().left-20,o=t.clientY-c.root.view.svgDoc.node.getBoundingClientRect().top,s=(r-i)/4,u=Math.min(n,o)-20;c.root.view.svgDoc.rect(50,50).x(i-25).y(o-25).fill("white").remove(),c.svgElement=c.root.view.svgDoc.path("\n                M"+r+" "+n+"\n                C"+(r-s)+","+u+","+(i+s)+","+u+","+i+","+o+"\n                ").stroke({color:"black",width:1}).fill("none").back(),c.markerElement=c.svgElement.marker("end",5,5,function(t){t.polyline("0,0 5,2.5 0,5 0.2,2.5")})}}),this.root.view.svgDoc.on("contextmenu",function(t){null!==c.lastSelection&&(c.svgElement.remove(),c.svgElement=null,c.lastSelection=null,t.preventDefault())})};r.TwoLabelsClickedHandler=n},{}],220:[function(t,e,r){"use strict";var Y=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},q=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var n=t("svg.js"),i=t("./Entities/LineView"),o=t("./Entities/LabelView"),s=t("./Entities/ConnectionView"),u=function(){function t(t,e){var r=this;this.root=e,this.svgDoc=n(t),this.svgDoc.width(1024).height(768),(this.svgDoc.view=this).svgDoc.style({"padding-left":"20px","padding-right":"20px"}),this.lineViewRepo=new i.LineView.Repository(this),this.labelViewRepo=new o.LabelView.Repository(this),this.connectionViewRepo=new s.ConnectionView.Repository(this),this.store.ready$.subscribe(function(){r.construct(),r.render()}),this.store.lineRepo.deleted$.subscribe(function(t){r.lineViewRepo.delete(t.id)})}return Object.defineProperty(t.prototype,"store",{get:function(){return this.root.store},enumerable:!0,configurable:!0}),t.prototype.construct=function(){var e=this;i.LineView.constructAll(this).map(function(t){return e.lineViewRepo.add(t)})},t.prototype.render=function(){var e,t,r,n,i,o,s,u,c,a,l,h,f,p,b,d,y=this,v=document.getElementsByTagName("head")[0],m=document.createElement("style");m.type="text/css",m.appendChild(document.createTextNode("svg .label-view:hover rect {transition: all 0.15s;stroke: red;stroke-width:2;}")),m.appendChild(document.createTextNode("svg .connection-view:hover text {transition: all 0.15s;fill:#006699;cursor:pointer;text-decoration:underline;color:blue;}")),v.appendChild(m);var _=this.svgDoc.text("");_.clear(),_.build(!0);try{for(var x=Y(this.lineViewRepo),w=x.next();!w.done;w=x.next()){var g=q(w.value,2);g[0];g[1].render(_)}}catch(t){e={error:t}}finally{try{w&&!w.done&&(t=x.return)&&t.call(x)}finally{if(e)throw e.error}}try{for(var O=Y(this.lineViewRepo),S=O.next();!S.done;S=O.next()){var j=q(S.value,2);j[0];j[1].calculateInitialCharPositions()}}catch(t){r={error:t}}finally{try{S&&!S.done&&(n=O.return)&&n.call(O)}finally{if(r)throw r.error}}try{for(var E=Y(this.lineViewRepo),P=E.next();!P.done;P=E.next()){var A=q(P.value,2);A[0];A[1].topContext.preRender(this.svgDoc)}}catch(t){i={error:t}}finally{try{P&&!P.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}try{for(var C=Y(this.lineViewRepo),T=C.next();!T.done;T=C.next()){var M=q(T.value,2);M[0];M[1].topContext.initPosition()}}catch(t){s={error:t}}finally{try{T&&!T.done&&(u=C.return)&&u.call(C)}finally{if(s)throw s.error}}try{for(var I=Y(this.lineViewRepo),R=I.next();!R.done;R=I.next()){var N=q(R.value,2);N[0];N[1].layout()}}catch(t){c={error:t}}finally{try{R&&!R.done&&(a=I.return)&&a.call(I)}finally{if(c)throw c.error}}try{for(var k=Y(this.lineViewRepo),L=k.next();!L.done;L=k.next()){var V=q(L.value,2);V[0];V[1].renderTopContext()}}catch(t){l={error:t}}finally{try{L&&!L.done&&(h=k.return)&&h.call(k)}finally{if(l)throw l.error}}try{for(var B=Y(this.lineViewRepo),F=B.next();!F.done;F=B.next()){var D=q(F.value,2);D[0];D[1].topContext.layout(null)}}catch(t){f={error:t}}finally{try{F&&!F.done&&(p=B.return)&&p.call(B)}finally{if(f)throw f.error}}try{for(var z=Y(this.lineViewRepo),W=z.next();!W.done;W=z.next()){var U=q(W.value,2);U[0];U[1].topContext.postRender()}}catch(t){b={error:t}}finally{try{W&&!W.done&&(d=z.return)&&d.call(z)}finally{if(b)throw b.error}}this.resize(),this.svgDoc.on("mouseup",function(){y.root.textSelectionHandler.textSelected()})},t.prototype.rerendered=function(t){var e,r;try{for(var n=Y(this.lineViewRepo),i=n.next();!i.done;i=n.next()){var o=q(i.value,2),s=(o[0],o[1]);if(t&&t===s.id){s.Test();break}s.Test()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}this.resize()},t.prototype.resize=function(){this.svgDoc.size(this.svgDoc.bbox().width+50,this.svgDoc.bbox().height+50)},t}();r.View=u},{"./Entities/ConnectionView":213,"./Entities/LabelView":214,"./Entities/LineView":215,"svg.js":201}],221:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./Annotator/Annotator"),i=t("./Annotator/Action/Action");window.annotator=new n.Annotator('{"content":"","labelCategories":[{"id":"0","text":"","color":"#eac0a2","border-color":"#8c7361"},{"id":"1","text":"","color":"#619dff","border-color":"#3c619d"},{"id":"2","text":"","color":"#9d61ff","border-color":"#613C9D"},{"id":"3","text":"","color":"#ff9d61","border-color":"#995e3a"}],"labels":[{"id":"0","categoryId":"0","startIndex":0,"endIndex":2},{"id":"1","categoryId":"0","startIndex":3,"endIndex":4},{"id":"2","categoryId":"0","startIndex":216,"endIndex":217},{"id":"3","categoryId":"2","startIndex":217,"endIndex":218},{"id":"4","categoryId":"0","startIndex":219,"endIndex":220},{"id":"5","categoryId":"2","startIndex":220,"endIndex":221},{"id":"6","categoryId":"0","startIndex":32,"endIndex":33},{"id":"7","categoryId":"1","startIndex":46,"endIndex":47},{"id":"8","categoryId":"0","startIndex":78,"endIndex":80},{"id":"9","categoryId":"1","startIndex":64,"endIndex":65}],"connectionCategories":[{"id":"0","text":""},{"id":"1","text":""},{"id":"2","text":"..."}],"connections":[{"id":"0","categoryId":"2","fromId":"7","toId":"6"},{"id":"1","categoryId":"0","fromId":"3","toId":"2"},{"id":"2","categoryId":"0","fromId":"5","toId":"4"},{"id":"3","categoryId":"2","fromId":"9","toId":"6"}]}',document.getElementById("svgContainer")),window.annotator.on("textSelected",function(t,e){window.annotator.applyAction(i.Action.Label.Create(0,t,e))}),window.annotator.on("labelClicked",function(t){console.log("labelClicked",t)}),window.annotator.on("labelRightClicked",function(t,e,r){console.log("labelRightClicked",t,e,r),window.annotator.applyAction(i.Action.Label.Update(t,1))}),window.annotator.on("twoLabelsClicked",function(t,e){window.annotator.applyAction(i.Action.Connection.Create(0,t,e))}),window.annotator.on("connectionRightClicked",function(t){window.annotator.applyAction(i.Action.Connection.Update(t,1))}),window.Action=i.Action},{"./Annotator/Action/Action":202,"./Annotator/Annotator":203}]},{},[221]);
//# sourceMappingURL=bundle.js.map
